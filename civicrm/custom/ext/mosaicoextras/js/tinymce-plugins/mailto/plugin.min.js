tinymce.PluginManager.add("mailto", function (t, a) { return t.addButton("mailto", { title: "Mail to", text: "M", onclick: function () { t.windowManager.open({ title: "Mailto", body: [{ type: "textbox", name: "email", label: "Email" }, { type: "textbox", name: "subject", label: "Subject" }, { type: "textbox", name: "cc", label: "Cc" }, { type: "textbox", multiline: !0, name: "body", label: "Body", minWidth: 350, minHeight: 150 }], onsubmit: function (a) { var e = a.data.email ? a.data.email : "", i = a.data.cc ? a.data.cc : "", n = a.data.body ? a.data.body : "", o = a.data.subject ? a.data.subject : "", l = !0; if (e && (e = e.replace(/\s+/g, "")).split(",").forEach(a => { /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a) || (t.notificationManager.open({ text: "Please enter a valid email address", type: "error", timeout: 3e3 }), l = !1) }), i && (i = i.replace(/\s+/g, "")).split(",").forEach(a => { /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a) || (t.notificationManager.open({ text: "Please enter a valid email address cc", type: "error", timeout: 3e3 }), l = !1) }), 1 == l) { var c = '<a href="mailto:' + e + "?subject=" + o + "&amp;cc=" + i + "&amp;body=" + escape(n) + '">' + e + "</a>"; t.insertContent(c) } } }) } }), { getMetadata: function () { return { name: "Mailto Plugin", url: "https://ixiam.com" } } } });
