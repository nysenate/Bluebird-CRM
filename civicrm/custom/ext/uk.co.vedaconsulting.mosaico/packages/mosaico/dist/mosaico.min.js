/** 
 * Mosaico - OpenSource Email Template Editor - v0.18.9 - 2023-02-14 
 * Licensed under the GPL-3.0 (https://www.gnu.org/licenses/gpl-3.0.en.html)
 * 
 * Copyright (c) 2023 Stefano Bagnara 
 */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Mosaico=e()}(function(){var i;return function o(i,r,a){function s(t,e){if(!r[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=r[t]={exports:{}},i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,o,i,r,a)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){var o=e("../src/js/bindings/choose-template.js");document.addEventListener("DOMContentLoaded",function(e){o.addTemplate("array","\x3c!-- ko foreach: $data --\x3e\x3c!-- ko block: $data --\x3e\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("block-show","\x3c!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("block-wysiwyg",'<div class="editable block" data-drop-content="Drop here" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data">  <div class="mo-blockselectionhelper"></div>  <div class="tools" data-bind="tooltips: {}">    \x3c!-- ko if: typeof $index != \'undefined\' --\x3e    <div title="Drag this handle to move the block" data-bind="attr: { title: $root.t(\'Drag this handle to move the block\') }" class="tool handle"><i class="fa fa-fw fa-sort"></i></div>    \x3c!-- ko if: $index() > 0 --\x3e    <div title="Move this block upside" data-bind="attr: { title: $root.t(\'Move this block upside\') }" class="tool moveup"><i class="fa fa-fw fa-sort-asc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, true)\'></i></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $index() < $parent.blocks().length -1 --\x3e    <div title="Move this block downside" data-bind="attr: { title: $root.t(\'Move this block downside\') }" class="tool movedown"><i class="fa fa-fw fa-sort-desc" data-bind=\'click: $root.moveBlock.bind($element, $index, $parent, false)\'></i></div>    \x3c!-- /ko --\x3e    <div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i class="fa fa-fw fa-trash-o"></i></div>    <div title="Duplicate block" class="tool clone" data-bind="attr: { title: $root.t(\'Duplicate block\') }, click: $root.duplicateBlock.bind($element, $index, $parent)"><i class="fa fa-fw fa-files-o"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $rawData._switchVisibility != \'undefined\' --\x3e<div title="Delete block" class="tool delete" data-bind="attr: { title: $root.t(\'Delete block\') }, click: $root.removeBlock.bind($element, $rawData, $parent)"><i class="fa fa-fw fa-trash-o"></i></div>\x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $rawData._nextVariant != \'undefined\' --\x3e<div title="Switch block variant" class="tool variant" data-bind="attr: { title: $root.t(\'Switch block variant\') }, click: $rawData._nextVariant"><i class="fa fa-fw fa-magic"></i></div>\x3c!-- /ko --\x3e  </div>  \x3c!-- ko block: $data --\x3e\x3c!-- /ko --\x3e</div>'),o.addTemplate("blocks-show","\x3c!-- ko template: { name: 'block-show', foreach: blocks } --\x3e\x3c!-- /ko --\x3e"),o.addTemplate("blocks-wysiwyg","<div class=\"sortable-blocks-edit\" data-drop-content=\"Drop here\" data-empty-content=\"Drop here blocks from the Blocks tab\" data-bind=\"attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\"></div>"),o.addTemplate("customstyle",'<div class="customStyleHelp" data-bind="html: $root.t(\'Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=&quot;customStyled&quot;><span>&quot;small cube&quot; </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul>\')">Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class="customStyled"><span>"small cube" </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul></div>'),o.addTemplate("empty",""),o.addTemplate("error",'[<div style="background-color: #fff0f0" data-bind="text: ko.toJS($data)"></div>]'),o.addTemplate("gallery-images",'<div data-bind="foreach: items.currentPageData">  <div class="draggable-item" data-bind="if: typeof thumbnailUrl != \'undefined\'">    <div class="draggable image" data-bind="click: $root.addImage, extdraggable: { data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.draggingImage, \'options\': { \'appendTo\': \'#page\' } }, style: { backgroundImage: \'url(\\\'\' + thumbnailUrl + \'\\\')\' }">      <img title="Drag this image and drop it on any template image placeholder" style="display: block;" data-bind="tooltips: {}, attr: { src: thumbnailUrl, \'title\': $root.t(\'Drag this image and drop it on any template image placeholder\') }"/>    </div>  </div></div>\x3c!-- ko if: items.pageCount() > 1 --\x3e<div class="galleryPager" data-bind="buttonset: {}">  <a href="javascript:void(0)" data-bind="click: items.moveFirst, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-fast-backward\' }, text: false }">First</a>  <a href="javascript:void(0)" data-bind="click: items.movePrevious, button: { disabled: items.currentPage() == 1, icons: { primary: \'fa fa-backward\' }, text: false }">Previous</a>  <span data-bind="button: { disabled: true, text: true, label: \' \'+$root.t(\'__current__ of __total__\', { current: items.currentPage(), total: items.pageCount() })+\' \' }"> X of Y </span>  <a href="javascript:void(0)" data-bind="click: items.moveNext, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-forward\' }, text: false }">Next</a>  <a href="javascript:void(0)" data-bind="click: items.moveLast, button: { disabled: items.currentPage() == items.pageCount(), icons: { primary: \'fa fa-fast-forward\' }, text: false }">Last</a></div>\x3c!-- /ko --\x3e'),o.addTemplate("img-wysiwyg",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\', tolerance: \'pointer\'}, extdroppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\', tolerance: \'pointer\' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { \'data-drop-content\': $root.t(\'Drop here\'), width: _width, height: _height, align: _align }"  class="img-wysiwyg selectable-img"><tr><td class="uploadzone">  <div class="mo-imgselectionhelper"></div>  <div class="mo-uploadzone"></div>  <div class="img-size" data-bind="text: ko.bindingHandlers.wysiwygSrc.placeholderText(ko.utils.unwrapObservable(_width), ko.utils.unwrapObservable(_height))">size</div>  <div class="midtools" data-bind="tooltips: {}">    \x3c!-- ko if: _src() != \'\' --\x3e    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i class="fa fa-fw fa-trash-o"></i></div>    \x3c!-- ko if: typeof $root.editImage !== \'undefined\' --\x3e    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i class="fa fa-fw fa-pencil"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e    \x3c!-- ko if: _src() == \'\' --\x3e    <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>      <input class="fileupload nofile" type="file" accept="image/png, image/jpeg, image/gif" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    </div>    \x3c!-- ko if: typeof $root.selectImage !== \'undefined\' --\x3e    <div title="Select from gallery" class="tool gallery" data-bind="attr: { title: $root.t(\'Select from gallery\') }, click: $root.selectImage.bind($element, _src), clickBubble: true"><i class="fa fa-fw fa-picture-o"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e  </div>  \x3c!-- ko template: _template --\x3e\x3c!-- /ko --\x3e  \x3c!-- ko if: _src() == \'\' --\x3e    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop an image here</span></span>  \x3c!-- /ko --\x3e  \x3c!-- pulsante per la cancellazione --\x3e  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">    \x3c!-- ko if: _src.preloaded && _src() != _src.preloaded() --\x3ePRELOADING....\x3c!-- /ko --\x3e    \x3c!-- ko if: _src() != \'\' --\x3e      <input class="fileupload withfile" type="file" accept="image/png, image/jpeg, image/gif" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    \x3c!-- /ko --\x3e    <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">      <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>    </div>  </div></td></tr></table>'),o.addTemplate("main",'<div id="page" style="display: none;" data-bind="visible: true, css: { withToolbox: $root.showToolbox, withPreviewFrame: showPreviewFrame }">  <div id="main-edit-area" data-bind="click: function(obj, evt) { $root.selectBlock(null); return true; }, clickBubble: false">    \x3c!-- ko withProperties: { templateMode: \'wysiwyg\', templateModeFallback: \'show\' } --\x3e    <div id="main-wysiwyg-area" data-bind="wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage, isresizing: resizing }, block: content"></div>    \x3c!-- /ko --\x3e  </div>  <div id="toolbar" class="mo" data-bind="tooltips: {}">    \x3c!-- ko if: typeof $root.undo != \'undefined\' --\x3e    <span data-bind="buttonset: { }" class="leftButtons">    <a title="Undo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Undo last operation\') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: \'fa fa-reply\' }, label: $root.undo.name, text: true }">UNDO</a>    <a title="Redo last operation" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Redo last operation\') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: \'fa fa-share\' }, label: $root.redo.name, text: true }">REDO</a>    </span>    \x3c!-- ko if: $root.debug --\x3e    <a href="javascript:void(0)" data-bind="click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: \'reset\', text: true }">RESET</a>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e    <span>    <input id="showGallery" type="checkbox" data-bind="checked: $root.showGallery, button: { refreshOn: $root.showGallery,     icons: { primary: \'fa fa-fw fa-picture-o\', secondary: null }, text: true, label: $root.t(\'Gallery\') }"><label title="Show image gallery" for="showGallery" data-bind="attr: { title: $root.t(\'Show image gallery\') }">show gallery</label></input>    </span>    <input id="previewFrameToggle" type="checkbox" data-bind="checked: $root.showPreviewFrame, button: { refreshOn: $root.showPreviewFrame, icons: { primary: \'fa fa-fw fa-tablet\', secondary: null }, text: true, label: $root.t(\'Preview\') }"><label title="Show live preview" for="previewFrameToggle" data-bind="attr: { title: $root.t(\'Show live preview\') }">PREVIEW</label></input>    \x3c!-- ko if: $root.debug --\x3e    <a href="javascript:void(0)" data-bind="click: $root.export, clickBubble: false, button: { label: \'export\', text: true }">EXPORT</a>    <input type="checkbox" data-bind="checked: $root.debug" /> debug    <a href="javascript:void(0)" data-bind="click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: \'fa fa-fw fa-upload\' }, label: \'Default\', text: true }">LOAD BLOCKS</a>    [<a id="subscriptionsCount" href="javascript:viewModel.loopSubscriptionsCount()">subs</a>]    \x3c!-- /ko --\x3e    <span data-bind="visible: false">    <input type="checkbox" data-bind="checked: $root.showToolbox" /> toolbox    </span>    <div class="rightButtons">    \x3c!-- ko if: typeof $root.save !== \'undefined\' --\x3e    <a title="Save template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Save template\') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: \'fa fa-fw fa-cloud-upload\' }, label: $root.t($root.save.name), text: true }">SALVA</a>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $root.test !== \'undefined\' --\x3e    <a title="Show preview and send test" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show preview and send test\') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: \'fa fa-fw fa-paper-plane\' }, label: $root.t($root.test.name), text: true }">TEST</a>    \x3c!-- /ko --\x3e    \x3c!-- ko if: typeof $root.download !== \'undefined\' --\x3e    <form id="downloadForm" action="#" method="POST">    <input type="hidden" name="action" value="download" />    <input type="hidden" name="filename" value="email.html" />    <input type="hidden" name="html" id="downloadHtmlTextarea" />    <a title="Download template" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Download template\') }, click: $root.download.execute, clickBubble: false, button: { disabled: !$root.download.enabled(), icons: { primary: \'fa fa-fw fa-download\' }, label: $root.t($root.download.name), text: true }">DOWNLOAD</a>    </form>    \x3c!-- /ko --\x3e    </div>  </div>  \x3c!-- ko if: $root.showToolbox --\x3e  <div id="main-toolbox" class="mo" data-bind="scrollable: true, withProperties: { templateMode: \'edit\' }">    <div data-bind="template: { name: \'toolbox\' }"></div>  </div>  \x3c!-- /ko --\x3e    <div id="main-preview" class="mo" data-bind="scrollable: true, if: $root.showPreviewFrame">    <div id="preview-toolbar">      <div data-bind="visible: $root.showPreviewFrame, buttonset: { }" style="display: inline-block">        <input id="previewLarge" type="radio" name="previewMode" value="large" data-bind="checked: $root.previewMode, button: { text: false, label: \'large\', icons: { primary: \'fa fa-fw fa-desktop\' } }" />        <label for="previewLarge" title="Large screen" data-bind="attr: { title: $root.t(\'Large screen\') }">Large screen</label>        <input id="previewDesktop" type="radio" name="previewMode" value="desktop" data-bind="checked: $root.previewMode, button: { text: false, label: \'desktop\', icons: { primary: \'fa fa-fw fa-tablet\' } }" />        <label for="previewDesktop" title="Tablet" data-bind="attr: { title: $root.t(\'Tablet\') }">Tablet</label>        <input id="previewMobile" type="radio" name="previewMode" value="mobile" data-bind="checked: $root.previewMode, button: { text: false, label: \'mobile\', icons: { primary: \'fa fa-fw fa-mobile\' } }" />        <label for="previewMobile" title="Smartphone" data-bind="attr: { title: $root.t(\'Smartphone\') }">Smartphone</label>      </div>    </div>    <div id="frame-container" data-bind="css: { desktop: $root.previewMode() == \'desktop\', mobile: $root.previewMode() == \'mobile\', large: $root.previewMode() == \'large\' }">      <iframe data-bind="bindIframe: $data"></iframe>    </div>  </div>  <div class="mo" id="mo-body"></div>  <div id="incompatible-template" title="Saved model is obsolete" style="display: none" data-bind="attr: { title: $root.t(\'Saved model is obsolete\') }, html: $root.t(\'<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>\')">    Incompatible template  </div>  <div id="fake-image-editor" title="Fake image editor" style="display: none" data-bind="attr: { title: $root.t(\'Fake image editor\') }, html: $root.t(\'<p>Fake image editor</p>\')">    <p>Fake image editor</p>  </div></div>\x3c!-- ko if: $root.logoPath --\x3e<div id="loading" class="loading" style="display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;" data-bind="attr: { style: \'position: absolute; top: 5px; left: 6px; z-index: 150;\'}, css: { loading: false }">  <a href="/" data-bind="attr: { href: $root.logoUrl, alt: $root.logoAlt }"><img data-bind="attr: { src: $root.logoPath }" width="32" height="32" alt="mosaico" border="0" /></a>  <div style="opacity: 0" data-bind="visible: false">Oppps... !!</div></div>\x3c!-- /ko --\x3e'),o.addTemplate("toolbox",'<div id="tooltabs" class="tabs_horizontal button_color" data-bind="tabs: { active: $root.selectedTool }">  <ul>    <li data-bind="tooltips: {}"><a title="Blocks ready to be added to the template" data-local="true" href="#toolblocks" data-bind="attr: { title: $root.t(\'Blocks ready to be added to the template\') }"><i class="fa fa-fw fa-cubes"></i> <span data-bind="html: $root.t(\'Blocks\')">Blocks</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit content options" href="#toolcontents" data-local="true" data-bind="attr: { title: $root.t(\'Edit content options\') }"><i class="fa fa-fw fa-pencil"></i> <span data-bind="html: $root.t(\'Content\')">Content</span></a></li>    <li data-bind="tooltips: {}"><a title="Edit style options" href="#toolstyles" data-local="true" data-bind="attr: { title: $root.t(\'Edit style options\') }"><i class="fa fa-fw fa-paint-brush"></i> <span data-bind="html: $root.t(\'Style\')">Style</span></a></li>  </ul>  <div id="toolblocks" data-bind="scrollable: true">    <div class="block-list" data-bind="foreach: blocks" style="text-align: center">      <div class="draggable-item" data-bind="withProperties: { templateMode: \'show\' }">        <div class="block" data-bind="extdraggable: { connectClass: \'sortable-blocks-edit\', data: $data, dropContainer: \'#main-wysiwyg-area\', dragging: $root.dragging, \'options\': { handle: \'.handle\', distance: 10, \'appendTo\': \'#page\' } }, click: $root.addBlock" style="position: relative;">          <div title="Click or drag to add this block to the template" class="handle" data-bind="attr: { title: $root.t(\'Click or drag to add this block to the template\') }, tooltips: {}"></div>          <img data-bind="attr: { alt: $root.t(\'Block __name__\', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath(\'edres/\'+ko.utils.unwrapObservable(type)+\'.png\') }" alt="Block __name__" />        </div>        <a href="javascript:void(0)" class="addblockbutton" data-bind="click: $root.addBlock, button: { label: $root.t(\'Add\') }">Add</a>      </div>    </div>  </div>  <div id="toolcontents" data-bind="scrollable: true">    \x3c!-- ko if: $root.selectedBlock() !== null --\x3e    <div data-bind="block: $root.selectedBlock"></div>    \x3c!-- /ko --\x3e    \x3c!-- ko if: $root.selectedBlock() == null --\x3e    <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and content options, if any, will show here\')">By clicking on message parts you will select a block and content options, if any, will show here</div>    \x3c!-- /ko --\x3e    \x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e  </div>    <div id="toolstyles" data-bind="scrollable: true, withProperties: { templateMode: \'styler\' }">    \x3c!-- ko if: typeof $root.content().theme === \'undefined\' || typeof $root.content().theme().scheme === \'undefined\' || $root.content().theme().scheme() === \'custom\' --\x3e      \x3c!-- ko if: $root.selectedBlock() !== null --\x3e      <div data-bind="block: $root.selectedBlock, css: { workLocal: $root.selectedBlock().customStyle, workGlobal: typeof $root.selectedBlock().customStyle === \'undefined\' || !$root.selectedBlock().customStyle() }"></div>      \x3c!-- /ko --\x3e      \x3c!-- ko if: $root.selectedBlock() == null --\x3e      <div class="noSelectedBlock" data-bind="text: $root.t(\'By clicking on message parts you will select a block and style options, if available, will show here\')">By clicking on message parts you will select a block and style options, if available, will show here</div>      \x3c!-- /ko --\x3e      <div class="workGlobalContent">      \x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e      </div>    \x3c!-- /ko --\x3e  </div></div>        <div id="toolimages" class="slidebar" data-bind="scrollable: true, css: { hidden: $root.showGallery() === false }">  <div class="close" data-bind="click: $root.showGallery.bind($element, false);">X</div>  <span class="pane-title" data-bind="text: $root.t(\'Gallery:\')">Gallery:</span>  <div data-drop-content="Drop here" class="img-dropzone pane uploadzone" data-bind="attr: { \'data-drop-content\': $root.t(\'Drop here\') }, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }">  <div class="mo-uploadzone" style="position: relative; padding: 2em; border: 2px dotted #808080">     <input class="fileupload" type="file" accept="image/png, image/jpeg, image/gif" multiple name="files[]" data-bind="fileupload: { onerror: $root.notifier.error, onfile: $root.loadImage }" style="z-index: 10; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">     <span data-bind="text: $root.t(\'Click or drag files here\')">Click or drag files here</span>     <div class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">       <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">         <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>       </div>     </div>  </div>  </div>  \x3c!-- ko if: $root.showGallery() --\x3e  <div id="toolimagestab" class="tabs_horizontal" data-bind="tabs: { active: $root.selectedImageTab }">    <ul>      <li data-bind="tooltips: {}"><a title="Session images" data-local="true" href="#toolimagesrecent" data-bind="attr: { title: $root.t(\'Session images\') }, text: $root.t(\'Recents\')">Recents</a></li>      <li data-bind="tooltips: {}"><a title="Remote gallery" data-local="true" href="#toolimagesgallery" data-bind="attr: { title: $root.t(\'Remote gallery\') }, text: $root.t(\'Gallery\')">Gallery</a></li>    </ul>    <div id="toolimagesrecent">      \x3c!-- ko if: galleryRecent().length == 0 --\x3e<div class="galleryEmpty" data-bind="text: $root.t(\'No images uploaded, yet\')">No images uploaded, yet</div>\x3c!-- /ko --\x3e      \x3c!-- ko template: {name: \'gallery-images\', data: { items: galleryRecent } } --\x3e# recent gallery #\x3c!-- /ko --\x3e    </div>    <div id="toolimagesgallery" style="text-align: center">    \x3c!-- ko if: $root.galleryLoaded() === false --\x3e<a class="loadbutton" title="Show images from the gallery" href="javascript:void(0)" data-bind="attr: { title: $root.t(\'Show images from the gallery\') }, click: $root.loadGallery, button: { disabled: $root.galleryLoaded, icons: { primary: \'fa fa-fw fa-picture-o\' }, label: $root.galleryLoaded() == \'loading\' ? $root.t(\'Loading...\') : $root.t(\'Load gallery\'), text: true }"># load gally #</a>\x3c!-- /ko --\x3e    \x3c!-- ko if: $root.galleryLoaded() === \'loading\' --\x3e<div class="galleryEmpty" data-bind="text: $root.t(\'Loading gallery...\')">Loading gallery...</div>\x3c!-- /ko --\x3e    \x3c!-- ko if: $root.galleryLoaded() === 0 --\x3e<div class="galleryEmpty" data-bind="text: $root.t(\'The gallery is empty\')">The gallery is empty</div>\x3c!-- /ko --\x3e    \x3c!-- ko template: {name: \'gallery-images\', data: { items: galleryRemote } } --\x3e# remote gallery #\x3c!-- /ko --\x3e    </div>  </div>  \x3c!-- /ko --\x3e</div><div id="tooldebug" class="slidebar" data-bind="css: { hidden: $root.debug() === false }">  <div class="close" data-bind="click: $root.debug.bind($element, false);">X</div>    \x3c!-- ko if: $root.debug --\x3e  Content:  <pre data-bind=\'text: ko.toJSON(content, null, 2)\' style="overflow: auto; height: 20%"></pre>  Blocks:  <pre data-bind=\'text: ko.toJSON(blocks, null, 2)\' style="overflow: auto; height: 20%"></pre>  \x3c!-- /ko --\x3e  <a href="javascript:void(0)" data-bind="click: $root.exportHTMLtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Generate\' }">Output</a>  <a href="javascript:void(0)" data-bind="click: $root.exportJSONtoTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Export\' }">Export</a>  <a href="javascript:void(0)" data-bind="click: $root.importJSONfromTextarea.bind($element, \'#outputhtml\'); clickBubble: false, button: { text: true, label:\'Import\' }">Import</a>  <textarea id="outputhtml" rows="10" style="width: 100%;"></textarea></div><div id="tooltheme" class="ui-widget slidebar" data-bind="css: { hidden: $root.showTheme() === false }">  <div class="close" data-bind="click: $root.showTheme.bind($element, false);">X</div>    \x3c!-- ko withProperties: { templateMode: \'styler\' } --\x3e    \x3c!-- ko if: $root.showTheme --\x3e      \x3c!-- ko block: $root.content().theme --\x3e\x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e  \x3c!-- /ko --\x3e</div>'),o.addTemplate("widget-src",'<table tabfocus="0" cellspacing="0" cellpadding="0" data-drop-content="Drop here" data-bind="click: function(obj, evt) { $root.selectImage(_src); return true; }, clickBubble: false, fudroppable: { activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\' }, extdroppable: { options: { accept: \'.image\', activeClass: \'ui-state-highlight\', hoverClass: \'ui-state-draghover\', tolerance: \'pointer\' }, data: _src, dragged: $root.fileToImage }, attr: { \'data-drop-content\': $root.t(\'Drop here\') }"  class="widget-src selectable-img" style="display: table; margin: 0; min-height: 50px;"><tr><td class="uploadzone" style="padding: 0">  <div class="mo-uploadzone"></div>  <div class="midtools" data-bind="tooltips: {}">    \x3c!-- ko if: _src() != \'\' --\x3e    <div title="Remove image" class="tool delete" data-bind="attr: { title: $root.t(\'Remove image\') }, click: _src.bind(_src, \'\'), clickBubble: false"><i class="fa fa-fw fa-trash-o"></i></div>    \x3c!-- ko if: typeof $root.editImage !== \'undefined\' --\x3e    <div title="Open the image editing tool" class="tool edit" data-bind="attr: { title: $root.t(\'Open the image editing tool\') }, click: $root.editImage.bind($element, _src), clickBubble: false"><i class="fa fa-fw fa-pencil"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e    \x3c!-- ko if: _src() == \'\' --\x3e    <div title="Upload a new image" data-bind="attr: { title: $root.t(\'Upload a new image\') }" class="tool upload" style="position: relative; overflow: hidden;"><i class="fa fa-fw fa-upload"></i>      <input class="fileupload nofile" type="file" accept="image/png, image/jpeg, image/gif" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadImage, canvasPreview: true }" style="z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    </div>    \x3c!-- ko if: typeof $root.selectImage !== \'undefined\' --\x3e    <div title="Select from gallery" class="tool gallery" data-bind="attr: { title: $root.t(\'Select from gallery\') }, click: $root.selectImage.bind($element, _src), clickBubble: true"><i class="fa fa-fw fa-picture-o"></i></div>    \x3c!-- /ko --\x3e    \x3c!-- /ko --\x3e  </div>  \x3c!-- ko if: _src() == \'\' --\x3e    <span class="fileuploadtext" style="text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;"><span class="textMiddle" style=" text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;" data-bind="text: $root.t(\'Drop an image here\')">Drop an image here</span></span>  \x3c!-- /ko --\x3e  \x3c!-- ko if: _src() != \'\' --\x3e  <img style="display: block; max-width: 100%;" src="" data-bind="preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: { width: 160, height: 100 }, width: 400, height: null }" />  \x3c!-- /ko --\x3e  <div title="Drop an image here or click the upload button" data-bind="attr: { title: $root.t(\'Drop an image here or click the upload button\') }, tooltips: {}" class="workzone" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;">    \x3c!-- ko if: _src.preloaded && _src() != _src.preloaded() --\x3ePRELOADING....\x3c!-- /ko --\x3e    \x3c!-- ko if: _src() != \'\' --\x3e      <input class="fileupload withfile" type="file" accept="image/png, image/jpeg, image/gif" name="files[]" data-bind="fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.galleryRecent.unshift.bind($root.galleryRecent), canvasPreview: true }" style="z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block">    \x3c!-- /ko --\x3e    <div class="progress" style="opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;">      <div class="progress-bar progress-bar-success" style="height: 20px; background-color: black; "></div>    </div>  </div></td></tr></table>')})},{"../src/js/bindings/choose-template.js":51}],2:[function(e,o,t){!function(n){!function(){var e,t;e=this,t=function(_){"use strict";function o(){}_.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};function c(e,t){this.items=e,this.settings=t||{diacritics:!0}}o.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){var t=this._events=this._events||{};if(e in t!=!1)for(var n=0;n<t[e].length;n++)t[e][n].apply(this,Array.prototype.slice.call(arguments,1))}},o.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=o.prototype[t[n]]};var e={},r=(e.mixin=function(o){o.plugins={},o.prototype.initializePlugins=function(e){var t,n,o,i=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},r.isArray(e))for(t=0,n=e.length;t<n;t++)"string"==typeof e[t]?i.push(e[t]):(this.plugins.settings[e[t].name]=e[t].options,i.push(e[t].name));else if(e)for(o in e)e.hasOwnProperty(o)&&(this.plugins.settings[o]=e[o],i.push(o));for(;i.length;)this.require(i.shift())},o.prototype.loadPlugin=function(e){var t=this.plugins,n=o.plugins[e];if(!o.plugins.hasOwnProperty(e))throw new Error('Unable to find "'+e+'" plugin');t.requested[e]=!0,t.loaded[e]=n.fn.apply(this,[this.plugins.settings[e]||{}]),t.names.push(e)},o.prototype.require=function(e){var t=this.plugins;if(!this.plugins.loaded.hasOwnProperty(e)){if(t.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');this.loadPlugin(e)}return t.loaded[e]},o.define=function(e,t){o.plugins[e]={name:e,fn:t}}},{isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),f=(c.prototype.tokenize=function(e,t){if(!(e=l(String(e||"").toLowerCase()))||!e.length)return[];for(var n,o,i=[],r=e.split(/ +/),a=0,s=r.length;a<s;a++){if(n=d(r[a]),this.settings.diacritics)for(o in u)u.hasOwnProperty(o)&&(n=n.replace(new RegExp(o,"g"),u[o]));t&&(n="\\b"+n),i.push({string:r[a],regex:new RegExp(n,"i")})}return i},c.prototype.iterator=function(e,t){var n=s(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;t<n;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)};n.apply(e,[t])},c.prototype.getScoreFunction=function(e,t){function i(e,t){var n;return!e||-1===(n=(e=String(e||"")).search(t.regex))?0:(t=t.string.length/e.length,0===n&&(t+=.5),t)}var r,a=(e=this.prepareSearch(e,t)).tokens,s=e.options.fields,l=a.length,d=e.options.nesting,c=(r=s.length)?1===r?function(e,t){return i(g(t,s[0],d),e)}:function(e,t){for(var n=0,o=0;n<r;n++)o+=i(g(t,s[n],d),e);return o/r}:function(){return 0};return l?1===l?function(e){return c(a[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,o=0;n<l;n++){if((t=c(a[n],e))<=0)return 0;o+=t}return o/l}:function(e){for(var t=0,n=0;t<l;t++)n+=c(a[t],e);return n/l}:function(){return 0}},c.prototype.getSortFunction=function(e,n){var t,o,i,r,a,s,l,d=this,c=!(e=d.prepareSearch(e,n)).query&&n.sort_empty||n.sort,u=function(e,t){return"$score"===e?t.score:g(d.items[t.id],e,n.nesting)},p=[];if(c)for(t=0,o=c.length;t<o;t++)!e.query&&"$score"===c[t].field||p.push(c[t]);if(e.query){for(l=!0,t=0,o=p.length;t<o;t++)if("$score"===p[t].field){l=!1;break}l&&p.unshift({field:"$score",direction:"desc"})}else for(t=0,o=p.length;t<o;t++)if("$score"===p[t].field){p.splice(t,1);break}for(s=[],t=0,o=p.length;t<o;t++)s.push("desc"===p[t].direction?-1:1);return(r=p.length)?1===r?(i=p[0].field,a=s[0],function(e,t){return a*f(u(i,e),u(i,t))}):function(e,t){for(var n,o=0;o<r;o++)if(n=p[o].field,n=s[o]*f(u(n,e),u(n,t)))return n;return 0}:null},c.prototype.prepareSearch=function(e,t){var n,o,i;return"object"==typeof e?e:(n=(t=a({},t)).fields,o=t.sort,i=t.sort_empty,n&&!s(n)&&(t.fields=[n]),o&&!s(o)&&(t.sort=[o]),i&&!s(i)&&(t.sort_empty=[i]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e,t.respect_word_boundaries),total:0,items:[]})},c.prototype.search=function(e,n){var o,i,t=this,r=this.prepareSearch(e,n);return n=r.options,e=r.query,i=n.score||t.getScoreFunction(r),e.length?t.iterator(t.items,function(e,t){o=i(e),(!1===n.filter||0<o)&&r.items.push({score:o,id:t})}):t.iterator(t.items,function(e,t){r.items.push({score:1,id:t})}),(e=t.getSortFunction(r,n))&&r.items.sort(e),r.total=r.items.length,"number"==typeof n.limit&&(r.items=r.items.slice(0,n.limit)),r},function(e,t){return"number"==typeof e&&"number"==typeof t?t<e?1:e<t?-1:0:(e=n(String(e||"")),(t=n(String(t||"")))<e?1:e<t?-1:0)}),a=function(e,t){for(var n,o,i=1,r=arguments.length;i<r;i++)if(o=arguments[i])for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e},g=function(e,t,n){if(e&&t){if(!n)return e[t];for(var o=t.split(".");o.length&&(e=e[o.shift()]););return e}},l=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},d=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},s=Array.isArray||void 0!==_&&_.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},n=function(){var e,t,n,o,i="",r={};for(n in u)if(u.hasOwnProperty(n))for(i+=o=u[n].substring(2,u[n].length-1),e=0,t=o.length;e<t;e++)r[o.charAt(e)]=n;var a=new RegExp("["+i+"]","g");return function(e){return e.replace(a,function(e){return r[e]}).toLowerCase()}}();function t(e,t){return navigator.userAgentData?e===navigator.userAgentData.platform:t.test(navigator.userAgent)}function p(e){return void 0!==e}function S(e){return null==e?null:"boolean"==typeof e?e?"1":"0":e+""}function h(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function i(t,n,e){var o,i=t.trigger,r={};for(o in t.trigger=function(){var e=arguments[0];if(-1===n.indexOf(e))return i.apply(t,arguments);r[e]=arguments},e.apply(t,[]),t.trigger=i,r)r.hasOwnProperty(o)&&i.apply(t,r[o])}function b(e){var t,n,o={};return void 0===e?console.warn("WARN getSelection cannot locate input control"):"selectionStart"in e?(o.start=e.selectionStart,o.length=e.selectionEnd-o.start):document.selection&&(e.focus(),t=document.selection.createRange(),n=document.selection.createRange().text.length,t.moveStart("character",-e.value.length),o.start=t.text.length-n,o.length=n),o}function v(e,t){return e?(j.$testInput||(j.$testInput=_("<span />").css({position:"absolute",width:"auto",padding:0,whiteSpace:"pre"}),_("<div />").css({position:"absolute",width:0,height:0,overflow:"hidden"}).append(j.$testInput).appendTo("body")),j.$testInput.text(e),C(t,j.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),j.$testInput.width()):0}function y(r){function e(e,t){var n,o,i;t=t||{},(e=e||window.event||{}).metaKey||e.altKey||!t.force&&!1===r.data("grow")||(t=r.val(),e.type&&"keydown"===e.type.toLowerCase()&&(n=48<=(o=e.keyCode)&&o<=57||65<=o&&o<=90||96<=o&&o<=111||186<=o&&o<=222||32===o,46===o||8===o?(i=b(r[0])).length?t=t.substring(0,i.start)+t.substring(i.start+i.length):8===o&&i.start?t=t.substring(0,i.start-1)+t.substring(i.start+1):46===o&&void 0!==i.start&&(t=t.substring(0,i.start)+t.substring(i.start+1)):n&&(o=e.shiftKey,i=String.fromCharCode(e.keyCode),t+=i=o?i.toUpperCase():i.toLowerCase())),e=(n=r.attr("placeholder"))?v(n,r)+4:0,(o=Math.max(v(t,r),e)+4)!==a&&(a=o,r.width(o),r.triggerHandler("resize")))}var a=null;r.on("keydown keyup update blur",e),e()}var m=t("macOS",/Mac/),w=m?91:17,k=m?18:17,x=!t("Android",/android/i)&&!!document.createElement("input").validity,O={before:function(e,t,n){var o=e[t];e[t]=function(){return n.apply(e,arguments),o.apply(e,arguments)}},after:function(t,e,n){var o=t[e];t[e]=function(){var e=o.apply(t,arguments);return n.apply(t,arguments),e}}},C=function(e,t,n){var o,i,r={};if(n)for(o=0,i=n.length;o<i;o++)r[n[o]]=e.css(n[o]);else r=e.css();t.css(r)},j=function(e,t){var n,o,i,r,a,s=this,l=e[0],d=(l.selectize=s,window.getComputedStyle&&window.getComputedStyle(l,null));if(d=(d?d.getPropertyValue("direction"):l.currentStyle&&l.currentStyle.direction)||e.parents("[dir]:first").attr("dir")||"",_.extend(s,{order:0,settings:t,$input:e,tabIndex:e.attr("tabindex")||"",tagType:"select"===l.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(d),eventNS:".selectize"+ ++j.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",lastValidValue:"",caretPos:0,loading:0,loadedSearches:{},isDropdownClosing:!1,$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===t.loadThrottle?s.onSearchChange:(i=s.onSearchChange,r=t.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(a),a=window.setTimeout(function(){i.apply(e,t)},r)})}),s.sifter=new c(this.options,{diacritics:t.diacritics}),s.settings.options){for(n=0,o=s.settings.options.length;n<o;n++)s.registerOption(s.settings.options[n]);delete s.settings.options}if(s.settings.optgroups){for(n=0,o=s.settings.optgroups.length;n<o;n++)s.registerOptionGroup(s.settings.optgroups[n]);delete s.settings.optgroups}s.settings.mode=s.settings.mode||(1===s.settings.maxItems?"single":"multi"),"boolean"!=typeof s.settings.hideSelected&&(s.settings.hideSelected="multi"===s.settings.mode),s.initializePlugins(s.settings.plugins),s.setupCallbacks(),s.setupTemplates(),s.setup()};return o.mixin(j),e.mixin(j),_.extend(j.prototype,{setup:function(){var n,e,o,t=this,i=t.settings,r=t.eventNS,a=_(window),s=_(document),l=t.$input,d=t.settings.mode,c=l.attr("class")||"",u=_("<div>").addClass(i.wrapperClass).addClass(c).addClass(d),p=_("<div>").addClass(i.inputClass).addClass("items").appendTo(u),f=_('<input type="select-one" autocomplete="new-password" autofill="no" />').appendTo(p).attr("tabindex",l.is(":disabled")?"-1":t.tabIndex),g=_(i.dropdownParent||u),d=_("<div>").addClass(i.dropdownClass).addClass(d).hide().appendTo(g),g=_("<div>").addClass(i.dropdownContentClass).attr("tabindex","-1").appendTo(d);(e=l.attr("id"))&&(f.attr("id",e+"-selectized"),_("label[for='"+e+"']").attr("for",e+"-selectized")),t.settings.copyClassesToDropdown&&d.addClass(c),u.css({width:l[0].style.width}),t.plugins.names.length&&(e="plugin-"+t.plugins.names.join(" plugin-"),u.addClass(e),d.addClass(e)),(null===i.maxItems||1<i.maxItems)&&1===t.tagType&&l.attr("multiple","multiple"),t.settings.placeholder&&f.attr("placeholder",i.placeholder),!t.settings.splitOn&&t.settings.delimiter&&(c=t.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t.settings.splitOn=new RegExp("\\s*"+c+"+\\s*")),l.attr("autocorrect")&&f.attr("autocorrect",l.attr("autocorrect")),l.attr("autocapitalize")&&f.attr("autocapitalize",l.attr("autocapitalize")),l.is("input")&&(f[0].type=l[0].type),t.$wrapper=u,t.$control=p,t.$control_input=f,t.$dropdown=d,t.$dropdown_content=g,d.on("mouseenter mousedown mouseup click","[data-disabled]>[data-selectable]",function(e){e.stopImmediatePropagation()}),d.on("mouseenter","[data-selectable]",function(){return t.onOptionHover.apply(t,arguments)}),d.on("mouseup click","[data-selectable]",function(){return t.onOptionSelect.apply(t,arguments)}),e="mouseup",c="*:not(input)",o=function(){return t.onItemSelect.apply(t,arguments)},(n=p).on(e,c,function(e){for(var t=e.target;t&&t.parentNode!==n[0];)t=t.parentNode;return e.currentTarget=t,o.apply(this,[e])}),y(f),p.on({mousedown:function(){return t.onMouseDown.apply(t,arguments)},click:function(){return t.onClick.apply(t,arguments)}}),f.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return t.onKeyDown.apply(t,arguments)},keypress:function(){return t.onKeyPress.apply(t,arguments)},input:function(){return t.onInput.apply(t,arguments)},resize:function(){t.positionDropdown.apply(t,[])},focus:function(){return t.ignoreBlur=!1,t.onFocus.apply(t,arguments)},paste:function(){return t.onPaste.apply(t,arguments)}}),s.on("keydown"+r,function(e){t.isCmdDown=e[m?"metaKey":"ctrlKey"],t.isCtrlDown=e[m?"altKey":"ctrlKey"],t.isShiftDown=e.shiftKey}),s.on("keyup"+r,function(e){e.keyCode===k&&(t.isCtrlDown=!1),16===e.keyCode&&(t.isShiftDown=!1),e.keyCode===w&&(t.isCmdDown=!1)}),s.on("mousedown"+r,function(e){if(t.isFocused){if(e.target===t.$dropdown[0]||e.target.parentNode===t.$dropdown[0])return!1;t.$dropdown.has(e.target).length||e.target===t.$control[0]||t.blur(e.target)}}),a.on(["scroll"+r,"resize"+r].join(" "),function(){t.isOpen&&t.positionDropdown.apply(t,arguments)}),a.on("mousemove"+r,function(){t.ignoreHover=t.settings.ignoreHover}),this.revertSettings={$children:l.children().detach(),tabindex:l.attr("tabindex")},l.attr("tabindex",-1).hide().after(t.$wrapper),Array.isArray(i.items)&&(t.lastValidValue=i.items,t.setValue(i.items),delete i.items),x&&l.on("invalid"+r,function(e){e.preventDefault(),t.isInvalid=!0,t.refreshState()}),t.updateOriginalInput(),t.refreshItems(),t.refreshState(),t.updatePlaceholder(),t.isSetup=!0,l.is(":disabled")&&t.disable(),t.on("change",this.onChange),l.data("selectize",t),l.addClass("selectized"),t.trigger("initialize"),!0===i.preload&&t.onSearchChange("")},setupTemplates:function(){var e=this,n=e.settings.labelField,o=e.settings.valueField,i=e.settings.optgroupLabelField;e.settings.render=_.extend({},{optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,t){return'<div class="option '+(""===e[o]?"selectize-dropdown-emptyoptionlabel":"")+'">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&#x2026;</div>"}},e.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur",dropdown_item_activate:"onDropdownItemActivate",dropdown_item_deactivate:"onDropdownItemDeactivate"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]])&&this.on(e,t)},onClick:function(e){this.isDropdownClosing||this.isFocused&&this.isOpen||(this.focus(),e.preventDefault())},onMouseDown:function(e){var t=this,n=e.isDefaultPrevented();_(e.target);if(t.isFocused){if(e.target!==t.$control_input[0])return"single"===t.settings.mode?(t.isOpen?t.close():t.open(),t.isDropdownClosing=!0,setTimeout(function(){t.isDropdownClosing=!1},t.settings.closeDropdownThreshold)):n||t.setActiveItem(null),!1}else n||window.setTimeout(function(){t.focus()},0)},onChange:function(){""!==this.getValue()&&(this.lastValidValue=this.getValue()),this.$input.trigger("input"),this.$input.trigger("change")},onPaste:function(e){var i=this;i.isFull()||i.isInputHidden||i.isLocked?e.preventDefault():i.settings.splitOn&&setTimeout(function(){var e=i.$control_input.val();if(e.match(i.settings.splitOn))for(var t=e.trim().split(i.settings.splitOn),n=0,o=t.length;n<o;n++)i.createItem(t[n])},0)},onKeyPress:function(e){var t;return this.isLocked?e&&e.preventDefault():(t=String.fromCharCode(e.keyCode||e.which),this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0)},onKeyDown:function(e){e.target,this.$control_input[0];var t,n=this;if(n.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(n.isCmdDown)return void n.selectAll();break;case 27:return void(n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:return!n.isOpen&&n.hasOptions?n.open():n.$activeOption&&(n.ignoreHover=!0,(t=n.getAdjacentOption(n.$activeOption,1)).length&&n.setActiveOption(t,!0,!0)),void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:return n.$activeOption&&(n.ignoreHover=!0,(t=n.getAdjacentOption(n.$activeOption,-1)).length&&n.setActiveOption(t,!0,!0)),void e.preventDefault();case 13:return void(n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),e.preventDefault()));case 37:return void n.advanceSelection(-1,e);case 39:return void n.advanceSelection(1,e);case 9:return n.settings.selectOnTab&&n.isOpen&&n.$activeOption&&(n.onOptionSelect({currentTarget:n.$activeOption}),n.isFull()||e.preventDefault()),void(n.settings.create&&n.createItem()&&n.settings.showAddOptionOnCreate&&e.preventDefault());case 8:case 46:return void n.deleteSelection(e)}!n.isFull()&&!n.isInputHidden||(m?e.metaKey:e.ctrlKey)||e.preventDefault()}},onInput:function(e){var t=this,n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(t){var n=this,o=n.settings.load;o&&!n.loadedSearches.hasOwnProperty(t)&&(n.loadedSearches[t]=!0,n.load(function(e){o.apply(n,[t,e])}))},onFocus:function(e){var t=this,n=t.isFocused;if(t.isDisabled)return t.blur(),e&&e.preventDefault(),!1;t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState())},onBlur:function(e,t){var n,o=this;o.isFocused&&(o.isFocused=!1,o.ignoreFocus||(n=function(){o.close(),o.setTextboxValue(""),o.setActiveItem(null),o.setActiveOption(null),o.setCaret(o.items.length),o.refreshState(),t&&t.focus&&t.focus(),o.isBlurring=!1,o.ignoreFocus=!1,o.trigger("blur")},o.isBlurring=!0,o.ignoreFocus=!0,o.settings.create&&o.settings.createOnBlur?o.createItem(null,!1,n):n()))},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var t,n=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),(t=_(e.currentTarget)).hasClass("create")?n.createItem(null,function(){n.settings.closeAfterSelect&&n.close()}):void 0!==(t=t.attr("data-value"))&&(n.lastQuery=null,n.setTextboxValue(""),n.addItem(t),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&n.setActiveOption(n.getOption(t)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},getTextboxValue:function(){return this.$control_input.val()},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){i(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setMaxItems:function(e){this.settings.maxItems=e=0===e?null:e,this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.refreshState()},setActiveItem:function(e,t){var n,o,i,r,a,s,l=this;if("single"!==l.settings.mode)if((e=_(e)).length){if("mousedown"===(n=t&&t.type.toLowerCase())&&l.isShiftDown&&l.$activeItems.length){for(s=l.$control.children(".active:last"),s=Array.prototype.indexOf.apply(l.$control[0].childNodes,[s[0]]),(i=Array.prototype.indexOf.apply(l.$control[0].childNodes,[e[0]]))<s&&(a=s,s=i,i=a),o=s;o<=i;o++)r=l.$control[0].childNodes[o],-1===l.$activeItems.indexOf(r)&&(_(r).addClass("active"),l.$activeItems.push(r));t.preventDefault()}else"mousedown"===n&&l.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(a=l.$activeItems.indexOf(e[0]),l.$activeItems.splice(a,1),e.removeClass("active")):l.$activeItems.push(e.addClass("active")[0]):(_(l.$activeItems).removeClass("active"),l.$activeItems=[e.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}else _(l.$activeItems).removeClass("active"),l.$activeItems=[],l.isFocused&&l.showInput()},setActiveOption:function(e,t,n){var o,i,r,a,s=this;s.$activeOption&&(s.$activeOption.removeClass("active"),s.trigger("dropdown_item_deactivate",s.$activeOption.attr("data-value"))),s.$activeOption=null,(e=_(e)).length&&(s.$activeOption=e.addClass("active"),s.isOpen&&s.trigger("dropdown_item_activate",s.$activeOption.attr("data-value")),!t&&p(t)||(e=s.$dropdown_content.height(),o=s.$activeOption.outerHeight(!0),t=s.$dropdown_content.scrollTop()||0,a=(r=i=s.$activeOption.offset().top-s.$dropdown_content.offset().top+t)-e+o,e+t<i+o?s.$dropdown_content.stop().animate({scrollTop:a},n?s.settings.scrollDuration:0):i<t&&s.$dropdown_content.stop().animate({scrollTop:r},n?s.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:0}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;return e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0)),e},blur:function(e){return this.$control_input[0].blur(),this.onBlur(null,e),this},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return{fields:e.searchField,conjunction:e.searchConjunction,sort:t="string"==typeof t?[{field:t}]:t,nesting:e.nesting,filter:e.filter}},search:function(e){var t,n,o,i=this,r=i.settings,a=this.getSearchOptions();if(r.score&&"function"!=typeof(o=i.settings.score.apply(this,[e])))throw new Error('Selectize "score" setting must be a function that returns a function');if(e!==i.lastQuery?(r.normalize&&(e=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),i.lastQuery=e,n=i.sifter.search(e,_.extend(a,{score:o})),i.currentResults=n):n=_.extend(!0,{},i.currentResults),r.hideSelected)for(t=n.items.length-1;0<=t;t--)-1!==i.items.indexOf(S(n.items[t].id))&&n.items.splice(t,1);return n},refreshOptions:function(e){void 0===e&&(e=!0);var t,n,o,i,r,a,s,l,d,c,u,p,f,g,h,b,v=this,y=v.$control_input.val().trim(),m=v.search(y),w=v.$dropdown_content,k=v.$activeOption&&S(v.$activeOption.attr("data-value")),x=m.items.length;for("number"==typeof v.settings.maxOptions&&(x=Math.min(x,v.settings.maxOptions)),i={},r=[],t=0;t<x;t++)for(a=v.options[m.items[t].id],s=v.render("option",a),l=a[v.settings.optgroupField]||"",n=0,o=(d=Array.isArray(l)?l:[l])&&d.length;n<o;n++)l=d[n],v.optgroups.hasOwnProperty(l)||(l=""),i.hasOwnProperty(l)||(i[l]=document.createDocumentFragment(),r.push(l)),i[l].appendChild(s);for(this.settings.lockOptgroupOrder&&r.sort(function(e,t){return(v.optgroups[e]&&v.optgroups[e].$order||0)-(v.optgroups[t]&&v.optgroups[t].$order||0)}),c=document.createDocumentFragment(),t=0,x=r.length;t<x;t++)v.optgroups.hasOwnProperty(l=r[t])&&i[l].childNodes.length?((u=document.createDocumentFragment()).appendChild(v.render("optgroup_header",v.optgroups[l])),u.appendChild(i[l]),c.appendChild(v.render("optgroup",_.extend({},v.optgroups[l],{html:(h=u,b=void 0,(b=document.createElement("div")).appendChild(h.cloneNode(!0)),b.innerHTML),dom:u})))):c.appendChild(i[l]);if(w.html(c),v.settings.highlight&&(w.removeHighlight(),m.query.length&&m.tokens.length))for(t=0,x=m.tokens.length;t<x;t++)!function(e,t){var a,s;if("string"!=typeof t||t.length)a="string"==typeof t?new RegExp(t,"i"):t,s=function(e){var t=0;if(3===e.nodeType){var n,o,i=e.data.search(a);0<=i&&0<e.data.length&&(o=e.data.match(a),(n=document.createElement("span")).className="highlight",(i=e.splitText(i)).splitText(o[0].length),o=i.cloneNode(!0),n.appendChild(o),i.parentNode.replaceChild(n,i),t=1)}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var r=0;r<e.childNodes.length;++r)r+=s(e.childNodes[r]);return t},e.each(function(){s(this)})}(w,m.tokens[t].regex);if(!v.settings.hideSelected)for(v.$dropdown.find(".selected").removeClass("selected"),t=0,x=v.items.length;t<x;t++)v.getOption(v.items[t]).addClass("selected");(p=v.canCreate(y))&&v.settings.showAddOptionOnCreate&&(w.prepend(v.render("option_create",{input:y})),g=_(w[0].childNodes[0])),v.hasOptions=0<m.items.length||p&&v.settings.showAddOptionOnCreate||v.settings.setFirstOptionActive,v.hasOptions?(0<m.items.length?(y=k&&v.getOption(k),""!==m.query&&v.settings.setFirstOptionActive?f=w.find("[data-selectable]:first"):""!==m.query&&y&&y.length?f=y:"single"===v.settings.mode&&v.items.length&&(f=v.getOption(v.items[0])),f&&f.length||(f=g&&!v.settings.addPrecedence?v.getAdjacentOption(g,1):w.find("[data-selectable]:first"))):f=g,v.setActiveOption(f),e&&!v.isOpen&&v.open()):(v.setActiveOption(null),e&&v.isOpen&&v.close())},addOption:function(e){var t,n,o,i=this;if(Array.isArray(e))for(t=0,n=e.length;t<n;t++)i.addOption(e[t]);else(o=i.registerOption(e))&&(i.userOptions[o]=!0,i.lastQuery=null,i.trigger("option_add",o,e))},registerOption:function(e){var t=S(e[this.settings.valueField]);return null!=t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(e,t){var n,o,i,r=this;if(e=S(e),n=S(t[r.settings.valueField]),null!==e&&r.options.hasOwnProperty(e)){if("string"!=typeof n)throw new Error("Value must be set in option data");i=r.options[e].$order,n!==e&&(delete r.options[e],-1!==(o=r.items.indexOf(e))&&r.items.splice(o,1,n)),t.$order=t.$order||i,r.options[n]=t,o=r.renderCache.item,i=r.renderCache.option,o&&(delete o[e],delete o[n]),i&&(delete i[e],delete i[n]),-1!==r.items.indexOf(n)&&(o=r.getItem(e),i=_(r.render("item",t)),o.hasClass("active")&&i.addClass("active"),o.replaceWith(i)),r.lastQuery=null,r.isOpen&&r.refreshOptions(!1)}},removeOption:function(e,t){var n=this,o=(e=S(e),n.renderCache.item),i=n.renderCache.option;o&&delete o[e],i&&delete i[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(e){var n=this,o=(n.loadedSearches={},n.userOptions={},n.renderCache={},n.options);_.each(n.options,function(e,t){-1==n.items.indexOf(e)&&delete o[e]}),n.options=n.sifter.items=o,n.lastQuery=null,n.trigger("option_clear"),n.clear(e)},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getFirstOption:function(){var e=this.$dropdown.find("[data-selectable]");return 0<e.length?e.eq(0):_()},getAdjacentOption:function(e,t){var n=this.$dropdown.find("[data-selectable]"),e=n.index(e)+t;return 0<=e&&e<n.length?n.eq(e):_()},getElementWithValue:function(e,t){if(null!=(e=S(e)))for(var n=0,o=t.length;n<o;n++)if(t[n].getAttribute("data-value")===e)return _(t[n]);return _()},getElementWithTextContent:function(e,t,n){if(null!=(e=S(e)))for(var o=0,i=n.length;o<i;o++){var r=n[o].textContent;if(1==t&&(r=null!==r?r.toLowerCase():null,e=e.toLowerCase()),r===e)return _(n[o])}return _()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},getFirstItemMatchedByTextContent:function(e,t){return this.getElementWithTextContent(e,t=null!==t&&!0===t,this.$dropdown_content.find("[data-selectable]"))},addItems:function(e,t){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,o=0;o<n.length;o++)this.buffer.appendChild(n[o]);for(var i=Array.isArray(e)?e:[e],o=0,r=i.length;o<r;o++)this.isPending=o<r-1,this.addItem(i[o],t);e=this.$control[0];e.insertBefore(this.buffer,e.firstChild),this.buffer=null},addItem:function(r,a){i(this,a?[]:["change"],function(){var e,t,n,o=this,i=o.settings.mode;r=S(r),-1!==o.items.indexOf(r)?"single"===i&&o.close():o.options.hasOwnProperty(r)&&("single"===i&&o.clear(a),"multi"===i&&o.isFull()||(e=_(o.render("item",o.options[r])),n=o.isFull(),o.items.splice(o.caretPos,0,r),o.insertAtCaret(e),o.isPending&&(n||!o.isFull())||o.refreshState(),o.isSetup&&(n=o.$dropdown_content.find("[data-selectable]"),o.isPending||(t=o.getOption(r),t=o.getAdjacentOption(t,1).attr("data-value"),o.refreshOptions(o.isFocused&&"single"!==i),t&&o.setActiveOption(o.getOption(t))),!n.length||o.isFull()?o.close():o.isPending||o.positionDropdown(),o.updatePlaceholder(),o.trigger("item_add",r,e),o.isPending||o.updateOriginalInput({silent:a}))))})},removeItem:function(e,t){var n,o,i=this,r=e instanceof _?e:i.getItem(e);e=S(r.attr("data-value")),-1!==(n=i.items.indexOf(e))&&(i.trigger("item_before_remove",e,r),r.remove(),r.hasClass("active")&&(o=i.$activeItems.indexOf(r[0]),i.$activeItems.splice(o,1)),i.items.splice(n,1),i.lastQuery=null,!i.settings.persist&&i.userOptions.hasOwnProperty(e)&&i.removeOption(e,t),n<i.caretPos&&i.setCaret(i.caretPos-1),i.refreshState(),i.updatePlaceholder(),i.updateOriginalInput({silent:t}),i.positionDropdown(),i.trigger("item_remove",e,r))},createItem:function(e,n){var o=this,i=o.caretPos,r=(e=e||(o.$control_input.val()||"").trim(),arguments[arguments.length-1]);if("function"!=typeof r&&(r=function(){}),"boolean"!=typeof n&&(n=!0),!o.canCreate(e))return r(),!1;o.lock();var t,a,s="function"==typeof o.settings.create?this.settings.create:function(e){var t={},e=t[o.settings.labelField]=e;if(!o.settings.formatValueToKey||"function"!=typeof o.settings.formatValueToKey||null!=(e=o.settings.formatValueToKey.apply(this,[e]))&&"object"!=typeof e&&"function"!=typeof e)return t[o.settings.valueField]=e,t;throw new Error('Selectize "formatValueToKey" setting must be a function that returns a value other than object or function.')},l=(a=!(t=function(e){var t;return o.unlock(),!e||"object"!=typeof e||"string"!=typeof(t=S(e[o.settings.valueField]))?r():(o.setTextboxValue(""),o.addOption(e),o.setCaret(i),o.addItem(t),o.refreshOptions(n&&"single"!==o.settings.mode),void r(e))}),function(){a||(a=!0,t.apply(this,arguments))}),s=s.apply(this,[e,l]);return void 0!==s&&l(s),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var e=this,t=e.isFull(),n=e.isLocked;e.$wrapper.toggleClass("rtl",e.rtl),e.$control.toggleClass("focus",e.isFocused).toggleClass("disabled",e.isDisabled).toggleClass("required",e.isRequired).toggleClass("invalid",e.isInvalid).toggleClass("locked",n).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",e.isFocused&&!e.isInputHidden).toggleClass("dropdown-active",e.isOpen).toggleClass("has-options",!_.isEmptyObject(e.options)).toggleClass("has-items",0<e.items.length),e.$control_input.data("grow",!t&&!n)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,o,i,r=this;if(e=e||{},1===r.tagType){for(o=[],t=0,n=r.items.length;t<n;t++)i=r.options[r.items[t]][r.settings.labelField]||"",o.push('<option value="'+h(r.items[t])+'" selected="selected">'+h(i)+"</option>");o.length||this.$input.attr("multiple")||o.push('<option value="" selected="selected"></option>'),r.$input.html(o.join(""))}else r.$input.val(r.getValue()),r.$input.attr("value",r.$input.val());r.isSetup&&!e.silent&&r.trigger("change",r.$input.val())},updatePlaceholder:function(){var e;this.settings.placeholder&&(e=this.$control_input,this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0}))},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||e.$control_input.is(":invalid")||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.setupDropdownHeight(),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&(e.hideInput(),e.isBlurring&&e.$control_input[0].blur()),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position(),e=(t.top+=e.outerHeight(!0),e[0].getBoundingClientRect().width);this.settings.minWidth&&this.settings.minWidth>e&&(e=this.settings.minWidth),this.$dropdown.css({width:e,top:t.top,left:t.left})},setupDropdownHeight:function(){var n,e,o;"object"==typeof this.settings.dropdownSize&&"auto"!==this.settings.dropdownSize.sizeType&&(o=this.settings.dropdownSize.sizeValue,"numberItems"===this.settings.dropdownSize.sizeType&&(e=this.$dropdown_content.children(),n=0,e.each(function(e,t){if(e===o)return!1;n+=_(t).outerHeight(!0)}),e=this.$dropdown_content.css("padding-top")?this.$dropdown_content.css("padding-top").replace(/\W*(\w)\w*/g,"$1"):0,o=n-e+"px"),this.$dropdown_content.css({height:o,maxHeight:"none"}))},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),e=e[0],n=this.buffer||this.$control[0];0===t?n.insertBefore(e,n.firstChild):n.insertBefore(e,n.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(e){var t,n,o,i,r,a=this,s=e&&8===e.keyCode?-1:1,l=b(a.$control_input[0]);if(a.$activeOption&&!a.settings.hideSelected&&(i=("string"==typeof a.settings.deselectBehavior&&"top"===a.settings.deselectBehavior?a.getFirstOption():a.getAdjacentOption(a.$activeOption,-1)).attr("data-value")),o=[],a.$activeItems.length){for(r=a.$control.children(".active:"+(0<s?"last":"first")),r=a.$control.children(":not(input)").index(r),0<s&&r++,t=0,n=a.$activeItems.length;t<n;t++)o.push(_(a.$activeItems[t]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(a.isFocused||"single"===a.settings.mode)&&a.items.length&&(s<0&&0===l.start&&0===l.length?o.push(a.items[a.caretPos-1]):0<s&&l.start===a.$control_input.val().length&&o.push(a.items[a.caretPos]));if(!o.length||"function"==typeof a.settings.onDelete&&!1===a.settings.onDelete.apply(a,[o]))return!1;for(void 0!==r&&a.setCaret(r);o.length;)a.removeItem(o.pop());return a.showInput(),a.positionDropdown(),a.refreshOptions(!0),i&&(e=a.getOption(i)).length&&a.setActiveOption(e),!0},advanceSelection:function(e,t){var n,o,i,r=this;0!==e&&(r.rtl&&(e*=-1),n=0<e?"last":"first",i=b(r.$control_input[0]),r.isFocused&&!r.isInputHidden?(o=r.$control_input.val().length,(e<0?0!==i.start||0!==i.length:i.start!==o)||o||r.advanceCaret(e,t)):(i=r.$control.children(".active:"+n)).length&&(o=r.$control.children(":not(input)").index(i),r.setActiveItem(null),r.setCaret(0<e?o+1:o)))},advanceCaret:function(e,t){var n,o=this;0!==e&&(o.isShiftDown?(n=o.$control_input[0<e?"next":"prev"]()).length&&(o.hideInput(),o.setActiveItem(n),t&&t.preventDefault()):o.setCaret(o.caretPos+e))},setCaret:function(e){var t=this;if(e="single"===t.settings.mode?t.items.length:Math.max(0,Math.min(t.items.length,e)),!t.isPending)for(var n,o=t.$control.children(":not(input)"),i=0,r=o.length;i<r;i++)n=_(o[i]).detach(),i<e?t.$control_input.before(n):t.$control.append(n);t.caretPos=e},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var e=this,t=e.eventNS,n=e.revertSettings;e.trigger("destroy"),e.off(),e.$wrapper.remove(),e.$dropdown.remove(),e.$input.html("").append(n.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:n.tabindex}).show(),e.$control_input.removeData("grow"),e.$input.removeData("selectize"),0==--j.count&&j.$testInput&&(j.$testInput.remove(),j.$testInput=void 0),_(window).off(t),_(document).off(t),_(document.body).off(t),delete e.$input[0].selectize},render:function(e,t){var n,o,i="",r=!1,a=this;return(r="option"!==e&&"item"!==e?r:!!(n=S(t[a.settings.valueField])))&&(p(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(n))?a.renderCache[e][n]:(i=_(a.settings.render[e].apply(this,[t,h])),"option"===e||"option_create"===e?t[a.settings.disabledField]||i.attr("data-selectable",""):"optgroup"===e&&(o=t[a.settings.optgroupValueField]||"",i.attr("data-group",o),t[a.settings.disabledField]&&i.attr("data-disabled","")),"option"!==e&&"item"!==e||i.attr("data-value",n||""),r&&(a.renderCache[e][n]=i[0]),i[0])},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){var t;return!!this.settings.create&&(t=this.settings.createFilter,e.length&&("function"!=typeof t||t.apply(this,[e]))&&("string"!=typeof t||new RegExp(t).test(e))&&(!(t instanceof RegExp)||t.test(e)))}}),j.count=0,j.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,showAddOptionOnCreate:!0,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!0,preload:!1,allowEmptyOption:!1,showEmptyOptionInDropdown:!1,emptyOptionLabel:"--",setFirstOptionActive:!1,closeAfterSelect:!1,closeDropdownThreshold:250,scrollDuration:60,deselectBehavior:"previous",loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,dropdownSize:{sizeType:"auto",sizeValue:"auto"},normalize:!1,render:{}},_.fn.selectize=function(d){function c(e,i){function t(e,t){e=_(e);var n,o=S(e.val());(o||b.allowEmptyOption)&&(l.hasOwnProperty(o)?t&&((n=l[o][k])?_.isArray(n)?n.push(t):l[o][k]=[n,t]:l[o][k]=t):((n=d(e)||{})[y]=n[y]||e.text(),n[m]=n[m]||o,n[w]=n[w]||e.prop("disabled"),n[k]=n[k]||t,l[o]=n,s.push(n),e.is(":selected")&&i.items.push(o)))}var n,o,r,a,s=i.options,l={},d=function(e){e=v&&e.attr(v);return"string"==typeof e&&e.length?JSON.parse(e):null};for(i.maxItems=e.attr("multiple")?null:1,n=0,o=(a=e.children()).length;n<o;n++)if("optgroup"===(r=a[n].tagName.toLowerCase())){g=f=p=u=c=void 0;var c,u,p,f,g,h=a[n];for((p=(h=_(h)).attr("label"))&&((f=d(h)||{})[x]=p,f[O]=p,f[w]=h.prop("disabled"),i.optgroups.push(f)),c=0,u=(g=_("option",h)).length;c<u;c++)t(g[c],p)}else"option"===r&&t(a[n])}var u=_.fn.selectize.defaults,b=_.extend({},u,d),v=b.dataAttr,y=b.labelField,m=b.valueField,w=b.disabledField,k=b.optgroupField,x=b.optgroupLabelField,O=b.optgroupValueField;return this.each(function(){if(!this.selectize){var e=_(this),t=this.tagName.toLowerCase(),n=e.attr("placeholder")||e.attr("data-placeholder"),o=(n||b.allowEmptyOption||(n=e.children('option[value=""]').text()),b.allowEmptyOption&&b.showEmptyOptionInDropdown&&!e.children('option[value=""]').length&&(o=e.html(),e.html('<option value="">'+b.emptyOptionLabel+"</option>"+o)),{placeholder:n,options:[],optgroups:[],items:[]});if("select"===t)c(e,o);else{var i,r,a,s,n=e,l=o,t=n.attr(v);if(t)for(l.options=JSON.parse(t),i=0,r=l.options.length;i<r;i++)l.items.push(l.options[i][m]);else{t=_.trim(n.val()||"");if(b.allowEmptyOption||t.length){for(i=0,r=(a=t.split(b.delimiter)).length;i<r;i++)(s={})[y]=a[i],s[m]=a[i],l.options.push(s);l.items=a}}}new j(e,_.extend(!0,{},u,o,d)).settings_user=d}})},_.fn.selectize.defaults=j.defaults,_.fn.selectize.support={validity:x},j.define("auto_position",function(){const o={top:"top",bottom:"bottom"};this.positionDropdown=function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position(),n=(t.top+=e.outerHeight(!0),this.$dropdown.prop("scrollHeight")+5),n=this.$control.get(0).getBoundingClientRect().top+n+this.$wrapper.height()>window.innerHeight?o.top:o.bottom,e={width:e.outerWidth(),left:t.left};n===o.top?(Object.assign(e,{bottom:t.top,top:"unset",margin:"0 0 5px 0"}),this.$dropdown.addClass("selectize-position-top")):(Object.assign(e,{top:t.top,bottom:"unset",margin:"5px 0 0 0"}),this.$dropdown.removeClass("selectize-position-top")),this.$dropdown.css(e)}}),j.define("auto_select_on_type",function(e){var n,o=this;o.onBlur=(n=o.onBlur,function(e){var t=o.getFirstItemMatchedByTextContent(o.lastValue,!0);return void 0!==t.attr("data-value")&&o.getValue()!==t.attr("data-value")&&o.setValue(t.attr("data-value")),n.apply(this,arguments)})}),j.define("autofill_disable",function(e){var t,n=this;n.setup=(t=n.setup,function(){t.apply(n,arguments),n.$control_input.attr({autocomplete:"new-password",autofill:"no"})})}),j.define("clear_button",function(t){var e,n=this;t=_.extend({title:"Clear",className:"clear",label:"×",html:function(e){return'<a class="'+e.className+'" title="'+e.title+'"> '+e.label+"</a>"}},t),n.setup=(e=n.setup,function(){e.apply(n,arguments),n.$button_clear=_(t.html(t)),"single"===n.settings.mode&&n.$wrapper.addClass("single"),n.$wrapper.append(n.$button_clear),""!==n.getValue()&&0!==n.getValue().length||n.$wrapper.find("."+t.className).css("display","none"),n.on("change",function(){""!==n.getValue()||0===n.getValue().length?n.$wrapper.find("."+t.className).css("display",""):n.$wrapper.find("."+t.className).css("display","none")}),n.$wrapper.on("click","."+t.className,function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),n.isLocked||(n.clear(),n.$wrapper.find("."+t.className).css("display","none"))})})}),j.define("drag_drop",function(e){if(!_.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');var o,t,n,i;"multi"===this.settings.mode&&((o=this).lock=(t=o.lock,function(){var e=o.$control.data("sortable");return e&&e.disable(),t.apply(o,arguments)}),o.unlock=(n=o.unlock,function(){var e=o.$control.data("sortable");return e&&e.enable(),n.apply(o,arguments)}),o.setup=(i=o.setup,function(){i.apply(this,arguments);var n=o.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:o.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),n.addClass("dragging")},stop:function(){n.removeClass("dragging");var e=o.$activeItems?o.$activeItems.slice():null,t=[];n.children("[data-value]").each(function(){t.push(_(this).attr("data-value"))}),o.isFocused=!1,o.setValue(t),o.isFocused=!0,o.setActiveItem(e),o.positionDropdown()}})}))}),j.define("dropdown_header",function(e){var t,n=this;e=_.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&#xd7;</a></div></div>'}},e),n.setup=(t=n.setup,function(){t.apply(n,arguments),n.$dropdown_header=_(e.html(e)),n.$dropdown.prepend(n.$dropdown_header)})}),j.define("optgroup_columns",function(a){function e(){var e,t,n,o,i=_("[data-group]",s.$dropdown_content),r=i.length;if(r&&s.$dropdown_content.width()){if(a.equalizeHeight){for(e=t=0;e<r;e++)t=Math.max(t,i.eq(e).height());i.css({height:t})}a.equalizeWidth&&(o=s.$dropdown_content.innerWidth()-l(),n=Math.round(o/r),i.css({width:n}),1<r&&(o=o-n*(r-1),i.eq(r-1).css({width:o})))}}var o,s=this,l=(a=_.extend({equalizeWidth:!0,equalizeHeight:!0},a),this.getAdjacentOption=function(e,t){var n=e.closest("[data-group]").find("[data-selectable]"),e=n.index(e)+t;return 0<=e&&e<n.length?n.eq(e):_()},this.onKeyDown=(o=s.onKeyDown,function(e){var t,n;if(!this.isOpen||37!==e.keyCode&&39!==e.keyCode)return o.apply(this,arguments);s.ignoreHover=!0,t=(n=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),(n=(e=(n=37===e.keyCode?n.prev("[data-group]"):n.next("[data-group]")).find("[data-selectable]")).eq(Math.min(e.length-1,t))).length&&this.setActiveOption(n)}),function(){var e,t=l.width,n=document;return void 0===t&&((e=n.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=l.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t});(a.equalizeHeight||a.equalizeWidth)&&(O.after(this,"positionDropdown",e),O.after(this,"refreshOptions",e))}),j.define("remove_button",function(e){e=_.extend({label:"&#xd7;",title:"Remove",className:"remove",append:!0},e),("single"===this.settings.mode?function(i,t){t.className="remove-single";var n,r=i,a='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+h(t.title)+'">'+t.label+"</a>";i.setup=(n=r.setup,function(){var e,o;t.append&&(e=_(r.$input.context).attr("id"),_("#"+e),o=r.settings.render.item,r.settings.render.item=function(e){return t=o.apply(i,arguments),n=a,_("<span>").append(t).append(n);var t,n}),n.apply(i,arguments),i.$control.on("click","."+t.className,function(e){e.preventDefault(),r.isLocked||r.clear()})})}:function(r,e){var t,n=r,a='<a href="javascript:void(0)" class="'+e.className+'" tabindex="-1" title="'+h(e.title)+'">'+e.label+"</a>";r.setup=(t=n.setup,function(){var i;e.append&&(i=n.settings.render.item,n.settings.render.item=function(e){return t=i.apply(r,arguments),n=a,o=t.search(/(<\/[^>]+>\s*)$/),t.substring(0,o)+n+t.substring(o);var t,n,o}),t.apply(r,arguments),r.$control.on("click","."+e.className,function(e){if(e.preventDefault(),!n.isLocked)return e=_(e.currentTarget).parent(),n.setActiveItem(e),n.deleteSelection()&&n.setCaret(n.items.length),!1})})})(this,e)}),j.define("restore_on_backspace",function(n){var o,e=this;n.text=n.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(o=e.onKeyDown,function(e){var t;if(!(8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(t=this.caretPos-1)&&t<this.items.length))return o.apply(this,arguments);t=this.options[this.items[t]],this.deleteSelection(e)&&(this.setTextboxValue(n.text.apply(this,[t])),this.refreshOptions(!0)),e.preventDefault()})}),j.define("select_on_focus",function(e){var n,t,o=this;o.on("focus",(n=o.onFocus,function(e){var t=o.getItem(o.getValue()).text();return o.clear(),o.setTextboxValue(t),o.$control_input.select(),setTimeout(function(){o.settings.selectOnTab&&o.setActiveOption(o.getFirstItemMatchedByTextContent(t)),o.settings.score=null},0),n.apply(this,arguments)})),o.onBlur=(t=o.onBlur,function(e){return""===o.getValue()&&o.lastValidValue!==o.getValue()&&o.setValue(o.lastValidValue),setTimeout(function(){o.settings.score=function(){return function(){return 1}}},0),t.apply(this,arguments)}),o.settings.score=function(){return function(){return 1}}}),j.define("tag_limit",function(i){const e=this;i.tagLimit=i.tagLimit,this.onBlur=function(){const o=e.onBlur;return function(e){if(o.apply(this,e),e){var e=this.$control,t=e.find(".item");const n=i.tagLimit;void 0===n||t.length<=n||(t.toArray().forEach(function(e,t){t<n||_(e).hide()}),e.append("<span><b>"+(t.length-n)+"</b></span>"))}}}(),this.onFocus=function(){const t=e.onFocus;return function(e){t.apply(this,e),e&&((e=this.$control).find(".item").show(),e.find("span").remove())}}()}),j},"object"==typeof o&&"object"==typeof o.exports?o.exports=t("undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null):e.Selectize=t(e.jQuery)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(x,O,e){!function(p){!function(){"use strict";var e=x("object-assign");function f(e,t){if(e===t)return 0;for(var n=e.length,o=t.length,i=0,r=Math.min(n,o);i<r;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0}function g(e){return p.Buffer&&"function"==typeof p.Buffer.isBuffer?p.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var h=x("util/"),o=Object.prototype.hasOwnProperty,b=Array.prototype.slice,t="foo"===function(){}.name;function v(e){return Object.prototype.toString.call(e)}function y(e){return!g(e)&&("function"==typeof p.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var r=O.exports=d,n=/\s*function\s+([^\(\s]*)\s*/;function i(e){if(h.isFunction(e))return t?e.name:(e=e.toString().match(n))&&e[1]}function a(e,t){return"string"!=typeof e||e.length<t?e:e.slice(0,t)}function s(e){return t||!h.isFunction(e)?h.inspect(e):"[Function"+((e=i(e))?": "+e:"")+"]"}function l(e,t,n,o,i){throw new r.AssertionError({message:n,actual:e,expected:t,operator:o,stackStartFunction:i})}function d(e,t){e||l(e,!0,t,"==",r.ok)}function m(e,t,n,o){if(e===t)return!0;if(g(e)&&g(t))return 0===f(e,t);if(h.isDate(e)&&h.isDate(t))return e.getTime()===t.getTime();if(h.isRegExp(e)&&h.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(y(e)&&y(t)&&v(e)===v(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===f(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(g(e)!==g(t))return!1;var i=(o=o||{actual:[],expected:[]}).actual.indexOf(e);if(-1===i||i!==o.expected.indexOf(t)){o.actual.push(e),o.expected.push(t);var r=e,a=t,s=n,l=o;if(null==r||null==a)return!1;if(h.isPrimitive(r)||h.isPrimitive(a))return r===a;if(s&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(a))return!1;i=w(r),o=w(a);if(i&&!o||!i&&o)return!1;if(i)return r=b.call(r),a=b.call(a),m(r,a,s);var d,c,u=k(r),p=k(a);if(u.length!==p.length)return!1;for(u.sort(),p.sort(),c=u.length-1;0<=c;c--)if(u[c]!==p[c])return!1;for(c=u.length-1;0<=c;c--)if(d=u[c],!m(r[d],a[d],s,l))return!1}return!0}return n?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(e&&t){if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return 1}catch(e){}return Error.isPrototypeOf(t)?void 0:!0===t.call({},e)}}function u(e,t,n,o){if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(o=n,n=null),t=function(e){var t;try{e()}catch(e){t=e}return t}(t),o=(n&&n.name?" ("+n.name+").":".")+(o?" "+o:"."),e&&!t&&l(t,n,"Missing expected exception"+o);var i="string"==typeof o,r=!e&&t&&!n;if((!e&&h.isError(t)&&i&&c(t,n)||r)&&l(t,n,"Got unwanted exception"+o),e&&t&&n&&!c(t,n)||!e&&t)throw t}r.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=a(s((n=this).actual),128)+" "+n.operator+" "+a(s(n.expected),128),this.generatedMessage=!0);var t,n=e.stackStartFunction||l;Error.captureStackTrace?Error.captureStackTrace(this,n):(e=new Error).stack&&(e=e.stack,t=i(n),0<=(t=e.indexOf("\n"+t))&&(t=e.indexOf("\n",t+1),e=e.substring(t+1)),this.stack=e)},h.inherits(r.AssertionError,Error),r.fail=l,r.ok=d,r.equal=function(e,t,n){e!=t&&l(e,t,n,"==",r.equal)},r.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",r.notEqual)},r.deepEqual=function(e,t,n){m(e,t,!1)||l(e,t,n,"deepEqual",r.deepEqual)},r.deepStrictEqual=function(e,t,n){m(e,t,!0)||l(e,t,n,"deepStrictEqual",r.deepStrictEqual)},r.notDeepEqual=function(e,t,n){m(e,t,!1)&&l(e,t,n,"notDeepEqual",r.notDeepEqual)},r.notDeepStrictEqual=function e(t,n,o){m(t,n,!0)&&l(t,n,o,"notDeepStrictEqual",e)},r.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",r.strictEqual)},r.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",r.notStrictEqual)},r.throws=function(e,t,n){u(!0,e,t,n)},r.doesNotThrow=function(e,t,n){u(!1,e,t,n)},r.ifError=function(e){if(e)throw e},r.strict=e(function e(t,n){t||l(t,!0,n,"==",e)},r,{equal:r.strictEqual,deepEqual:r.deepStrictEqual,notEqual:r.notStrictEqual,notDeepEqual:r.notDeepStrictEqual}),r.strict.strict=r.strict;var k=Object.keys||function(e){var t,n=[];for(t in e)o.call(e,t)&&n.push(t);return n}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":39,"util/":6}],4:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],5:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],6:[function(C,e,j){!function(_,S){!function(){var e,s=/%[sdj%]/g,o=(j.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,i=o.length,r=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),a=o[n];n<i;a=o[++n])h(a)||!d(a)?r+=" "+a:r+=" "+l(a);return r},j.deprecate=function(e,t){var n;return y(S.process)?function(){return j.deprecate(e,t).apply(this,arguments)}:!0===_.noDeprecation?e:(n=!1,function(){if(!n){if(_.throwDeprecation)throw new Error(t);_.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)})},{});function l(e,t){var n={seen:[],stylize:r};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&j._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),c(n,e,n.depth)}function i(e,t){t=l.styles[t];return t?"["+l.colors[t][0]+"m"+e+"["+l.colors[t][1]+"m":e}function r(e,t){return e}function c(t,n,o){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==j.inspect&&(!n.constructor||n.constructor.prototype!==n))return v(e=n.inspect(o,t))?e:c(t,e,o);var e=function(e,t){if(y(t))return e.stylize("undefined","undefined");{var n;if(v(t))return n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}(t,n);if(e)return e;var i,e=Object.keys(n),r=(i={},e.forEach(function(e,t){i[e]=!0}),i);if(t.showHidden&&(e=Object.getOwnPropertyNames(n)),k(n)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return u(n);if(0===e.length){if(x(n))return a=n.name?": "+n.name:"",t.stylize("[Function"+a+"]","special");if(m(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(k(n))return u(n)}var a="",s=!1,l=["{","}"];if(f(n)&&(s=!0,l=["[","]"]),x(n)&&(a=" [Function"+(n.name?": "+n.name:"")+"]"),m(n)&&(a=" "+RegExp.prototype.toString.call(n)),w(n)&&(a=" "+Date.prototype.toUTCString.call(n)),k(n)&&(a=" "+u(n)),0===e.length&&(!s||0==n.length))return l[0]+a+l[1];if(o<0)return m(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n),d=s?function(t,n,o,i,e){for(var r=[],a=0,s=n.length;a<s;++a)O(n,String(a))?r.push(p(t,n,o,i,String(a),!0)):r.push("");return e.forEach(function(e){e.match(/^\d+$/)||r.push(p(t,n,o,i,e,!0))}),r}(t,n,o,r,e):e.map(function(e){return p(t,n,o,r,e,s)}),t.seen.pop();var d;return 60<d.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===a?"":a+"\n ")+" "+d.join(",\n  ")+" "+l[1]:l[0]+a+" "+d.join(", ")+" "+l[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,o,i,r){var a,s,t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(t.get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),O(o,i)||(a="["+i+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=h(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(s=r?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(r&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function m(e){return d(e)&&"[object RegExp]"===t(e)}function d(e){return"object"==typeof e&&null!==e}function w(e){return d(e)&&"[object Date]"===t(e)}function k(e){return d(e)&&("[object Error]"===t(e)||e instanceof Error)}function x(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function n(e){return e<10?"0"+e.toString(10):e.toString(10)}j.debuglog=function(t){var n;return y(e)&&(e=_.env.NODE_DEBUG||""),t=t.toUpperCase(),o[t]||(new RegExp("\\b"+t+"\\b","i").test(e)?(n=_.pid,o[t]=function(){var e=j.format.apply(j,arguments);console.error("%s %d: %s",t,n,e)}):o[t]=function(){}),o[t]},(j.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},j.isArray=f,j.isBoolean=g,j.isNull=h,j.isNullOrUndefined=function(e){return null==e},j.isNumber=b,j.isString=v,j.isSymbol=function(e){return"symbol"==typeof e},j.isUndefined=y,j.isRegExp=m,j.isObject=d,j.isDate=w,j.isError=k,j.isFunction=x,j.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},j.isBuffer=C("./support/isBuffer");var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}j.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[n(e.getHours()),n(e.getMinutes()),n(e.getSeconds())].join(":"),[e.getDate(),a[e.getMonth()],t].join(" ")),j.format.apply(j,arguments))},j.inherits=C("inherits"),j._extend=function(e,t){if(t&&d(t))for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e}}.call(this)}.call(this,C("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":5,_process:40,inherits:4}],7:[function(e,t,n){!function(e){!function(){"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?e:globalThis;t.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"use strict";var o=e("get-intrinsic"),i=e("./"),r=i(o("String.prototype.indexOf"));t.exports=function(e,t){t=o(e,!!t);return"function"==typeof t&&-1<r(e,".prototype.")?i(t):t}},{"./":9,"get-intrinsic":16}],9:[function(e,t,n){"use strict";var o=e("function-bind"),e=e("get-intrinsic"),i=e("%Function.prototype.apply%"),r=e("%Function.prototype.call%"),a=e("%Reflect.apply%",!0)||o.call(r,i),s=e("%Object.getOwnPropertyDescriptor%",!0),l=e("%Object.defineProperty%",!0),d=e("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}t.exports=function(e){var t=a(o,r,arguments);return s&&l&&s(t,"length").configurable&&l(t,"length",{value:1+d(0,e.length-(arguments.length-1))}),t};function c(){return a(o,i,arguments)}l?l(t.exports,"apply",{value:c}):t.exports.apply=c},{"function-bind":15,"get-intrinsic":16}],10:[function(u,p,e){!function(c){!function(){var n=u("util"),o=u("assert");function i(){return(new Date).getTime()}for(var r=Array.prototype.slice,a={},s=void 0!==c&&c.console?c.console:"undefined"!=typeof window&&window.console?window.console:{},e=[[function(){},"log"],[function(){s.log.apply(s,arguments)},"info"],[function(){s.log.apply(s,arguments)},"warn"],[function(){s.warn.apply(s,arguments)},"error"],[function(e){a[e]=i()},"time"],[function(e){var t=a[e];if(!t)throw new Error("No such label: "+e);delete a[e];t=i()-t;s.log(e+": "+t+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=n.format.apply(null,arguments),s.error(e.stack)},"trace"],[function(e){s.log(n.inspect(e)+"\n")},"dir"],[function(e){{var t;e||(t=r.call(arguments,1),o.ok(!1,n.format.apply(null,t)))}},"assert"]],t=0;t<e.length;t++){var l=e[t],d=l[0],l=l[1];s[l]||(s[l]=d)}p.exports=s}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:3,util:46}],11:[function(t,e,n){"use strict";t=t("get-intrinsic")("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch(e){t=null}e.exports=t},{"get-intrinsic":16}],12:[function(e,t,n){function o(e){return a(Number(e))}function u(e){return(e=a(e))+e+e}function i(e){var t,n;return 10<e.length?(n=1+e.indexOf("("),t=e.indexOf(")"),n=e.substring(n,t).split(","),["#",o(n[0]),o(n[1]),o(n[2])].join("")):e}var l,d,r,p,f,c,g,h,b,v,y,m,a;l=jQuery,d=0,r=window.navigator.userAgent,p=0<r.indexOf("MSIE "),f=p?"-ie":"",c=!p&&(/mozilla/.test(r.toLowerCase())&&!/webkit/.test(r.toLowerCase())),g=[],h=["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646"],b=["f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","92cddc","fac08f","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","31859b","e36c09","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","205867","974806"],v=["c00000","ff0000","ffc000","ffff00","92d050","00b050","00b0f0","0070c0","002060","7030a0"],y=[["003366","336699","3366cc","003399","000099","0000cc","000066"],["006666","006699","0099cc","0066cc","0033cc","0000ff","3333ff","333399"],["669999","009999","33cccc","00ccff","0099ff","0066ff","3366ff","3333cc","666699"],["339966","00cc99","00ffcc","00ffff","33ccff","3399ff","6699ff","6666ff","6600ff","6600cc"],["339933","00cc66","00ff99","66ffcc","66ffff","66ccff","99ccff","9999ff","9966ff","9933ff","9900ff"],["006600","00cc00","00ff00","66ff99","99ffcc","ccffff","ccccff","cc99ff","cc66ff","cc33ff","cc00ff","9900cc"],["003300","009933","33cc33","66ff66","99ff99","ccffcc","ffffff","ffccff","ff99ff","ff66ff","ff00ff","cc00cc","660066"],["333300","009900","66ff33","99ff66","ccff99","ffffcc","ffcccc","ff99cc","ff66cc","ff33cc","cc0099","993399"],["336600","669900","99ff33","ccff66","ffff99","ffcc99","ff9999","ff6699","ff3399","cc3399","990099"],["666633","99cc00","ccff33","ffff66","ffcc66","ff9966","ff6666","ff0066","d60094","993366"],["a58800","cccc00","ffff00","ffcc00","ff9933","ff6600","ff0033","cc0066","660033"],["996633","cc9900","ff9900","cc6600","ff3300","ff0000","cc0000","990033"],["663300","996600","cc3300","993300","990000","800000","993333"]],m="#0000ffff",a=function(e){e=e.toString(16);return e=1==e.length?"0"+e:e},l.widget("evol.colorpicker",{version:"3.4.0",options:{color:null,customTheme:null,showOn:"both",hideButton:!1,displayIndicator:!0,transparentColor:!1,history:!0,defaultPalette:"theme",strings:"Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet."},_active:!1,_create:function(){var e,t,n,o,i=this,r=this.options.color;if(this._paletteIdx="theme"==this.options.defaultPalette?1:2,this._id="evo-cp"+d++,this._enabled=!0,this.options.showOn=this.options.hideButton?"focus":this.options.showOn,"INPUT"===this.element.get(0).tagName?(e=this.element,t=("focus"===this.options.showOn?"":"evo-pointer ")+"evo-colorind"+(c?"-ff":f)+(this.options.hideButton?" evo-hidden-button":""),this._isPopup=!(n=""),this._palette=null,o=e.val(),null!==r?r!=o&&e.val(r).change():""!==o&&(r=this.options.color=o),r===m?t+=" evo-transparent":n=null!==r?"background-color:"+r:"",e.addClass("colorPicker "+this._id).wrap('<div style="width:'+(this.options.hideButton?this.element.width():this.element.width()+32)+"px;"+(p?"margin-bottom:-21px;":"")+(c?"padding:1px 0;":"")+'" class="evo-cp-wrap"></div>').after('<div class="'+t+'" style="'+n+'"></div>').on("keyup onpaste",function(e){var t=l(this).val();t!=i.options.color&&i._setValue(t,!0)}),"both"!==(o=this.options.showOn)&&"focus"!==o||e.on("focus",function(){i.showPalette()}),"both"!==o&&"button"!==o||e.next().on("click",function(e){return e.stopPropagation(),i.showPalette(),!1})):(this._isPopup=!1,this._palette=this.element.html(this._paletteHTML()).attr("aria-haspopup","true"),this._bindColors()),this.options.history){r&&this._add2History(r);var a=this.options.initialHistory;if(a)for(var s in a)this._add2History(a[s])}},_paletteHTML:function(){var e=this._paletteIdx=Math.abs(this._paletteIdx),t=this.options,n=t.strings.split(","),e='<div class="evo-pop'+f+' ui-widget ui-widget-content ui-corner-all"'+(this._isPopup?' style="position:absolute"':"")+"><span>"+this["_paletteHTML"+e]()+'</span><div class="evo-more"><a href="javascript:void(0)">'+n[1+e]+"</a>";return t.history&&(e+='<a href="javascript:void(0)" class="evo-hist">'+n[5]+"</a>"),e+="</div>",t.displayIndicator&&(e+=this._colorIndHTML(this.options.color)+this._colorIndHTML("")),e+="</div>"},_colorIndHTML:function(e){var t=p?"evo-colorbox-ie ":"",n="";return e?e===m?t+="evo-transparent":n="background-color:"+e:n="display:none",'<div class="evo-color" style="float:left"><div style="'+n+'" class="'+t+'"></div><span>'+(e||"")+"</span></div>"},_paletteHTML1:function(){var e,t=this.options,n=t.strings.split(","),o='<td style="background-color:',i=p?'"><div style="width:2px;"></div></td>':'"><span></span></td>',r='<tr><th colspan="10" class="ui-widget-content">',a='<table class="'+("evo-palette"+f+(t.customTheme?" cust-theme":""))+'">'+r+n[0]+"</th></tr><tr>";if(t.customTheme)for(e=0,ml=t.customTheme.length;e<ml;e++)a+=o+t.customTheme[e]+i,e%10==9&&(a+="</tr><tr>");else{for(o+="#",e=0;e<10;e++)a+=o+h[e]+i;for(a+="</tr>",p||(a+='<tr><th colspan="10"></th></tr>'),a+='<tr class="top">',e=0;e<10;e++)a+=o+b[e]+i;for(var s=1;s<4;s++)for(a+='</tr><tr class="in">',e=0;e<10;e++)a+=o+b[10*s+e]+i;for(a+='</tr><tr class="bottom">',e=40;e<50;e++)a+=o+b[e]+i;for(a+="</tr>"+r,t.transparentColor&&(a+='<div class="evo-transparent evo-tr-box"></div>'),a+=n[1]+"</th></tr><tr>",e=0;e<10;e++)a+=o+v[e]+i}return a+="</tr></table>"},_paletteHTML2:function(){for(var e='<td style="background-color:#',t=p?'"><div style="width:5px;"></div></td>':'"><span></span></td>',n='<table class="evo-palette2'+f+'"><tr>',o="</tr></table>",i='<div class="evo-palcenter">',r=0,a=y.length;r<a;r++){i+=n;for(var s=y[r],l=0,d=s.length;l<d;l++)i+=e+s[l]+t;i+=o}var c="",i=i+'<div class="evo-sep"></div>'+n;for(l=255;10<l;l-=10)i+=e+u(l)+t,c+=e+u(l-=10)+t;return i+=o+n+c+o+"</div>"},_switchPalette:function(e){if(this._enabled){var t,n,o,i=this.options,r=i.strings.split(",");if(l(e).hasClass("evo-hist")){var a='<table class="evo-palette"><tr><th class="ui-widget-content">'+r[5]+'</th></tr></tr></table><div class="evo-cHist">';if(0===g.length)a+="<p>&nbsp;"+r[6]+"</p>";else for(var s=g.length-1;-1<s;s--)9===g[s].length?i.transparentColor&&(a+='<div class="evo-transparent"></div>'):a+='<div style="background-color:'+g[s]+'"></div>';t=-this._paletteIdx,n=a+="</div>",o=r[4]}else this._paletteIdx<0?(t=-this._paletteIdx,this._palette.find(".evo-hist").show()):t=2==this._paletteIdx?1:2,n=this["_paletteHTML"+t](),o=r[t+1],this._paletteIdx=t;this._paletteIdx=t;e=this._palette.find(".evo-more").prev().html(n).end().children().eq(0).html(o);t<0&&e.next().hide()}},_downOrUpPositioning:function(){for(var e=this.element,t=0;null!==e&&t<100;){if("visible"!=e.css("overflow")){var n=this._palette.offset().top+this._palette.height(),o=e.offset().top+e.height(),i=this._palette.offset().top-this._palette.height()-this.element.outerHeight(),r=e.offset().top;o<n&&r<i?this._palette.css({bottom:this.element.outerHeight()+"px"}):this._palette.css({bottom:"auto"});break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}},showPalette:function(){var t;return this._enabled&&(this._active=!0,l(".colorPicker").not("."+this._id).colorpicker("hidePalette"),null===this._palette&&(this._palette=this.element.next().after(this._paletteHTML()).next().on("click",function(e){return e.stopPropagation(),!1}),this._bindColors(),(t=this)._isPopup&&(this._downOrUpPositioning(),l(document.body).on("click."+t._id,function(e){e.target!=t.element.get(0)&&t.hidePalette()}).on("keyup."+t._id,function(e){27===e.keyCode&&t.hidePalette()})))),this},hidePalette:function(){var e;return this._isPopup&&this._palette&&(l(document.body).off("click."+this._id),(e=this)._palette.off("mouseover click","td,.evo-transparent").fadeOut(function(){e._palette.remove(),e._palette=e._cTxt=null}).find(".evo-more a").off("click")),this},_bindColors:function(){var n=this,e=this.options,t=this._palette.find("div.evo-color"),o=e.history?"td,.evo-cHist>div":"td";e.transparentColor&&(o+=",.evo-transparent"),this._cTxt1=t.eq(0).children().eq(0),this._cTxt2=t.eq(1).children().eq(0),this._palette.on("click",o,function(e){var t;n._enabled&&(t=l(this),n._setValue(t.hasClass("evo-transparent")?m:i(t.attr("style").substring(17))),n._active=!1)}).on("mouseover",o,function(e){var t;n._enabled&&(t=(t=l(this)).hasClass("evo-transparent")?m:i(t.attr("style").substring(17)),n.options.displayIndicator&&n._setColorInd(t,2),n._active&&n.element.trigger("mouseover.color",t))}).find(".evo-more a").on("click",function(){return n._switchPalette(this),!1})},val:function(e){return void 0===e?this.options.color:(this._setValue(e),this)},_setValue:function(e,t){e=e.replace(/ /g,""),this.options.color=e,this._isPopup?(t||this.hidePalette(),this._setBoxColor(this.element.val(e).change().next(),e)):this._setColorInd(e,1),this.options.history&&0<this._paletteIdx&&this._add2History(e),this.element.trigger("change.color",e)},_setColorInd:function(e,t){t=this["_cTxt"+t];this._setBoxColor(t,e),t.next().html(e)},_setBoxColor:function(e,t){t===m?e.addClass("evo-transparent").removeAttr("style"):e.removeClass("evo-transparent").attr("style","background-color:"+t)},_setOption:function(e,t){"color"==e?this._setValue(t,!0):this.options[e]=t},_add2History:function(e){for(var t=g.length,n=0;n<t;n++)if(e==g[n])return;27<t&&g.shift(),g.push(e)},clear:function(){this.hidePalette().val("")},enable:function(){var e=this.element;return this._isPopup?e.removeAttr("disabled"):e.css({opacity:"1","pointer-events":"auto"}),"focus"!==this.options.showOn&&this.element.next().addClass("evo-pointer"),e.removeAttr("aria-disabled"),this._enabled=!0,this},disable:function(){var e=this.element;return this._isPopup?e.attr("disabled","disabled"):(this.hidePalette(),e.css({opacity:"0.3","pointer-events":"none"})),"focus"!==this.options.showOn&&this.element.next().removeClass("evo-pointer"),e.attr("aria-disabled","true"),this._enabled=!1,this},isDisabled:function(){return!this._enabled},destroy:function(){l(document.body).off("click."+this._id),this._palette&&(this._palette.off("mouseover click","td,.evo-cHist>div,.evo-transparent").find(".evo-more a").off("click"),this._isPopup&&this._palette.remove(),this._palette=this._cTxt=null),this._isPopup&&this.element.next().off("click").remove().end().off("focus").unwrap(),this.element.removeClass("colorPicker "+this.id).empty(),l.Widget.prototype.destroy.call(this)}})},{}],13:[function(e,t,n){"use strict";var y=e("is-callable"),m=Object.prototype.toString,w=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){if(!y(t))throw new TypeError("iterator must be a function");var o;if(3<=arguments.length&&(o=n),"[object Array]"===m.call(e))for(var i=e,r=t,a=o,s=0,l=i.length;s<l;s++)w.call(i,s)&&(null==a?r(i[s],s,i):r.call(a,i[s],s,i));else if("string"==typeof e)for(var d=e,c=t,u=o,p=0,f=d.length;p<f;p++)null==u?c(d.charAt(p),p,d):c.call(u,d.charAt(p),p,d);else{var g,h=e,b=t,v=o;for(g in h)w.call(h,g)&&(null==v?b(h[g],g,h):b.call(v,h[g],g,h))}}},{"is-callable":23}],14:[function(e,t,n){"use strict";var l=Array.prototype.slice,d=Object.prototype.toString;t.exports=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==d.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var o,e,i=l.call(arguments,1),r=Math.max(0,n.length-i.length),a=[],s=0;s<r;s++)a.push("$"+s);return o=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){var e;return this instanceof o?(e=n.apply(this,i.concat(l.call(arguments))),Object(e)===e?e:this):n.apply(t,i.concat(l.call(arguments)))}),n.prototype&&((e=function(){}).prototype=n.prototype,o.prototype=new e,e.prototype=null),o}},{}],15:[function(e,t,n){"use strict";e=e("./implementation");t.exports=Function.prototype.bind||e},{"./implementation":14}],16:[function(e,t,n){"use strict";var o,p=SyntaxError,i=Function,f=TypeError,r=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},g=Object.getOwnPropertyDescriptor;if(g)try{g({},"")}catch(e){g=null}function a(){throw new f}function h(e){var t,n;return"%AsyncFunction%"===e?t=r("async function () {}"):"%GeneratorFunction%"===e?t=r("function* () {}"):"%AsyncGeneratorFunction%"===e?t=r("async function* () {}"):"%AsyncGenerator%"===e?(n=h("%AsyncGeneratorFunction%"))&&(t=n.prototype):"%AsyncIteratorPrototype%"===e&&(n=h("%AsyncGenerator%"))&&(t=d(n.prototype)),v[e]=t}var s=g?function(){try{return a}catch(e){try{return g(arguments,"callee").get}catch(e){return a}}}():a,l=e("has-symbols")(),d=Object.getPrototypeOf||function(e){return e.__proto__},b={},c="undefined"==typeof Uint8Array?o:d(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayIteratorPrototype%":l?d([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%BigInt%":"undefined"==typeof BigInt?o:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?o:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?d(d([][Symbol.iterator]())):o,"%JSON%":"object"==typeof JSON?JSON:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?d((new Map)[Symbol.iterator]()):o,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?d((new Set)[Symbol.iterator]()):o,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?d(""[Symbol.iterator]()):o,"%Symbol%":l?Symbol:o,"%SyntaxError%":p,"%ThrowTypeError%":s,"%TypedArray%":c,"%TypeError%":f,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?o:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},l=e("function-bind"),m=e("has"),w=l.call(Function.call,Array.prototype.concat),k=l.call(Function.apply,Array.prototype.splice),x=l.call(Function.call,String.prototype.replace),O=l.call(Function.call,String.prototype.slice),_=l.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g;t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new f("intrinsic name must be a non-empty string");if(1<arguments.length&&"boolean"!=typeof t)throw new f('"allowMissing" argument must be a boolean');if(null===_(/^%?[^%]*%?$/,e))throw new p("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=O(e,0,1),n=O(e,-1);if("%"===t&&"%"!==n)throw new p("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new p("invalid intrinsic syntax, expected opening `%`");var i=[];return x(e,S,function(e,t,n,o){i[i.length]=n?x(o,C,"$1"):t||e}),i}(e),o=0<n.length?n[0]:"",i=function(e,t){var n,o=e;if(m(y,o)&&(o="%"+(n=y[o])[0]+"%"),m(v,o)){var i=v[o];if(void 0!==(i=i===b?h(o):i)||t)return{alias:n,name:o,value:i};throw new f("intrinsic "+e+" exists, but is not available. Please file an issue!")}throw new p("intrinsic "+e+" does not exist!")}("%"+o+"%",t),r=(i.name,i.value),a=!1,i=i.alias;i&&(o=i[0],k(n,w([0,1],i)));for(var s=1,l=!0;s<n.length;s+=1){var d=n[s],c=O(d,0,1),u=O(d,-1);if(('"'===c||"'"===c||"`"===c||'"'===u||"'"===u||"`"===u)&&c!==u)throw new p("property names with quotes must have matching quotes");if("constructor"!==d&&l||(a=!0),m(v,c="%"+(o+="."+d)+"%"))r=v[c];else if(null!=r){if(!(d in r)){if(t)return;throw new f("base intrinsic for "+e+" exists, but the property is not available.")}r=g&&s+1>=n.length?(l=!!(u=g(r,d)))&&"get"in u&&!("originalValue"in u.get)?u.get:r[d]:(l=m(r,d),r[d]),l&&!a&&(v[c]=r)}}return r}},{"function-bind":15,has:20,"has-symbols":17}],17:[function(e,t,n){"use strict";var o="undefined"!=typeof Symbol&&Symbol,i=e("./shams");t.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"==typeof o("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},{"./shams":18}],18:[function(e,t,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"!=typeof Symbol.iterator){var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}}return!0}},{}],19:[function(e,t,n){"use strict";var o=e("has-symbols/shams");t.exports=function(){return o()&&!!Symbol.toStringTag}},{"has-symbols/shams":18}],20:[function(e,t,n){"use strict";e=e("function-bind");t.exports=e.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":15}],21:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var n;t&&(e.super_=t,(n=function(){}).prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e)}},{}],22:[function(e,t,n){"use strict";function o(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===a(e)}function i(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==a(e)&&"[object Function]"===a(e.callee)}var r=e("has-tostringtag/shams")(),a=e("call-bind/callBound")("Object.prototype.toString"),e=function(){return o(arguments)}();o.isLegacyArguments=i,t.exports=e?o:i},{"call-bind/callBound":8,"has-tostringtag/shams":19}],23:[function(e,t,n){"use strict";var o,i,r=Function.prototype.toString,a="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof a&&"function"==typeof Object.defineProperty)try{o=Object.defineProperty({},"length",{get:function(){throw i}}),i={},a(function(){throw 42},null,o)}catch(e){e!==i&&(a=null)}else a=null;function s(e){try{var t=r.call(e);return d.test(t)}catch(e){return}}function l(e){try{return s(e)?!1:(r.call(e),!0)}catch(e){return!1}}var d=/^\s*class\b/,c=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,p=!(0 in[,]),f=function(){return!1};"object"==typeof document&&c.call(document.all)===c.call(document.all)&&(f=function(e){if(!(!p&&e||void 0!==e&&"object"!=typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1}),t.exports=a?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{a(e,null,o)}catch(e){if(e!==i)return!1}return!s(e)&&l(e)}:function(e){var t;return!!f(e)||!!e&&(("function"==typeof e||"object"==typeof e)&&(u?l(e):!s(e)&&(!("[object Function]"!==(t=c.call(e))&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&l(e))))}},{}],24:[function(e,t,n){"use strict";var o,i=Object.prototype.toString,r=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=e("has-tostringtag/shams")(),l=Object.getPrototypeOf;t.exports=function(e){var t;return"function"==typeof e&&(!!a.test(r.call(e))||(s?!!l&&(void 0===o&&(t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}(),o=!!t&&l(t)),l(e)===o):"[object GeneratorFunction]"===i.call(e)))}},{"has-tostringtag/shams":19}],25:[function(f,g,e){!function(p){!function(){"use strict";var t=f("for-each"),e=f("available-typed-arrays"),n=f("call-bind/callBound"),i=n("Object.prototype.toString"),r=f("has-tostringtag/shams")(),o="undefined"==typeof globalThis?p:globalThis,a=e(),s=n("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},l=n("String.prototype.slice"),d={},c=f("es-abstract/helpers/getOwnPropertyDescriptor"),u=Object.getPrototypeOf;r&&c&&u&&t(a,function(e){var t,n=new o[e];Symbol.toStringTag in n&&(n=u(n),(t=c(n,Symbol.toStringTag))||(n=u(n),t=c(n,Symbol.toStringTag)),d[e]=t.get)});g.exports=function(e){var n,o;return!(!e||"object"!=typeof e)&&(r&&Symbol.toStringTag in e?!!c&&(n=e,o=!1,t(d,function(e,t){if(!o)try{o=e.call(n)===t}catch(e){}}),o):(e=l(i(e),8,-1),-1<s(a,e)))}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":7,"call-bind/callBound":8,"es-abstract/helpers/getOwnPropertyDescriptor":11,"for-each":13,"has-tostringtag/shams":19}],26:[function(e,s,l){!function(e){"use strict";function v(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n}function t(e){var t,n,o=0;for(n in e)(t=n.length)>o&&e.hasOwnProperty(n)&&(o=t);return o}function y(e){return $[e]||0}function m(e,t,n){return{type:"||"===e||"&&"===e?r:i,operator:e,left:t,right:n}}function w(e){return 48<=e&&e<=57}function k(e){return 65<=e&&e<=90||97<=e&&e<=122||128<=e&&!$[String.fromCharCode(e)]||a.hasOwnProperty(String.fromCharCode(e))}function x(e){return 65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||128<=e&&!$[String.fromCharCode(e)]||a.hasOwnProperty(String.fromCharCode(e))}function n(a){for(var e,c=0,t=a.charAt,n=a.charCodeAt,s=function(e){return t.call(a,e)},l=function(e){return n.call(a,e)},d=a.length,u=function(){for(var e=l(c);32===e||9===e||10===e||13===e;)e=l(++c)},p=function(){var e,t,n=function(){var e,t,n,o,i,r,a,s,l,d,a=g(),n=f();if(!n)return a;if(r={value:n,prec:y(n)},!(s=g()))v("Expected expression after "+n,c);i=[a,r,s];while(n=f()){o=y(n);if(o===0)break;r={value:n,prec:o};d=n;while(i.length>2&&o<=i[i.length-2].prec){s=i.pop();n=i.pop().value;a=i.pop();t=m(n,a,s);i.push(t)}t=g();if(!t)v("Expected expression after "+d,c);i.push(r,t)}t=i[l=i.length-1];while(l>1){t=m(i[l-1].value,i[l-2],t);l-=2}return t}();return u(),63!==l(c)?n:(c++,(e=p())||v("Expected expression",c),u(),58===l(c)?(c++,(t=p())||v("Expected expression",c),{type:"ConditionalExpression",test:n,consequent:e,alternate:t}):void v("Expected :",c))},f=function(){u();for(var e=a.substr(c,I),t=e.length;0<t;){if($.hasOwnProperty(e)&&(!k(l(c))||c+e.length<a.length&&!x(l(c+e.length))))return c+=t,e;e=e.substr(0,--t)}return!1},g=function(){var e,t,n,o;if(u(),e=l(c),w(e)||46===e){var i,r="";while(w(l(c)))r+=s(c++);if(l(c)===C){r+=s(c++);while(w(l(c)))r+=s(c++)}if((i=s(c))==="e"||i==="E"){r+=s(c++);i=s(c);if(i==="+"||i==="-")r+=s(c++);while(w(l(c)))r+=s(c++);if(!w(l(c-1)))v("Expected exponent ("+r+s(c)+")",c)}if(i=l(c),k(i))v("Variable names cannot start with a number ("+r+s(c)+")",c);else if(i===C)v("Unexpected period",c);return{type:S,value:parseFloat(r),raw:r}}if(39===e||34===e)o=function(){var e="",t=s(c++),n=false,o;while(c<d){o=s(c++);if(o===t){n=true;break}else if(o==="\\"){o=s(c++);switch(o){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=o}}else e+=o}if(!n)v('Unclosed quote after "'+e+'"',c);return{type:S,value:e,raw:t+e+t}}();else if(91===e)c++,o={type:"ArrayExpression",elements:b(93)};else{for(n=(t=a.substr(c,T)).length;0<n;){if(A.hasOwnProperty(t)&&(!k(l(c))||c+t.length<a.length&&!x(l(c+t.length))))return c+=n,{type:"UnaryExpression",operator:t,argument:g(),prefix:!0};t=t.substr(0,--n)}k(e)?o=h():40===e&&(o=function(){c++;var e=p();if(u(),l(c)===j){c++;return e}else v("Unclosed (",c)}())}if(!o)return!1;for(u(),e=l(c);46===e||91===e||40===e;)c++,46===e?(u(),o={type:_,computed:!1,object:o,property:h()}):91===e?(o={type:_,computed:!0,object:o,property:p()},u(),93!==(e=l(c))&&v("Unclosed [",c),c++):40===e&&(o={type:"CallExpression",arguments:b(41),callee:o}),u(),e=l(c);return o},h=function(){var e=l(c),t=c;for(k(e)?c++:v("Unexpected "+s(c),c);c<d&&(e=l(c),x(e));)c++;return t=a.slice(t,c),E.hasOwnProperty(t)?{type:S,value:E[t],raw:t}:"this"===t?{type:"ThisExpression"}:{type:"Identifier",name:t}},b=function(e){for(var t,n=[],o=!1,i=0;c<d;){if(u(),(t=l(c))===e){o=!0,c++,41===e&&i&&n.length<=i&&v("Unexpected token "+String.fromCharCode(e),c);break}if(44===t){if(c++,++i!==n.length)if(41===e)v("Unexpected token ,",c);else if(93===e)for(var r=n.length;r<i;r++)n.push(null)}else(t=p())&&t.type!==O||v("Expected comma",c),n.push(t)}return o||v("Expected "+String.fromCharCode(e),c),n},o=[];c<d;)59===(e=l(c))||44===e?c++:(e=p())?o.push(e):c<d&&v('Unexpected "'+s(c)+'"',c);return 1===o.length?o[0]:{type:O,body:o}}var o,O="Compound",_="MemberExpression",S="Literal",i="BinaryExpression",r="LogicalExpression",C=46,j=41,A={"-":!0,"!":!0,"~":!0,"+":!0},$={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},a={$:!0,_:!0},T=t(A),I=t($),E={true:!0,false:!1,null:null};n.version="0.4.0",n.toString=function(){return"JavaScript Expression Parser (JSEP) v"+n.version},n.addUnaryOp=function(e){return T=Math.max(e.length,T),A[e]=!0,this},n.addBinaryOp=function(e,t){return I=Math.max(e.length,I),$[e]=t,this},n.addIdentifierChar=function(e){return a[e]=!0,this},n.addLiteral=function(e,t){return E[e]=t,this},n.removeUnaryOp=function(e){return delete A[e],e.length===T&&(T=t(A)),this},n.removeAllUnaryOps=function(){return A={},T=0,this},n.removeIdentifierChar=function(e){return delete a[e],this},n.removeBinaryOp=function(e){return delete $[e],e.length===I&&(I=t($)),this},n.removeAllBinaryOps=function(){return $={},I=0,this},n.removeLiteral=function(e){return delete E[e],this},n.removeAllLiterals=function(){return E={},this},void 0===l?(o=e.jsep,(e.jsep=n).noConflict=function(){return e.jsep===n&&(e.jsep=o),n}):void 0!==s&&s.exports?l=s.exports=n:l.parse=n}(this)},{}],27:[function(e,t,n){"use strict";var _=e("./utils"),l=e("./numbers");t.exports=function(x){function o(p,e,w){w=w||{};var t,e=_.parseCSS(e),f=[],g="style",k={};function n(e,t){if(e.name){var n=e.name.toUpperCase();if(-1<x[t+"Elements"].indexOf(n))for(var o in e.styleProps)if(e.styleProps[o].prop===t){var i,o=e.styleProps[o].value;if((o=w.preserveImportant?O(o):o).match(/px/))return i=o.replace("px",""),void p(e).attr(t,i);if(-1<x.tableElements.indexOf(n)&&o.match(/\%/))return void p(e).attr(t,o)}}}w.styleAttributeName&&(g=w.styleAttributeName),e.forEach(function(e){var t=e[0],o=e[1],i=new _.Selector(t),n=i.parsed();if(n){for(var r,a,s=function(e){if(0!==e.length){var t=e[e.length-1].pseudos;if(t)for(var n=0;n<t.length;n++)if(h(t[n]))return t[n].name}}(n),l=0;l<n.length;++l){var d=n[l];if(d.pseudos)for(var c=0;c<d.pseudos.length;++c){var u=d.pseudos[c];if(0<=x.ignoredPseudos.indexOf(u.name))return}}s&&(e=n[n.length-1],r=e.pseudos,e.pseudos=function(e){return e.filter(function(e){return!h(e)})}(e.pseudos),t=n.toString(),e.pseudos=r);try{a=p(t)}catch(e){return}a.each(function(){var e,t,m=this;function n(e,t){for(var n=0,o=e.length;n<o;n++)if("property"==e[n].type){var i=e[n].name,r=e[n].value;if("counter-reset"===i){u=c=d=l=s=a=void 0;for(var a=m,s=r,l=s.split(/\s+/),d=0;d<l.length;d++){var c=l[d],u=parseInt(l[d+1],10);isNaN(u)?a.counterProps[c]=k[c]=0:a.counterProps[c]=k[l[d++]]=u}}if("counter-increment"===i){h=b=g=f=s=p=void 0;for(var p=m,s=r,f=s.split(/\s+/),g=0;g<f.length;g++){var h,b=f[g];void 0!==p.counterProps[b]&&(h=parseInt(f[g+1],10),isNaN(h)?p.counterProps[b]=k[b]+=1:p.counterProps[b]=k[f[g++]]+=h)}}var v=null!==r.match(/!important$/),y=(v&&!w.preserveImportant&&(r=O(r)),[e[n].position.start.line,e[n].position.start.col]),r=new _.Property(i,r,t,v?2:0,y),v=m.styleProps[i];x.excludedProperties.indexOf(i)<0&&(v&&v.compare(r)===r||!v)&&(v&&v.selector!==t?delete m.styleProps[i]:v&&(r.nextProp=v),m.styleProps[i]=r)}}m.name&&0<=x.nonVisualElements.indexOf(m.name.toUpperCase())||(s&&((e=m[t="pseudo"+s])||((e=m[t]=p("<span />").get(0)).pseudoElementType=s,e.pseudoElementParent=m,e.counterProps=m.counterProps,m[t]=e),m=e),m.styleProps||(m.styleProps={},p(m).attr(g)&&(t="* { "+p(m).attr(g)+" } ",n(_.parseCSS(t)[0][1],new _.Selector("<style>",!0))),f.push(m)),m.counterProps||(m.counterProps=m.parent&&m.parent.counterProps?Object.create(m.parent.counterProps):{}),n(o,i))})}}),f.forEach(function(n){Object.keys(n.styleProps).length;var o=[],e=(Object.keys(n.styleProps).forEach(function(e){for(var t=n.styleProps[e];void 0!==t;)o.push(t),t=t.nextProp}),o.sort(function(e,t){return e.compareFunc(t)}),o.filter(function(e){return"content"!==e.prop}).map(function(e){return e.prop+": "+e.value.replace(/["]/g,"'")+";"}).join(" "));e&&p(n).attr(g,e)}),w.inlinePseudoElements&&f.forEach(function(e){{var t;e.pseudoElementType&&e.styleProps.content&&((t=function(e){var t=e.styleProps.content.value;if("none"===t||"normal"===t)return"";var n=t.match(/^\s*url\s*\(\s*(.*?)\s*\)\s*$/i);if(n)return{img:n[1].replace(/^['"]|['"]$/g,"")};for(var o=[],i=t.split(/['"]/),r=0;r<i.length;r++){var a,s;""!==i[r]&&((s=i[r].match(/var\s*\(\s*(.*?)\s*(,\s*(.*?)\s*)?\s*\)/i))?(s=function(e,t){for(;e;){if(t in e.styleProps)return e.styleProps[t].value;e=e.pseudoElementParent||e.parent}}(e,s[1])||s[2],o.push(s.replace(/^['"]|['"]$/g,""))):(s=i[r].match(/counter\s*\(\s*(.*?)\s*(,\s*(.*?)\s*)?\s*\)/i))&&s[1]in e.counterProps?(a=e.counterProps[s[1]],o.push(function(e,t){switch(t){case"lower-roman":return l.romanize(e).toLowerCase();case"upper-roman":return l.romanize(e);case"lower-latin":case"lower-alpha":return l.alphanumeric(e).toLowerCase();case"upper-latin":case"upper-alpha":return l.alphanumeric(e);default:return e.toString()}}(a,s[3]))):(a=i[r].match(/attr\s*\(\s*(.*?)\s*\)/i))?(s=a[1],o.push((e.pseudoElementParent||e).attribs[s])):o.push(i[r]))}return t=(t=o.join("")).replace(/\\/g,"")}(e)).img?(e.name="img",p(e).attr("src",t.img)):p(e).text(t),t=e.pseudoElementParent,"before"===e.pseudoElementType?p(t).prepend(e):p(t).append(e))}}),w.applyWidthAttributes&&f.forEach(function(e){n(e,"width")}),w.applyHeightAttributes&&f.forEach(function(e){n(e,"height")}),w.applyAttributesTableElements&&f.forEach(function(e){if(e.name){var t,n=e.name.toUpperCase(),o=Object.keys(x.styleToAttribute);if(-1<x.tableElements.indexOf(n))for(var i in e.styleProps)-1<o.indexOf(e.styleProps[i].prop)&&(t=x.styleToAttribute[e.styleProps[i].prop],i=e.styleProps[i].value,w.preserveImportant&&(i=O(i)),"background"===t&&(i=function(e){return 0!==e.indexOf("url(")?e:e.replace(/^url\((["'])?([^"']+)\1\)$/,"$2")}(i)),/(linear|radial)-gradient\(/i.test(i)||p(e).attr(t,i))}}),w.insertPreservedExtraCss&&w.extraCss&&((e=_.getPreservedText(w.extraCss,{mediaQueries:w.preserveMediaQueries,fontFaces:w.preserveFontFaces,keyFrames:w.preserveKeyFrames}))&&(!(t=null)!==w.insertPreservedExtraCss?t=p(w.insertPreservedExtraCss):(t=(t=p("head")).length?t:p("body")).length||(t=p.root()),t.first().append("<style>"+e+"</style>")))}function O(e){return e.replace(/\s*!important$/,"")}function h(e){return"before"===e.name||"after"===e.name}return x.ignoredPseudos=["hover","active","focus","visited","link"],x.widthElements=["TABLE","TD","TH","IMG"],x.heightElements=["TABLE","TD","TH","IMG"],x.tableElements=["TABLE","TH","TR","TD","CAPTION","COLGROUP","COL","THEAD","TBODY","TFOOT"],x.nonVisualElements=["HEAD","TITLE","BASE","LINK","STYLE","META","SCRIPT","NOSCRIPT"],x.styleToAttribute={"background-color":"bgcolor","background-image":"background","text-align":"align","vertical-align":"valign"},x.excludedProperties=[],x.juiceDocument=function(e,t){t=_.getDefaultOptions(t);var n=function(e,t){return function(n,o){var i,r,a=[];return n("style").each(function(){var e,t=!!(r=this).childNodes;1!==(i=t?r.childNodes:r.children).length?o.removeStyleTags&&n(r).remove():(i=i[0].data,o.applyStyleTags&&void 0===n(r).attr("data-embed")&&a.push(i),o.removeStyleTags&&void 0===n(r).attr("data-embed")&&(e=t?r.childNodes[0].nodeValue:r.children[0].data,(e=_.getPreservedText(e,{mediaQueries:o.preserveMediaQueries,fontFaces:o.preserveFontFaces,keyFrames:o.preserveKeyFrames,pseudos:o.preservePseudos},x.ignoredPseudos))?t?r.childNodes[0].nodeValue=e:r.children[0].data=e:n(r).remove()),n(r).removeAttr("data-embed"))}),a}(e,t).join("\n")}(e,t);return n+="\n"+t.extraCss,o(e,n,t),e},x.inlineDocument=o,x}},{"./numbers":28,"./utils":31}],28:[function(e,t,n){"use strict";n.romanize=function(e){if(isNaN(e))return NaN;for(var t=String(+e).split(""),n=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],o="",i=3;i--;)o=(n[+t.pop()+10*i]||"")+o;return Array(+t.join("")+1).join("M")+o},n.alphanumeric=function(e){for(var t,n="";0<e;)t=(e-1)%26,n=String.fromCharCode(65+t)+n,e=(e-t)/26|0;return n||void 0}},{}],29:[function(e,t,n){"use strict";t.exports=i;var o=e("./utils");function i(e,t,n,o,i){this.prop=e,this.value=t,this.selector=n,this.priority=o||0,this.additionalPriority=i||[]}i.prototype.compareFunc=function(e){var t=[],n=(t.push.apply(t,this.selector.specificity()),t.push.apply(t,this.additionalPriority),t[0]+=this.priority,[]);return n.push.apply(n,e.selector.specificity()),n.push.apply(n,e.additionalPriority),n[0]+=e.priority,o.compareFunc(t,n)},i.prototype.compare=function(e){return 1===this.compareFunc(e)?this:e},i.prototype.toString=function(){return this.prop+": "+this.value.replace(/['"]+/g,"")+";"}},{"./utils":31}],30:[function(e,t,n){"use strict";var o=e("slick/parser");function i(e,t){this.text=e,this.spec=void 0,this.styleAttribute=t||!1}function g(e){try{return o(e)[0]}catch(e){return[]}}(t.exports=i).prototype.parsed=function(){return this.tokens||(this.tokens=g(this.text)),this.tokens},i.prototype.specificity=function(){var f=this.styleAttribute;return this.spec||(this.spec=function e(t,n){var o=n||g(t);var i=[f?1:0,0,0,0];var r=[];for(var a=0;a<o.length;a++){var s=o[a],l=s.pseudos;if(s.id&&i[1]++,s.attributes&&(i[2]+=s.attributes.length),s.classList&&(i[2]+=s.classList.length),s.tag&&"*"!==s.tag&&i[3]++,l){i[3]+=l.length;for(var d=0;d<l.length;d++)"not"===l[d].name&&(r.push(l[d].value),i[3]--)}}for(var c=r.length;c--;)for(var u=e(r[c]),p=4;p--;)i[p]+=u[p];return i}(this.text,this.parsed())),this.spec}},{"slick/parser":41}],31:[function(e,t,n){"use strict";var d=e("mensch"),o=e("./selector"),e=e("./property");n.Selector=o,n.Property=e,n.extract=function(e){for(var t=0,n=[],o="",i=0,r=e.length;i<r;i++){var a=e.charAt(i);t?("]"!==a&&")"!==a||t--,o+=a):","===a?(n.push(o),o=""):("["!==a&&"("!==a||t++,(o.length||","!==a&&"\n"!==a&&" "!==a)&&(o+=a))}return o.length&&n.push(o),n},n.parseCSS=function(e){for(var e=d.parse(e,{position:!0,comments:!0}),t=void 0!==e.stylesheet&&e.stylesheet.rules?e.stylesheet.rules:[],n=[],o=0,i=t.length;o<i;o++)if("rule"==t[o].type)for(var r=t[o],a=r.selectors,s=0,l=a.length;s<l;s++)n.push([a[s],r.declarations]);return n},n.getPreservedText=function(e,t,n){for(var e=d.parse(e,{position:!0,comments:!0}),o=void 0!==e.stylesheet&&e.stylesheet.rules?e.stylesheet.rules:[],i=[],r=o.length-1;0<=r;r--)(t.fontFaces&&"font-face"===o[r].type||t.mediaQueries&&"media"===o[r].type||t.keyFrames&&"keyframes"===o[r].type||t.pseudos&&o[r].selectors&&this.matchesPseudo(o[r].selectors[0],n))&&i.unshift(d.stringify({stylesheet:{rules:[o[r]]}},{comments:!1,indentation:"  "})),o[r].position.start;return 0!==i.length&&"\n"+i.join("\n")+"\n"},n.normalizeLineEndings=function(e){return e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")},n.matchesPseudo=function(t,e){return e.find(function(e){return-1<t.indexOf(e)})},n.compareFunc=function(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e[o]!==t[o])return e[o]>t[o]?1:-1;return e.length-t.length},n.compare=function(e,t){return 1==n.compareFunc(e,t)?e:t},n.getDefaultOptions=function(e){e=Object.assign({extraCss:"",insertPreservedExtraCss:!0,applyStyleTags:!0,removeStyleTags:!0,preserveMediaQueries:!0,preserveFontFaces:!0,preserveKeyFrames:!0,preservePseudos:!0,applyWidthAttributes:!0,applyHeightAttributes:!0,applyAttributesTableElements:!0,url:""},e);return e.webResources=e.webResources||{},e}},{"./property":29,"./selector":30,mensch:34}],32:[function(i,r,a){!function(o){!function(){var e,t,n;e=function(g,h){function r(e,t){g.utils.arrayForEach(e,function(e){1===e.nodeType&&(_(e,v,t),_(e,w,O(e.parentNode,m)))})}function c(e,t){var n,o={},i={};return g.utils.peekObservable(e()).data?(i=x(e()||{}),o[t]=i.data,i.hasOwnProperty("template")&&(o.name=i.template)):o[t]=e(),g.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(e){i.hasOwnProperty(e)?o[e]=i[e]:g.bindingHandlers.sortable.hasOwnProperty(e)&&(o[e]=g.bindingHandlers.sortable[e])}),"foreach"===t&&(o.afterRender?(n=o.afterRender,o.afterRender=function(e,t){r.call(t,e,t),n.call(t,e,t)}):o.afterRender=r),o}function b(e,t){var n=x(t);if(n)for(var o=0;o<=e;o++)n[o]&&x(n[o]._destroy)&&e++;return e}var v="ko_sortItem",y="ko_sourceIndex",m="ko_sortList",w="ko_parentList",k="ko_dragItem",x=g.utils.unwrapObservable,O=g.utils.domData.get,_=g.utils.domData.set,e=h.ui&&h.ui.version,S=e&&e.indexOf("1.6.")&&e.indexOf("1.7.")&&(e.indexOf("1.8.")||"1.8.24"===e);g.bindingHandlers.sortable={init:function(t,e,n,o,i){var r,u,a,s=h(t),l=x(e())||{},p=c(e,"foreach"),f={},d=(a=t,(e=p.name)?(e=document.getElementById(e))&&(e=new g.templateSources.domElement(e)).text(h.trim(e.text())):h(a).contents().each(function(){this&&1!==this.nodeType&&a.removeChild(this)}),h.extend(!0,f,g.bindingHandlers.sortable),l.options&&f.options&&(g.utils.extend(f.options,l.options),delete l.options),g.utils.extend(f,l),f.connectClass&&(g.isObservable(f.allowDrop)||"function"==typeof f.allowDrop)?g.computed({read:function(){var e=x(f.allowDrop),e="function"==typeof e?e.call(this,p.foreach):e;g.utils.toggleDomNodeCssClass(t,f.connectClass,e)},disposeWhenNodeIsRemoved:t},this):g.utils.toggleDomNodeCssClass(t,f.connectClass,f.allowDrop),g.bindingHandlers.template.init(t,function(){return p},n,o,i),r=f.options.start,u=f.options.update,f.options.helper||(f.options.helper=function(e,t){return t.is("tr")&&t.children().each(function(){h(this).width(h(this).width())}),t}),setTimeout(function(){var c,n=f.options.receive;s.sortable(g.utils.extend(f.options,{start:function(e,t){var n=t.item[0];_(n,y,g.utils.arrayIndexOf(t.item.parent().children(),n)),t.item.find("input:focus").change(),r&&r.apply(this,arguments)},receive:function(e,t){"function"==typeof n&&n.call(this,e,t),(c=O(t.item[0],k))&&(c.clone&&(c=c.clone()),f.dragged&&(c=f.dragged.call(this,c,e,t)||c))},update:function(e,t){var n,o,i,r,a,s=t.item[0],l=t.item.parent()[0],d=O(s,v)||c;if(d||h(s).remove(),c=null,d&&this===l||!S&&h.contains(this,l)){if(l=O(s,w),o=O(s,y),n=O(s.parentNode,m),i=g.utils.arrayIndexOf(t.item.parent().children(),s),p.includeDestroyed||(o=b(o,l),i=b(i,n)),(f.beforeMove||f.afterMove)&&(r={item:d,sourceParent:l,sourceParentNode:l&&t.sender||s.parentNode,sourceIndex:o,targetParent:n,targetIndex:i,cancelDrop:!1},f.beforeMove&&f.beforeMove.call(this,r,e,t)),l?h(l!==n&&t.sender||this).sortable("cancel"):h(s).remove(),r&&r.cancelDrop)return;f.hasOwnProperty("strategyMove")&&!1!==f.strategyMove?0<=i&&(l?l!==n?(l.splice(o,1),n.splice(i,0,d),_(s,v,null),t.item.remove()):(a=x(l),l.valueWillMutate&&l.valueWillMutate(),a.splice(o,1),a.splice(i,0,d),l.valueHasMutated&&l.valueHasMutated()):(n.splice(i,0,d),_(s,v,null),t.item.remove())):(0<=i&&(l&&(l.splice(o,1),g.processAllDeferredBindingUpdates&&g.processAllDeferredBindingUpdates(),g.options&&g.options.deferUpdates&&g.tasks.runEarly()),n.splice(i,0,d)),_(s,v,null)),g.processAllDeferredBindingUpdates&&g.processAllDeferredBindingUpdates(),f.afterMove&&f.afterMove.call(this,r,e,t)}u&&u.apply(this,arguments)},connectWith:!!f.connectClass&&"."+f.connectClass})),void 0!==f.isEnabled&&g.computed({read:function(){s.sortable(x(f.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:t})},0));return g.utils.domNodeDisposal.addDisposeCallback(t,function(){(s.data("ui-sortable")||s.data("sortable"))&&s.sortable("destroy"),g.utils.toggleDomNodeCssClass(t,f.connectClass,!1),clearTimeout(d)}),{controlsDescendantBindings:!0}},update:function(e,t,n,o,i){var r=c(t,"foreach");_(e,m,r.foreach),g.bindingHandlers.template.update(e,function(){return r},n,o,i)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},g.bindingHandlers.draggable={init:function(t,e,n,o,i){var r=(d=x(e())||{}).options||{},a=g.utils.extend({},g.bindingHandlers.draggable.options),s=c(e,"data"),e=d.connectClass||g.bindingHandlers.draggable.connectClass,l=(void 0!==d.isEnabled?d:g.bindingHandlers.draggable).isEnabled,d="data"in d?d.data:d;return _(t,k,d),g.utils.extend(a,r),a.connectToSortable=!!e&&"."+e,h(t).draggable(a),void 0!==l&&g.computed({read:function(){h(t).draggable(x(l)?"enable":"disable")},disposeWhenNodeIsRemoved:t}),g.utils.domNodeDisposal.addDisposeCallback(t,function(){var e=h(t);(e.data("ui-draggable")||e.data("draggable"))&&e.draggable("destroy")}),g.bindingHandlers.template.init(t,function(){return s},n,o,i)},update:function(e,t,n,o,i){var r=c(t,"data");return g.bindingHandlers.template.update(e,function(){return r},n,o,i)},connectClass:g.bindingHandlers.sortable.connectClass,options:{helper:"clone"}},g.bindingHandlers.droppable={init:function(t,e,n,o,i){var r=x(e())||{},a=r.options||{},s=g.utils.extend({},g.bindingHandlers.droppable.options),l=(void 0!==r.isEnabled?r:g.bindingHandlers.droppable).isEnabled;g.utils.extend(s,a),r="data"in r?r.data:e(),s.drop=function(e,t){t=O(t.draggable[0],k)||O(t.draggable[0],v);r(t)},h(t).droppable(s),void 0!==l&&g.computed({read:function(){h(t).droppable(x(l)?"enable":"disable")},disposeWhenNodeIsRemoved:t}),g.utils.domNodeDisposal.addDisposeCallback(t,function(){var e=h(t);(e.data("ui-droppable")||e.data("droppable"))&&e.droppable("destroy")})},options:{accept:"*"}}},"function"==typeof i&&"object"==typeof a&&"object"==typeof r?(t="undefined"!=typeof window?window.ko:void 0!==o?o.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null,"undefined"!=typeof window?window.jQuery.ui.sortable:void 0!==o&&o.jQuery.ui.sortable,"undefined"!=typeof window?window.jQuery.ui.draggable:void 0!==o&&o.jQuery.ui.draggable,"undefined"!=typeof window?window.jQuery.ui.droppable:void 0!==o&&o.jQuery.ui.droppable,e(t,n)):e(window.ko,window.jQuery)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(t,n,o){!function(e){!function(){(function(w){w.subscribable.fn.watch=function(e,t,n,o){var i=typeof e;return"boolean"==i||"undefined"==i?w.watch(this,{enabled:!1!==e}):"function"!=i||w.isSubscribable(e)?w.watch(e,t,n,o||this):w.watch(this,t||{},e,o||this),this},w.watch=function(g,h,b,v){function y(o,e,t,i,r,n){if(o&&0!==h.depth&&(-1===h.depth||t.length<(h.depth||1))&&(!h.watchedOnly||o.watchable||o==g)&&(!1!==h.enabled&&!0!==h.enabled||(o.watchable=h.enabled),!1!==o.watchable)){!0===h.seal&&(o.watchable=!1);var a=typeof o;if(!("object"!=a&&"function"!=a||o._watcher===v||h.hide&&-1<w.utils.arrayIndexOf(h.hide,o))){var s=[].concat(t,e&&e!==g?e:[]);if("function"!=a){if("[object Object]"===Object.prototype.toString.call(o))w.utils.objectForEach(o,function(e,t){var n;(t=h.getter?h.getter.call(v,s,o,e):t)&&(!h.wrap||"[object Function]"===(n=Object.prototype.toString.call(t))||"[object Object]"===n||h.beforeWrap&&!1===h.beforeWrap.call(v,s,o,t)||(t=o[e]="[object Array]"===n?w.observableArray(t):w.observable(t)),h.unloop&&(t._watcher=i?void 0:v),n=y(t,r?null:o,s,i,null,e),h.tagFields&&void 0===t._fieldName&&(n||"parentsOnly"!==h.tagFields&&"function"==typeof t||"object"==typeof t)&&(t._fieldName=e))});else if(!0!==h.hideArrays)for(var l=0;l<o.length;l++)y(o[l],r?null:o,s,i);return!0}if("function"==typeof o.notifySubscribers&&b)if(!0!==h.enabled||!1!==o.watchable)if(i||!h.beforeWatch||!1!==h.beforeWatch.call(v,s,o,n)){if(t="function"==typeof o.pop,i){var d=o[m];if(!d)throw"Subscriptions field (."+m+") not defined for observable child "+(o._fieldName||"");if(d.change)for(var c=d.change.length-1;0<=c;c--)d.change[c]._watcher===v&&d.change[c].dispose();if(d.beforeChange&&(h.mutable||0<h.oldValues))for(c=d.beforeChange.length-1;0<=c;c--)d.beforeChange[c]._watcher===v&&d.beforeChange[c].dispose();if(d.arrayChange)for(c=d.arrayChange.length-1;0<=c;c--)d.arrayChange[c]._watcher===v&&d.arrayChange[c].dispose()}else u=o,p=s,f=r,t?u.subscribe(function(e){var t;!1===h.splitArrayChanges&&void 0!==(t=b.call(v,p,u,e))&&v(t),w.utils.arrayForEach(e,function(e){var t;!1!==h.splitArrayChanges&&void 0!==(t=b.call(v,p,u,e))&&v(t),e.moved||(!1===h.async?y(e.value,f?null:u,p,"deleted"===e.status):setTimeout(function(){y(e.value,f?null:u,p,"deleted"===e.status)}))})},void 0,"arrayChange")._watcher=v:(u.subscribe(function(){var e;!1!==u.watchable&&(void 0!==(e=b.call(v,p,u))&&v(e),h.mutable&&"object"==typeof u()&&(!1===h.async?y(u(),f?null:u,p,!1,!0):setTimeout(function(){y(u(),f?null:u,p,!1,!0)})))},null,"change")._watcher=v,(0<h.oldValues||h.mutable)&&(u.subscribe(function(e){if(0<h.oldValues){var t=u.oldValues||(u.oldValues=[]);for(t.unshift(e);t.length>h.oldValues;)t.pop()}h.mutable&&"object"==typeof e&&y(e,f?null:u,p,!0,!0)},null,"beforeChange")._watcher=v));return t?(y(o(),r?null:o,s,i,!0),!0):!0!==h.hideWrappedValues?y(o(),r?null:o,s,i,!0):void 0}}}var u,p,f}var m;switch("function"==typeof h&&(v=v||b,b=h,h={}),v=v||this,"function"==typeof w.subscription||w.version){case!0:m="_subscriptions";break;case"3.0.0":m="F";break;case"3.1.0":m="H";break;case"3.2.0":m="M";break;case"3.3.0":m="G";break;case"3.4.0":case"3.4.1":m="K";break;case"3.4.2":m="F";break;case"3.5.0":m="S";break;case"3.5.1":m="U";break;default:throw"Unsupported Knockout version. Only v3.0.0 to v3.5.1 finals are supported when minified. Current version is "+w.version}return"function"!=typeof g||w.isSubscribable(g)?(y(g,null,[]),{dispose:function(){y(g,null,[],!0)}}):w.computed(g,b,h)}})("function"!=typeof t||"object"!=typeof o||"object"!=typeof n||"undefined"!=typeof window?window.ko:void 0!==e?e.ko:null),window.foo="1.4.2"}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,n){t.exports={lex:e("./lib/lexer"),parse:e("./lib/parser"),stringify:e("./lib/stringify")}},{"./lib/lexer":36,"./lib/parser":37,"./lib/stringify":38}],35:[function(e,t,n){!function(n){!function(){t.exports=function(e){return function(e){var t=[].slice.call(arguments,1);t.unshift("["+e+"]"),n.stderr.write(t.join(" ")+"\n")}.bind(null,e)}}.call(this)}.call(this,e("_process"))},{_process:40}],36:[function(e,t,n){e("./debug")("lex");t.exports=function(n){var e,t,o,i="",r=0,a=-1,s=0,l=1,d="before-selector",c=[d],u={},p=[],f=["media","keyframes",{name:"-webkit-keyframes",type:"keyframes",prefix:"-webkit-"},{name:"-moz-keyframes",type:"keyframes",prefix:"-moz-"},{name:"-ms-keyframes",type:"keyframes",prefix:"-ms-"},{name:"-o-keyframes",type:"keyframes",prefix:"-o-"},"font-face",{name:"import",state:"before-at-value"},{name:"charset",state:"before-at-value"},"supports","viewport",{name:"namespace",state:"before-at-value"},"document",{name:"-moz-document",type:"document",prefix:"-moz-"},"page"];function g(e){return e?c[c.length-1-e]:d}function h(e){return e===b(1)}function b(e){return n[a+(e||1)]}function v(){c.pop();d=c[c.length-1]}function y(e){d=e,c.push(d),c.length}function m(e){c[c.length-1]=d=e}function w(e){var t;1==(e||1)?("\n"==n[a]?(l++,r=1):r++,a++):(1<(t=n.slice(a,a+e).split("\n")).length&&(l+=t.length-1,r=1),r+=t[t.length-1].length,a+=e)}function k(){u.end={line:l,col:r},p.push(u),i="",u={}}function x(e){u={type:e,start:{line:l,col:r}}}for(;w(),e=n[a];)switch(e){case" ":switch(g()){case"selector":case"value":case"value-paren":case"at-group":case"at-value":case"comment":case"double-string":case"single-string":i+=e}break;case"\n":case"\t":case"\r":case"\f":switch(g()){case"value":case"value-paren":case"at-group":case"comment":case"single-string":case"double-string":case"selector":i+=e;break;case"at-value":"\n"===e&&(u.value=i.trim(),k(),v())}break;case":":switch(g()){case"name":u.name=i.trim(),i="",m("before-value");break;case"before-selector":i+=e,x("selector"),y("selector");break;case"before-value":m("value"),i+=e;break;default:i+=e}break;case";":switch(g()){case"name":case"before-value":case"value":0<i.trim().length&&(u.value=i.trim(),k()),m("before-name");break;case"value-paren":i+=e;break;case"at-value":u.value=i.trim(),k(),v();break;case"before-name":break;default:i+=e}break;case"{":switch(g()){case"selector":"\\"===b(-1)?i+=e:(u.text=i.trim(),k(),m("before-name"),s+=1);break;case"at-group":switch(u.name=i.trim(),u.type){case"font-face":case"viewport":case"page":y("before-name");break;default:y("before-selector")}k(),s+=1;break;case"name":case"at-rule":u.name=i.trim(),k(),y("before-name"),s+=1;break;case"comment":case"double-string":case"single-string":i+=e;break;case"before-value":m("value"),i+=e}break;case"}":switch(g()){case"before-name":case"name":case"before-value":case"value":i&&(u.value=i.trim()),u.name&&u.value&&k(),x("end"),k(),v(),"at-group"===g()&&(x("at-group-end"),k(),v()),0<s&&(s-=1);break;case"at-group":case"before-selector":case"selector":"\\"===b(-1)?i+=e:(0<s&&"at-group"===g(1)&&(x("at-group-end"),k()),1<s&&v(),0<s&&(s-=1));break;case"double-string":case"single-string":case"comment":i+=e}break;case'"':case"'":switch(g()){case"double-string":'"'===e&&"\\"!==b(-1)&&v();break;case"single-string":"'"===e&&"\\"!==b(-1)&&v();break;case"before-at-value":m("at-value"),y('"'===e?"double-string":"single-string");break;case"before-value":m("value"),y('"'===e?"double-string":"single-string");break;case"comment":break;default:"\\"!==b(-1)&&y('"'===e?"double-string":"single-string")}i+=e;break;case"/":switch(g()){case"comment":case"double-string":case"single-string":i+=e;break;case"before-value":case"selector":case"name":case"value":var O;h("*")?(O=function(e){return 0<(e=n.slice(a).indexOf(e))&&e}("*/"))&&w(O+1):("before-value"==g()&&m("value"),i+=e);break;default:h("*")?(x("comment"),y("comment"),w()):i+=e}break;case"*":switch(g()){case"comment":h("/")?(u.text=i,w(),k(),v()):i+=e;break;case"before-selector":i+=e,x("selector"),y("selector");break;case"before-value":m("value"),i+=e;break;default:i+=e}break;case"@":switch(g()){case"comment":case"double-string":case"single-string":i+=e;break;case"before-value":m("value"),i+=e;break;default:for(var _=!1,S=0,C=f.length;!_&&S<C;++S)!function(e){var t=a+1;return e===n.slice(t,t+e.length)}(t=(o=f[S]).name||o)||(_=!0,x(t),y(o.state||"at-group"),w(t.length),o.prefix&&(u.prefix=o.prefix),o.type&&(u.type=o.type));_||(i+=e)}break;case"(":switch(g()){case"value":y("value-paren");break;case"before-value":m("value")}i+=e;break;case")":switch(g()){case"value-paren":v();break;case"before-value":m("value")}i+=e;break;default:switch(g()){case"before-selector":x("selector"),y("selector");break;case"before-name":x("property"),m("name");break;case"before-value":m("value");break;case"before-at-value":m("at-value")}i+=e}return 0,p}},{"./debug":35}],37:[function(e,t,n){var i,r,a,s,l=!1,d=e("./debug")("parse"),c=e("./lexer");function o(e,t){t=t||{};for(var n,o=["type","name","value"],i={},r=0;r<o.length;++r)e[n=o[r]]&&(i[n]=t[n]||e[n]);for(o=Object.keys(t),r=0;r<o.length;++r)i[n=o[r]]||(i[n]=t[n]);return a&&(i.position={start:e.start,end:e.end}),l&&d("astNode:",JSON.stringify(i,null,2)),i}function u(){var e=s.shift();return l&&d("next:",JSON.stringify(e,null,2)),e}function p(e){r+=1;var t={};switch(e.type){case"font-face":case"viewport":t.declarations=b();break;case"page":t.prefix=e.prefix,t.declarations=b();break;default:t.prefix=e.prefix,t.rules=h(function(){return r})}return o(e,t)}function f(e){return o(e,{type:"rule",selectors:e.text.split(",").map(function(e){return e.trim()}),declarations:b()})}function g(e){switch(e.type){case"property":return o(e);case"selector":return f(e);case"at-group-end":return void(r-=1);case"media":case"keyframes":return p(e);case"comment":if(i)return o(e,{text:e.text});break;case"charset":case"import":case"namespace":return o(e);case"font-face":case"supports":case"viewport":case"document":case"page":return p(e)}l&&d("parseToken: unexpected token:",JSON.stringify(e))}function h(e){for(var t,n,o=[];(n=u())&&e&&e(n);)(t=g(n))&&o.push(t);return n&&"end"!==n.type&&s.unshift(n),o}function b(){return h(function(e){return"property"===e.type||"comment"===e.type})}t.exports=function(e,t){i=!!(t=t||{}).comments,a=!!t.position,r=0,s=Array.isArray(e)?e.slice():c(e);var n,o=[];for(;n=u();)(n=g(n))&&o.push(n);return 0,{type:"stylesheet",stylesheet:{rules:o}}}},{"./debug":35,"./lexer":36}],38:[function(e,t,n){var o,i,r,a,s,l,d=!1,c=e("./debug")("stringify");function u(e){if(!e)return i?"":Array(a).join(r||"");a+=e}function p(e){var t="",n=e.prefix||"",o=(e.name&&(t=" "+e.name),"page"!==e.type);return"@"+n+e.type+t+l+b(e,o)+s}function f(e){return o?"/*"+(e.text||"")+"*/"+s:""}function g(e){var t;return e.selectors?t=e.selectors.join(","+s):(t="@"+e.type,t+=e.name?" "+e.name:""),u()+t+l+b(e)+s}function h(e,n){return e.reduce(function(e,t){t=("comment"===t.type?f:n)(t);return t&&e.push(t),e},[])}function b(e,t){var n=e.declarations,o=v;return e.rules&&(n=e.rules,o=g),"{"+(n=(n=function(e,t){if(!e)return"";u(1);e=h(e,t);return u(-1),e.length?e.join(s):""}(n,o))&&s+n+(t?"":s))+u()+"}"}function v(e){if("property"===e.type)return n=(t=e).name?t.name+":"+l:"",u()+n+t.value+";";var t,n;d&&c("stringifyDeclaration: unexpected node:",JSON.stringify(e))}function y(e){switch(e.type){case"rule":return g(e);case"media":case"keyframes":return p(e);case"comment":return f(e);case"import":case"charset":case"namespace":return"@"+e.type+" "+e.value+";"+s;case"font-face":case"supports":case"viewport":case"document":case"page":return p(e)}d&&c("stringifyNode: unexpected node: "+JSON.stringify(e))}t.exports=function(e,t){r=(t=t||{}).indentation||"",i=!!t.compress,o=!!t.comments,a=1,i?s=l="":(s="\n",l=" ");t=h(e.stylesheet.rules,y).join("\n").trim();return 0,t}},{"./debug":35}],39:[function(e,t,n){"use strict";var l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var e=new String("abc");if(e[5]="de","5"!==Object.getOwnPropertyNames(e)[0]){for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var o,i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"===i.join(""))return o={},"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")?1:void 0}}}catch(e){}}()?Object.assign:function(e,t){for(var n,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var r in n=Object(arguments[i]))d.call(n,r)&&(o[r]=n[r]);if(l)for(var a=l(n),s=0;s<a.length;s++)c.call(n,a[s])&&(o[a[s]]=n[a[s]])}return o}},{}],40:[function(e,t,n){var o,i,t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return(o=setTimeout)(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}var l,d=[],c=!1,u=-1;function p(){c&&l&&(c=!1,l.length?d=l.concat(d):u=-1,d.length&&f())}function f(){if(!c){for(var e=s(p),t=(c=!0,d.length);t;){for(l=d,d=[];++u<t;)l&&l[u].run();u=-1,t=d.length}l=null,c=!1,!function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function h(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||c||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=h,t.addListener=h,t.once=h,t.off=h,t.removeListener=h,t.removeAllListeners=h,t.emit=h,t.prependListener=h,t.prependOnceListener=h,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],41:[function(e,t,n){"use strict";function i(e,t,n,o,i,r,a,s,l,d,c,u,p,f,g,h){var b,v;return(t||!this.length)&&(b=this[this.length++]=new k,t)||(b=b||this[this.length-1],v=(v=!n&&!o&&b.length?v:b[b.length++]=new w(n))||b[b.length-1],i?v.tag=m(i):r?v.id=m(r):a?(t=m(a),(o=v.classes||(v.classes={}))[t]||(o[t]=y(a),(n=v.classList||(v.classList=[])).push(t),n.sort())):p?(h=h||g,(v.pseudos||(v.pseudos=[])).push({type:1==u.length?"class":"element",name:m(p),escapedName:y(p),value:h?m(h):null,escapedValue:h?y(h):null})):s&&(c=c?y(c):null,(v.attributes||(v.attributes=[])).push({operator:l,name:m(s),escapedName:y(s),value:c?m(c):null,escapedValue:c?y(c):null}))),""}function o(e){this.length=0;for(var t,n=this,o=e;e;){if((t=e.replace(s,function(){return i.apply(n,arguments)}))===e)throw new Error(o+" is an invalid expression");e=t}}var r=/([-.*+?^${}()|[\]\/\\])/g,a=/\\/g,y=function(e){return(e+"").replace(r,"\\$1")},m=function(e){return(e+"").replace(a,"")},s=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+y(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),w=function(e){this.combinator=e||" ",this.tag="*"},k=(w.prototype.toString=function(){if(!this.raw){var e,t,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(e=0;t=this.attributes[e++];)n+="["+t.name+(t.operator?t.operator+'"'+t.value+'"':"")+"]";if(this.pseudos)for(e=0;t=this.pseudos[e++];)n+=":"+t.name,t.value&&(n+="("+t.value+")");this.raw=n}return this.raw},function(){this.length=0}),l=(k.prototype.toString=function(){if(!this.raw){for(var e,t="",n=0;e=this[n++];)1!==n&&(t+=" ")," "!==e.combinator&&(t+=e.combinator+" "),t+=e;this.raw=t}return this.raw},o.prototype.toString=function(){if(!this.raw){for(var e,t=[],n=0;e=this[n++];)t.push(e);this.raw=t.join(", ")}return this.raw},{});t.exports=function(e){return null==e?null:(e=(""+e).replace(/^\s+|\s+$/g,""),l[e]||(l[e]=new o(e)))}},{}],42:[function(F,e,M){function c(e,t){var n;return t=t||{},(e=e||"")instanceof c?e:this instanceof c?(n=function(e){var t={r:0,g:0,b:0},n=1,o=null,i=null,r=null,a=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(O,"").replace(_,"").toLowerCase();var t,n=!1;if(T[e])e=T[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=H.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=H.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=H.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=H.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=H.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=H.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=H.hex8.exec(e))return{r:b(t[1]),g:b(t[2]),b:b(t[3]),a:w(t[4]),format:n?"name":"hex8"};if(t=H.hex6.exec(e))return{r:b(t[1]),g:b(t[2]),b:b(t[3]),format:n?"name":"hex"};if(t=H.hex4.exec(e))return{r:b(t[1]+""+t[1]),g:b(t[2]+""+t[2]),b:b(t[3]+""+t[3]),a:w(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=H.hex3.exec(e))return{r:b(t[1]+""+t[1]),g:b(t[2]+""+t[2]),b:b(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(k(e.r)&&k(e.g)&&k(e.b)?(t=function(e,t,n){return{r:255*g(e,255),g:255*g(t,255),b:255*g(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):k(e.h)&&k(e.s)&&k(e.v)?(o=y(e.s),i=y(e.v),t=function(e,t,n){e=6*g(e,360),t=g(t,100),n=g(n,100);var o=x.floor(e),e=e-o,i=n*(1-t),r=n*(1-e*t),e=n*(1-(1-e)*t),t=o%6;return{r:255*[n,r,i,i,e,n][t],g:255*[e,n,n,r,i,i][t],b:255*[i,i,e,n,n,r][t]}}(e.h,o,i),a=!0,s="hsv"):k(e.h)&&k(e.s)&&k(e.l)&&(o=y(e.s),r=y(e.l),t=function(e,t,n){var o,i,r;function a(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}e=g(e,360),t=g(t,100),n=g(n,100),0===t?o=i=r=n:(o=a(t=2*n-(n=n<.5?n*(1+t):n+t-n*t),n,e+1/3),i=a(t,n,e),r=a(t,n,e-1/3));return{r:255*o,g:255*i,b:255*r}}(e.h,o,r),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=f(n),{ok:a,format:e.format||s,r:j(255,A(t.r,0)),g:j(255,A(t.g,0)),b:j(255,A(t.b,0)),a:n}}(e),this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=C(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=C(this._r)),this._g<1&&(this._g=C(this._g)),this._b<1&&(this._b=C(this._b)),this._ok=n.ok,void(this._tc_id=S++)):new c(e,t)}function o(e,t,n){e=g(e,255),t=g(t,255),n=g(n,255);var o,i=A(e,t,n),r=j(e,t,n),a=(i+r)/2;if(i==r)o=l=0;else{var s=i-r,l=.5<a?s/(2-i-r):s/(i+r);switch(i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:l,l:a}}function i(e,t,n){e=g(e,255),t=g(t,255),n=g(n,255);var o,i=A(e,t,n),r=j(e,t,n),a=i,s=i-r,l=0===i?0:s/i;if(i==r)o=0;else{switch(i){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:l,v:a}}function t(e,t,n,o){e=[v(C(e).toString(16)),v(C(t).toString(16)),v(C(n).toString(16))];return o&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function r(e,t,n,o){return[v(m(o)),v(C(e).toString(16)),v(C(t).toString(16)),v(C(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;e=c(e).toHsl();return e.s-=t/100,e.s=h(e.s),c(e)}function a(e,t){t=0===t?0:t||10;e=c(e).toHsl();return e.s+=t/100,e.s=h(e.s),c(e)}function s(e){return c(e).desaturate(100)}function l(e,t){t=0===t?0:t||10;e=c(e).toHsl();return e.l+=t/100,e.l=h(e.l),c(e)}function d(e,t){t=0===t?0:t||10;e=c(e).toRgb();return e.r=A(0,j(255,e.r-C(-t/100*255))),e.g=A(0,j(255,e.g-C(-t/100*255))),e.b=A(0,j(255,e.b-C(-t/100*255))),c(e)}function u(e,t){t=0===t?0:t||10;e=c(e).toHsl();return e.l-=t/100,e.l=h(e.l),c(e)}function p(e,t){e=c(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,c(e)}function B(e){e=c(e).toHsl();return e.h=(e.h+180)%360,c(e)}function N(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+120)%360,s:t.s,l:t.l}),c({h:(n+240)%360,s:t.s,l:t.l})]}function z(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+90)%360,s:t.s,l:t.l}),c({h:(n+180)%360,s:t.s,l:t.l}),c({h:(n+270)%360,s:t.s,l:t.l})]}function R(e){var t=c(e).toHsl(),n=t.h;return[c(e),c({h:(n+72)%360,s:t.s,l:t.l}),c({h:(n+216)%360,s:t.s,l:t.l})]}function U(e,t,n){t=t||6,n=n||30;var o=c(e).toHsl(),i=360/n,r=[c(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,r.push(c(o));return r}function L(e,t){t=t||6;for(var e=c(e).toHsv(),n=e.h,o=e.s,i=e.v,r=[],a=1/t;t--;)r.push(c({h:n,s:o,v:i})),i=(i+a)%1;return r}function f(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function g(e,t){"string"==typeof(n=e)&&-1!=n.indexOf(".")&&1===parseFloat(n)&&(e="100%");var n="string"==typeof(n=e)&&-1!=n.indexOf("%");return e=j(t,A(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),x.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function h(e){return j(1,A(0,e))}function b(e){return parseInt(e,16)}function v(e){return 1==e.length?"0"+e:""+e}function y(e){return e=e<=1?100*e+"%":e}function m(e){return x.round(255*parseFloat(e)).toString(16)}function w(e){return b(e)/255}function k(e){return H.CSS_UNIT.exec(e)}var x,O,_,S,C,j,A,$,T,I,E,P,D,H;x=Math,O=/^\s+/,_=/\s+$/,S=0,C=x.round,j=x.min,A=x.max,$=x.random,c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:x.pow((.055+t)/1.055,2.4),n=n<=.03928?n/12.92:x.pow((.055+n)/1.055,2.4),e=e<=.03928?e/12.92:x.pow((.055+e)/1.055,2.4);return.2126*t+.7152*n+.0722*e},setAlpha:function(e){return this._a=f(e),this._roundA=C(100*this._a)/100,this},toHsv:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=i(this._r,this._g,this._b),t=C(360*e.h),n=C(100*e.s),e=C(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+e+"%)":"hsva("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=C(360*e.h),n=C(100*e.s),e=C(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+e+"%)":"hsla("+t+", "+n+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t=this._r,n=this._g,o=this._b,i=this._a;return t=[v(C(t).toString(16)),v(C(n).toString(16)),v(C(o).toString(16)),v(m(i))],e&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)&&t[3].charAt(0)==t[3].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0)+t[3].charAt(0):t.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:C(this._r),g:C(this._g),b:C(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+C(this._r)+", "+C(this._g)+", "+C(this._b)+")":"rgba("+C(this._r)+", "+C(this._g)+", "+C(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:C(100*g(this._r,255))+"%",g:C(100*g(this._g,255))+"%",b:C(100*g(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+C(100*g(this._r,255))+"%, "+C(100*g(this._g,255))+"%, "+C(100*g(this._b,255))+"%)":"rgba("+C(100*g(this._r,255))+"%, "+C(100*g(this._g,255))+"%, "+C(100*g(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&I[t(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+r(this._r,this._g,this._b,this._a),n=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(n=e?"#"+r((t=c(e))._r,t._g,t._b,t._a):n)+")"},toString:function(e){var t=!!e,n=(e=e||this._format,!1),o=this._a<1&&0<=this._a;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),(n="hsv"===e?this.toHsvString():n)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){e=e.apply(null,[this].concat([].slice.call(t)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(l,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(u,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(a,arguments)},greyscale:function(){return this._applyModification(s,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(U,arguments)},complement:function(){return this._applyCombination(B,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(R,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(z,arguments)}},c.fromRatio=function(e,t){if("object"==typeof e){var n,o={};for(n in e)e.hasOwnProperty(n)&&(o[n]="a"===n?e[n]:y(e[n]));e=o}return c(e,t)},c.equals=function(e,t){return!(!e||!t)&&c(e).toRgbString()==c(t).toRgbString()},c.random=function(){return c.fromRatio({r:$(),g:$(),b:$()})},c.mix=function(e,t,n){n=0===n?0:n||50;e=c(e).toRgb(),t=c(t).toRgb(),n/=100;return c({r:(t.r-e.r)*n+e.r,g:(t.g-e.g)*n+e.g,b:(t.b-e.b)*n+e.b,a:(t.a-e.a)*n+e.a})},c.readability=function(e,t){e=c(e),t=c(t);return(x.max(e.getLuminance(),t.getLuminance())+.05)/(x.min(e.getLuminance(),t.getLuminance())+.05)},c.isReadable=function(e,t,n){var o=c.readability(e,t),i=!1,e=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(n);switch(e.level+e.size){case"AAsmall":case"AAAlarge":i=4.5<=o;break;case"AAlarge":i=3<=o;break;case"AAAsmall":i=7<=o}return i},c.mostReadable=function(e,t,n){for(var o,i=null,r=0,a=(n=n||{}).includeFallbackColors,s=n.level,l=n.size,d=0;d<t.length;d++)r<(o=c.readability(e,t[d]))&&(r=o,i=c(t[d]));return c.isReadable(e,i,{level:s,size:l})||!a?i:(n.includeFallbackColors=!1,c.mostReadable(e,["#fff","#000"],n))},T=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=c.hexNames=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}(T),P="[\\s|\\(]+("+(E="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",D="[\\s|\\(]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",H={CSS_UNIT:new RegExp(E),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+D),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+D),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+D),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},void 0!==e&&e.exports?e.exports=c:window.tinycolor=c},{}],43:[function(e,o,t){!function(n){!function(){(typeof i==="function"&&i.amd?i:function(e,t){if(typeof o!=="undefined"&&o.exports)o.exports=t(typeof window!=="undefined"?window["jQuery"]:typeof n!=="undefined"?n["jQuery"]:null);else window.toastr=t(window.jQuery)})(["jquery"],function(v){return _=0,r="error",a="info",s="success",l="warning",e={clear:function(e,t){var n=w();x||y(n);o(e,n,t)||!function(e){for(var t=x.children(),n=t.length-1;0<=n;n--)o(v(t[n]),e)}(n)},remove:function(e){var t=w();x||y(t);e&&0===v(":focus",e).length?k(e):x.children().length&&x.remove()},error:function(e,t,n){return i({type:r,iconClass:w().iconClasses.error,message:e,optionsOverride:n,title:t})},getContainer:y,info:function(e,t,n){return i({type:a,iconClass:w().iconClasses.info,message:e,optionsOverride:n,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,n){return i({type:s,iconClass:w().iconClasses.success,message:e,optionsOverride:n,title:t})},version:"2.1.4",warning:function(e,t,n){return i({type:l,iconClass:w().iconClasses.warning,message:e,optionsOverride:n,title:t})}};function y(e,t){return e=e||w(),(x=v("#"+e.containerId)).length||t&&(t=e,(x=v("<div/>").attr("id",t.containerId).addClass(t.positionClass)).appendTo(v(t.target))),x}function o(e,t,n){n=!(!n||!n.force)&&n.force;return e&&(n||0===v(":focus",e).length)&&(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){k(e)}}),1)}function m(e){t&&t(e)}function i(e){var i=w(),t=e.iconClass||i.iconClass;if(void 0!==e.optionsOverride&&(i=v.extend(i,e.optionsOverride),t=e.optionsOverride.iconClass||t),!function(e,t){if(e.preventDuplicates){if(t.message===O)return 1;O=t.message}return}(i,e)){_++,x=y(i,!0);var r=null,a=v("<div/>"),n=v("<div/>"),o=v("<div/>"),s=v("<div/>"),l=v(i.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},c={toastId:_,state:"visible",startTime:new Date,options:i,map:e},u=(e.iconClass&&a.addClass(i.toastClass).addClass(t),e.title&&(t=e.title,i.escapeHtml&&(t=p(e.title)),n.append(t).addClass(i.titleClass),a.append(n)),e.message&&(t=e.message,i.escapeHtml&&(t=p(e.message)),o.append(t).addClass(i.messageClass),a.append(o)),i.closeButton&&(l.addClass(i.closeClass).attr("role","button"),a.prepend(l)),i.progressBar&&(s.addClass(i.progressClass),a.prepend(s)),i.rtl&&a.addClass("rtl"),i.newestOnTop?x.prepend(a):x.append(a),"");switch(e.iconClass){case"toast-success":case"toast-info":u="polite";break;default:u="assertive"}return a.attr("aria-live",u),a.hide(),a[i.showMethod]({duration:i.showDuration,easing:i.showEasing,complete:i.onShown}),0<i.timeOut&&(r=setTimeout(f,i.timeOut),d.maxHideTime=parseFloat(i.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,i.progressBar&&(d.intervalId=setInterval(b,10))),i.closeOnHover&&a.hover(h,g),!i.onclick&&i.tapToDismiss&&a.click(f),i.closeButton&&l&&l.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),i.onCloseClick&&i.onCloseClick(e),f(!0)}),i.onclick&&a.click(function(e){i.onclick(e),f()}),m(c),i.debug&&console&&console.log(c),a}function p(e){return(e=null==e?"":e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(e){var t=e&&!1!==i.closeMethod?i.closeMethod:i.hideMethod,n=e&&!1!==i.closeDuration?i.closeDuration:i.hideDuration,o=e&&!1!==i.closeEasing?i.closeEasing:i.hideEasing;if(!v(":focus",a).length||e)return clearTimeout(d.intervalId),a[t]({duration:n,easing:o,complete:function(){k(a),clearTimeout(r),i.onHidden&&"hidden"!==c.state&&i.onHidden(),c.state="hidden",c.endTime=new Date,m(c)}})}function g(){(0<i.timeOut||0<i.extendedTimeOut)&&(r=setTimeout(f,i.extendedTimeOut),d.maxHideTime=parseFloat(i.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime)}function h(){clearTimeout(r),d.hideEta=0,a.stop(!0,!0)[i.showMethod]({duration:i.showDuration,easing:i.showEasing})}function b(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;s.width(e+"%")}}function w(){return v.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function k(e){x=x||y(),e.is(":visible")||(e.remove(),e=null,0===x.children().length&&(x.remove(),O=void 0))}var x,t,O,_,r,a,s,l,e})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],45:[function(e,t,n){"use strict";var o=e("is-arguments"),i=e("is-generator-function"),r=e("which-typed-array"),a=e("is-typed-array");function s(e){return e.call.bind(e)}var l,d,c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,p=s(Object.prototype.toString),f=s(Number.prototype.valueOf),g=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);function b(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===p(e)}function y(e){return"[object Set]"===p(e)}function m(e){return"[object WeakMap]"===p(e)}function w(e){return"[object WeakSet]"===p(e)}function k(e){return"[object ArrayBuffer]"===p(e)}function x(e){return"undefined"!=typeof ArrayBuffer&&(k.working?k(e):e instanceof ArrayBuffer)}function O(e){return"[object DataView]"===p(e)}function _(e){return"undefined"!=typeof DataView&&(O.working?O(e):e instanceof DataView)}c&&(l=s(BigInt.prototype.valueOf)),u&&(d=s(Symbol.prototype.valueOf)),n.isArgumentsObject=o,n.isGeneratorFunction=i,n.isTypedArray=a,n.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},n.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||_(e)},n.isUint8Array=function(e){return"Uint8Array"===r(e)},n.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===r(e)},n.isUint16Array=function(e){return"Uint16Array"===r(e)},n.isUint32Array=function(e){return"Uint32Array"===r(e)},n.isInt8Array=function(e){return"Int8Array"===r(e)},n.isInt16Array=function(e){return"Int16Array"===r(e)},n.isInt32Array=function(e){return"Int32Array"===r(e)},n.isFloat32Array=function(e){return"Float32Array"===r(e)},n.isFloat64Array=function(e){return"Float64Array"===r(e)},n.isBigInt64Array=function(e){return"BigInt64Array"===r(e)},n.isBigUint64Array=function(e){return"BigUint64Array"===r(e)},v.working="undefined"!=typeof Map&&v(new Map),n.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),n.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},m.working="undefined"!=typeof WeakMap&&m(new WeakMap),n.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(m.working?m(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),n.isWeakSet=w,k.working="undefined"!=typeof ArrayBuffer&&k(new ArrayBuffer),n.isArrayBuffer=x,O.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&O(new DataView(new ArrayBuffer(1),0,1)),n.isDataView=_;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(e){return"[object SharedArrayBuffer]"===p(e)}function j(e){return void 0!==S&&((C.working=void 0===C.working?C(new S):C.working)?C(e):e instanceof S)}function A(e){return b(e,f)}function $(e){return b(e,g)}function T(e){return b(e,h)}function I(e){return c&&b(e,l)}function E(e){return u&&b(e,d)}n.isSharedArrayBuffer=j,n.isAsyncFunction=function(e){return"[object AsyncFunction]"===p(e)},n.isMapIterator=function(e){return"[object Map Iterator]"===p(e)},n.isSetIterator=function(e){return"[object Set Iterator]"===p(e)},n.isGeneratorObject=function(e){return"[object Generator]"===p(e)},n.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===p(e)},n.isNumberObject=A,n.isStringObject=$,n.isBooleanObject=T,n.isBigIntObject=I,n.isSymbolObject=E,n.isBoxedPrimitive=function(e){return A(e)||$(e)||T(e)||I(e)||E(e)},n.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(x(e)||j(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(n,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})},{"is-arguments":22,"is-generator-function":24,"is-typed-array":25,"which-typed-array":47}],46:[function(A,e,$){!function(j){!function(){var e,t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},o=0;o<t.length;o++)n[t[o]]=Object.getOwnPropertyDescriptor(e,t[o]);return n},s=/%[sdj%]/g,o=($.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,i=o.length,r=String(e).replace(s,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(e){return"[Circular]"}default:return e}}),a=o[n];n<i;a=o[++n])h(a)||!d(a)?r+=" "+a:r+=" "+l(a);return r},$.deprecate=function(e,t){var n;return void 0!==j&&!0===j.noDeprecation?e:void 0===j?function(){return $.deprecate(e,t).apply(this,arguments)}:(n=!1,function(){if(!n){if(j.throwDeprecation)throw new Error(t);j.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)})},{}),i=/^$/;function l(e,t){var n={seen:[],stylize:a};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&$._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),c(n,e,n.depth)}function r(e,t){t=l.styles[t];return t?"["+l.colors[t][0]+"m"+e+"["+l.colors[t][1]+"m":e}function a(e,t){return e}function c(t,n,o){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==$.inspect&&(!n.constructor||n.constructor.prototype!==n))return v(e=n.inspect(o,t))?e:c(t,e,o);var e=function(e,t){if(y(t))return e.stylize("undefined","undefined");{var n;if(v(t))return n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}(t,n);if(e)return e;var i,e=Object.keys(n),r=(i={},e.forEach(function(e,t){i[e]=!0}),i);if(t.showHidden&&(e=Object.getOwnPropertyNames(n)),k(n)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return u(n);if(0===e.length){if(x(n))return a=n.name?": "+n.name:"",t.stylize("[Function"+a+"]","special");if(m(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(k(n))return u(n)}var a="",s=!1,l=["{","}"];if(f(n)&&(s=!0,l=["[","]"]),x(n)&&(a=" [Function"+(n.name?": "+n.name:"")+"]"),m(n)&&(a=" "+RegExp.prototype.toString.call(n)),w(n)&&(a=" "+Date.prototype.toUTCString.call(n)),k(n)&&(a=" "+u(n)),0===e.length&&(!s||0==n.length))return l[0]+a+l[1];if(o<0)return m(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n),d=s?function(t,n,o,i,e){for(var r=[],a=0,s=n.length;a<s;++a)S(n,String(a))?r.push(p(t,n,o,i,String(a),!0)):r.push("");return e.forEach(function(e){e.match(/^\d+$/)||r.push(p(t,n,o,i,e,!0))}),r}(t,n,o,r,e):e.map(function(e){return p(t,n,o,r,e,s)}),t.seen.pop();var d;return 60<d.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?l[0]+(""===a?"":a+"\n ")+" "+d.join(",\n  ")+" "+l[1]:l[0]+a+" "+d.join(", ")+" "+l[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,o,i,r){var a,s,t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(t.get?s=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(s=e.stylize("[Setter]","special")),S(o,i)||(a="["+i+"]"),s||(e.seen.indexOf(t.value)<0?-1<(s=h(n)?c(e,t.value,null):c(e,t.value,n-1)).indexOf("\n")&&(s=r?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(r&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function m(e){return d(e)&&"[object RegExp]"===n(e)}function d(e){return"object"==typeof e&&null!==e}function w(e){return d(e)&&"[object Date]"===n(e)}function k(e){return d(e)&&("[object Error]"===n(e)||e instanceof Error)}function x(e){return"function"==typeof e}function n(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}j.env.NODE_DEBUG&&(e=(e=j.env.NODE_DEBUG).replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+e+"$","i")),$.debuglog=function(t){var n;return t=t.toUpperCase(),o[t]||(i.test(t)?(n=j.pid,o[t]=function(){var e=$.format.apply($,arguments);console.error("%s %d: %s",t,n,e)}):o[t]=function(){}),o[t]},($.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},$.types=A("./support/types"),$.isArray=f,$.isBoolean=g,$.isNull=h,$.isNullOrUndefined=function(e){return null==e},$.isNumber=b,$.isString=v,$.isSymbol=function(e){return"symbol"==typeof e},$.isUndefined=y,$.isRegExp=m,$.types.isRegExp=m,$.isObject=d,$.isDate=w,$.types.isDate=w,$.isError=k,$.types.isNativeError=k,$.isFunction=x,$.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},$.isBuffer=A("./support/isBuffer");var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}$.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":"),[e.getDate(),_[e.getMonth()],t].join(" ")),$.format.apply($,arguments))},$.inherits=A("inherits"),$._extend=function(e,t){if(t&&d(t))for(var n=Object.keys(t),o=n.length;o--;)e[n[o]]=t[n[o]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;$.promisify=function(r){if("function"!=typeof r)throw new TypeError('The "original" argument must be of type Function');if(C&&r[C]){var e;if("function"!=typeof(e=r[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,o,e=new Promise(function(e,t){n=e,o=t}),t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);t.push(function(e,t){e?o(e):n(t)});try{r.apply(this,t)}catch(e){o(e)}return e}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),C&&Object.defineProperty(e,C,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,t(r))},$.promisify.custom=C,$.callbackify=function(r){if("function"!=typeof r)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");function o(){return n.apply(i,arguments)}var i=this;r.apply(this,e).then(function(e){j.nextTick(o.bind(null,null,e))},function(e){j.nextTick(function(e,t){var n;return e||((n=new Error("Promise was rejected with a falsy value")).reason=e,e=n),t(e)}.bind(null,e,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,t(r)),e}}.call(this)}.call(this,A("_process"))},{"./support/isBuffer":44,"./support/types":45,_process:40,inherits:21}],47:[function(p,f,e){!function(u){!function(){"use strict";var t=p("for-each"),e=p("available-typed-arrays"),n=p("call-bind/callBound"),r=n("Object.prototype.toString"),a=p("has-tostringtag/shams")(),o="undefined"==typeof globalThis?u:globalThis,e=e(),s=n("String.prototype.slice"),l={},i=p("es-abstract/helpers/getOwnPropertyDescriptor"),d=Object.getPrototypeOf,c=(a&&i&&d&&t(e,function(e){var t,n;"function"==typeof o[e]&&(t=new o[e],Symbol.toStringTag in t&&(t=d(t),(n=i(t,Symbol.toStringTag))||(t=d(t),n=i(t,Symbol.toStringTag)),l[e]=n.get))}),p("is-typed-array"));f.exports=function(e){return!!c(e)&&(a&&Symbol.toStringTag in e?(o=e,i=!1,t(l,function(e,t){if(!i)try{var n=e.call(o);n===t&&(i=n)}catch(e){}}),i):s(r(e),8,-1));var o,i}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":7,"call-bind/callBound":8,"es-abstract/helpers/getOwnPropertyDescriptor":11,"for-each":13,"has-tostringtag/shams":19,"is-typed-array":25}],48:[function(w,e,t){!function(m){!function(){"use strict";var d=w("./template-loader.js"),c=w("console-browserify"),u="undefined"!=typeof window?window.ko:void 0!==m?m.ko:null,p="undefined"!=typeof window?window.jQuery:void 0!==m?m.jQuery:null,f=(w("./ko-bindings.js"),w("./undomanager/undomain.js")),g=w("./ext/localstorage.js");if(void 0===u)throw"Cannot find knockout.js library!";if(void 0===p)throw"Cannot find jquery library!";function h(e){var t=m.document.createElement("div");return t.innerHTML="<a></a>",t.firstChild.href=e,t.innerHTML=t.innerHTML,t.firstChild.href}function l(e,t){var n,o=-1==e.indexOf("?")?"?":"&",i=e;for(n in t)t.hasOwnProperty(n)&&(i+=o+n+"="+encodeURIComponent(t[n]),o="&");return i}var b=function(s,e){e.bindingHandlers.wysiwygSrc.convertedUrl=function(e,t,n,o){var i=s.imgProcessorBackend||"./upload",r=i.match(/^(https?:\/\/[^\/]*\/).*$/),a=e.match(/^(https?:\/\/[^\/]*\/).*$/);return null===r||null!==a&&r[1]==a[1]?(i.indexOf("?"),l(i,{src:e,method:t,params:n+","+o})):(c.log("Cannot apply backend image resizing to non-local resources ",e,t,n,o,r,a),i={method:t,width:n},null!==o&&(i.height=o),l(e,i))},e.bindingHandlers.wysiwygSrc.placeholderUrl=function(e,t,n,o){return l(s.imgPlaceholderUrl||"./upload",{method:o||"placeholder",params:e+","+t,text:n})},s&&s.tinymceConfig&&(e.bindingHandlers.wysiwyg.standardOptions=s.tinymceConfig),s&&s.tinymceConfigFull&&(e.bindingHandlers.wysiwyg.fullOptions=s.tinymceConfigFull)},v=function(e,t){return t()},y=function(i,e,t,n,o){d.fixPageEvents();var r="function"==typeof i.functionCaller?i.functionCaller:v,a=[function(o){i&&i.strings&&(o.t=function(e,t){var n=i.strings[e];return void 0===n&&(c.warn("Missing translation string for",e,": using default string"),n=e),o.tt(n,t)})},f(r),w("./widgets/boolean.js"),w("./widgets/color.js"),w("./widgets/font.js"),w("./widgets/integer.js"),w("./widgets/select.js"),w("./widgets/src.js"),w("./widgets/textarea.js"),w("./widgets/url.js"),w("./ext/color.js"),w("./ext/util.js"),w("./ext/url.js"),w("./ext/inliner.js")];if(void 0!==o)for(var s=0;s<o.length;s++)a.push(o[s]);a.push(function(e){e={messages:{unknownError:e.t("Unknown error"),uploadedBytes:e.t("Uploaded bytes exceed file size"),maxNumberOfFiles:e.t("Maximum number of files exceeded"),acceptFileTypes:e.t("File type not allowed"),maxFileSize:e.t("File is too large"),minFileSize:e.t("File is too small"),post_max_size:e.t("The uploaded file exceeds the post_max_size directive in php.ini"),max_file_size:e.t("File is too big"),min_file_size:e.t("File is too small"),accept_file_types:e.t("Filetype not allowed"),max_number_of_files:e.t("Maximum number of files exceeded"),max_width:e.t("Image exceeds maximum width"),min_width:e.t("Image requires a minimum width"),max_height:e.t("Image exceeds maximum height"),min_height:e.t("Image requires a minimum height"),abort:e.t("File upload aborted"),image_resize:e.t("Failed to resize image"),generic:e.t("Unexpected upload error")}};i&&i.fileuploadConfig&&(e=p.extend(!0,e,i.fileuploadConfig)),u.bindingHandlers.fileupload.extendOptions=e});var l=i.fileuploadConfig?i.fileuploadConfig.url:"/upload/";b(i,u),p("\x3c!-- ko template: 'main' --\x3e\x3c!-- /ko --\x3e").appendTo(m.document.body),void 0===e&&void 0!==t&&(e=t.template),d.load(r,e,t,n,a,l)};e.exports={isCompatible:d.isCompatible,init:function(e,t){var n=m.location.hash?m.location.href.split("#")[1]:void 0;if(e&&(e.template||e.data))e.data?(o="string"==typeof o?JSON.parse(e.data):e.data,y(e,void 0,o.metadata,o.content,t)):y(e,e.template,void 0,void 0,t);else if(n&&7==n.length){var o=e,i=n,r=t;try{var a=g(i,o.emailProcessorBackend),s=void 0!==r?r:[],l=(s.push(a.extension),h(a.metadata.template));y(o,l,a.metadata,a.model,s)}catch(e){c.error("TODO not found ",i,e)}}else{if(!n)return!1;y(e,h(n),void 0,void 0,t)}return!0},start:y}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ext/color.js":87,"./ext/inliner.js":88,"./ext/localstorage.js":89,"./ext/url.js":90,"./ext/util.js":91,"./ko-bindings.js":92,"./template-loader.js":93,"./undomanager/undomain.js":94,"./widgets/boolean.js":98,"./widgets/color.js":99,"./widgets/font.js":100,"./widgets/integer.js":101,"./widgets/select.js":102,"./widgets/src.js":103,"./widgets/textarea.js":104,"./widgets/url.js":105,"console-browserify":10}],49:[function(t,e,n){!function(e){!function(){"use strict";var p="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,f=t("console-browserify");p.bindingHandlers.bindIframe={tpl:'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n</head>\r\n<body><div data-bind="block: content"></div></body>\r\n</html>\r\n',init:function(e,t){var n,o,i,r,a="first call";try{var s=e.contentDocument;s.open(),s.write(p.bindingHandlers.bindIframe.tpl),s.close();try{var l=s.body;if(l){for(var d=e.contentWindow.parent.document.getElementsByTagName("script"),c=0;c<d.length;c++)"text/html"==d[c].getAttribute("type")&&d[c].getAttribute("id")&&(n=s,o=d[c].getAttribute("id"),i=d[c].innerHTML,r=void 0,(r=n.createElement("script")).setAttribute("type","text/html"),r.setAttribute("id",o),r.text=i,n.body.appendChild(r));var u=s.getElementsByTagName("HTML");p.utils.domNodeDisposal.addDisposeCallback(e,function(){p.cleanNode(u[0]||l)}),p.applyBindings(t(),u[0]||l)}else f.log("no iframedoc",a)}catch(e){throw f.log("error reading iframe.body",e,a),e}}catch(e){throw f.log("error reading iframe contentDocument",e,a),e}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],50:[function(e,t,n){!function(t){!function(){"use strict";var a="undefined"!=typeof window?window.ko:void 0!==t?t.ko:null,s=e("console-browserify");a.bindingHandlers.withProperties={init:function(e,t,n,o,i){i=i.createChildContext(i.$rawData,null,function(e){a.utils.extend(e,t())});return a.applyBindingsToDescendants(i,e),{controlsDescendantBindings:!0}}},a.virtualElements.allowedBindings.withProperties=!0,a.bindingHandlers.log={init:function(e,t,n,o,i){s.log("log",t())}},a.bindingHandlers.block={templateExists:function(e){return!!t.document.getElementById(e)},_chooseTemplate:function(e,t,n,o){var i=t+"-"+n;if(a.bindingHandlers.block.templateExists(i))return i;if(null!=o)return a.bindingHandlers.block._chooseTemplate(e,t,o);t=e?"array":"object-"+n;if(a.bindingHandlers.block.templateExists(t))return t;throw"cannot find template for "+i+"/"+t},_displayMode:function(e,t){var n=void 0!==e.type?a.utils.unwrapObservable(e.type):"notablock-"+typeof e,e=void 0!==e.splice,o=t.templateMode||"show";return a.bindingHandlers.block._chooseTemplate(e,n,o,t.templateModeFallback)},_makeTemplateValueAccessor:function(i,r){return function(){var e,t,n=i(),o=a.utils.peekObservable(n),n=(!o||"object"!=typeof o.data&&"function"!=typeof o.data?t=n:(t=o.data,void 0!==o.template&&(n=a.utils.unwrapObservable(o.template),o=r.templateMode||"show",e=a.bindingHandlers.block._chooseTemplate(!1,n,o,r.templateModeFallback))),a.utils.unwrapObservable(t));if(a.isObservable(n)&&s.log("doubleObservable",n),void 0===e)if(void 0===t)e="empty";else try{e=a.bindingHandlers.block._displayMode(n,r)}catch(e){throw s.log(e,n,r.$data,r.templateMode),e}return{name:e,data:t,templateEngine:a.nativeTemplateEngine.instance}}},init:function(e,t,n,o,i){void 0===t()&&s.log("found a null block: check ending commas in arrays defs in IE");t=a.bindingHandlers.block._makeTemplateValueAccessor(t,i);return a.bindingHandlers.template.init(e,t)},update:function(e,t,n,o,i){t=a.bindingHandlers.block._makeTemplateValueAccessor(t,i);return a.bindingHandlers.template.update(e,t,n,o,i)}},a.expressionRewriting.bindingRewriteValidators.block=!1,a.virtualElements.allowedBindings.block=!0}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],51:[function(e,t,n){"use strict";t.exports=e("./string-template.js")},{"./string-template.js":68}],52:[function(o,e,t){!function(n){!function(){"use strict";o("evol-colorpicker");function e(){t.BindingHandler.call(this,"colorpicker")}var l="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null,d="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null,t="undefined"!=typeof window?window.kojqui:void 0!==n?n.kojqui:null;((e.prototype=t.utils.createObject(t.BindingHandler.prototype)).constructor=e).prototype.init=function(n,e,t){function o(e,t){void 0!==t&&s(t)}var i=e(),r=i.color,a="#0000ffff",s=d.computed({read:function(){var e=r();return"transparent"==e?a:e},write:function(e){return r(e==a?"transparent":e)},disposeWhenNodeIsRemoved:n});l(n).on("change.color",o),d.computed({read:function(){var e,t={color:d.utils.unwrapObservable(s),showOn:"button"};for(e in i)"color"!==e&&i.hasOwnProperty(e)&&(t[e]=d.utils.unwrapObservable(i[e]));l(n).colorpicker(t)},disposeWhenNodeIsRemoved:n}),d.utils.domNodeDisposal.addDisposeCallback(n,function(){l(n).off("change.color",o),l(n).colorpicker("destroy")})},t.utils.register(e)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"evol-colorpicker":12}],53:[function(e,t,n){!function(e){!function(){"use strict";var o="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;o.bindingHandlers.cssText={update:function(t,n,e){n=o.utils.unwrapObservable(n());try{t.innerText=n}catch(e){t.styleSheet||(t.innerHTML="a{}"),t.styleSheet.cssText=n}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(o,e,t){!function(e){!function(){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;o("console-browserify");t.bindingHandlers.focusable={focus:function(){},blur:function(){},init:function(e){t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("focusin",t.bindingHandlers.focusable.focus),n(e).off("focusout",t.bindingHandlers.focusable.blur)}),n(e).on("focusin",t.bindingHandlers.focusable.focus),n(e).on("focusout",t.bindingHandlers.focusable.blur)}},t.bindingHandlers.scrollable={scroll:function(){},init:function(e){t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(e).off("scroll",t.bindingHandlers.scrollable.scroll)}),n(e).on("scroll",t.bindingHandlers.scrollable.scroll)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],55:[function(e,t,n){!function(n){!function(){"use strict";var l,d,c,e="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null,t="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null;d=e,(l=t).utils.unwrapObservable,c=l.utils.domData.get,l.utils.domData.set,l.bindingHandlers.extdroppable={init:function(e,t,n,o,i){var r,a=d(e),t=l.utils.unwrapObservable(t())||{},s={};d.extend(!0,s,l.bindingHandlers.extdroppable),t.data?(t.options&&s.options&&(l.utils.extend(s.options,t.options),delete t.options),l.utils.extend(s,t)):s.data=t,r=s.options.drop,a.droppable(l.utils.extend(s.options,{drop:function(e,t){var n=t.draggable[0],n=c(n,"ko_sortItem")||c(n,"ko_dragItem");n&&(n.clone&&(n=n.clone()),s.dragged&&(n=s.dragged.call(this,n,e,t)||n),s.data&&s.data(n)),r&&r.apply(this,arguments)}})),void 0!==s.isEnabled&&l.computed({read:function(){a.droppable(l.utils.unwrapObservable(s.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:e})},update:function(e,t,n,o,i){},targetIndex:null,afterMove:null,beforeMove:null,options:{}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(e,t,n){!function(e){!function(){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t.extenders.paging=function(o,e){var i=t.observable(e||10),r=t.observable(1);return o.pageSize=t.computed({read:i,write:function(e){i(0<e?e:10)}}),o.currentPage=t.computed({read:r,write:function(e){e>o.pageCount()?r(o.pageCount()):r(e<=0?1:e)}}),o.pageCount=t.computed(function(){return Math.ceil(o().length/o.pageSize())||1}),o.currentPageData=t.computed(function(){var e=i(),t=r(),n=e*(t-1),e=e*t;return o().slice(n,e)}),o.moveFirst=function(){o.currentPage(1)},o.movePrevious=function(){o.currentPage(o.currentPage()-1)},o.moveNext=function(){o.currentPage(o.currentPage()+1)},o.moveLast=function(){o.currentPage(o.pageCount())},o}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(i,r,a){!function(o){!function(){var e,t,n;e=function(d,c){var u=d.utils.unwrapObservable;d.bindingHandlers.extresizable={options:{minHeight:2,maxHeight:1e3,autoHide:!1},init:function(n,e,t,o,i){var r=(l=u(e())||{}).options||{},a=d.utils.extend({},d.bindingHandlers.extresizable.options),s=(void 0!==l.isEnabled?l:d.bindingHandlers.extresizable).isEnabled,l="data"in l?l.data:e();r.start=function(e,t){"function"==typeof r.resizing&&r.resizing(!0),d.utils.toggleDomNodeCssClass(n,"resizable-resizing",!0)},r.stop=function(e,t){"function"==typeof r.resizing&&r.resizing(!1),d.utils.toggleDomNodeCssClass(n,"resizable-resizing",!1),e.target.style.height="auto",e.preventDefault()},r.resize=function(e,t){l(Math.round(t.size.height)),t.size.height=l()},d.utils.extend(a,r),c(n).resizable(a),void 0!==s&&d.computed({read:function(){c(n).resizable(u(s)?"enable":"disable")},disposeWhenNodeIsRemoved:n}),d.utils.domNodeDisposal.addDisposeCallback(n,function(){c(n).resizable("destroy")})}}},"function"==typeof i&&"object"==typeof a&&"object"==typeof r?(t="undefined"!=typeof window?window.ko:void 0!==o?o.ko:null,n="undefined"!=typeof window?window.jQuery:void 0!==o?o.jQuery:null,"undefined"!=typeof window?window.jQuery.ui.resizable:void 0!==o&&o.jQuery.ui.resizable,e(t,n)):e(window.ko,window.jQuery)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(n,e,t){!function(d){!function(){"use strict";var a="undefined"!=typeof window?window.jQuery:void 0!==d?d.jQuery:null,s="undefined"!=typeof window?window.ko:void 0!==d?d.ko:null,e="undefined"!=typeof window?window.jQuery.ui.sortable:void 0!==d?d.jQuery.ui.sortable:null,t="undefined"!=typeof window?window.jQuery.ui.draggable:void 0!==d?d.jQuery.ui.draggable:null;n("console-browserify");if(n("knockout-sortable"),void 0===e)throw"Cannot find jquery-ui sortable widget dependency!";if(void 0===t)throw"Cannot find jquery-ui sortable widget dependency!";function l(e,t){e()?t.type==e()+"stop"&&e(!1):"dragstart"!=t.type&&"sortstart"!=t.type||e(t.type.substring(0,4))}function r(e){return function(){var i=e(),n=(s.utils.peekObservable(i),s.utils.unwrapObservable(i),"undefined"==i.options&&(i.options={}),i.options.start),o=(i.options.start=function(e,t){if(void 0!==i.dragging&&s.isWritableObservable(i.dragging)&&l(i.dragging,e),void 0!==i.dropContainer&&(i.scrollInterval=d.setInterval(function(){var e=a(i.dropContainer).scrollTop();a(i.dropContainer).scrollTop(e+i.adding)},20)),void 0!==n)return n(e,t)},i.options.stop),r=(i.options.stop=function(e,t){if(void 0!==i.dragging&&s.isWritableObservable(i.dragging)&&l(i.dragging,e),void 0!==i.dropContainer&&d.clearInterval(i.scrollInterval),void 0!==o)return o(e,t)},i.options.drag);return i.options.drag=function(e,t){var n,o;if(void 0!==i.dropContainer&&(o=(n=e.pageY-a(i.dropContainer).offset().top)-a(i.dropContainer).height(),i.adding=n<-20?-20:n<0?-10:n<10?-5:20<o?20:0<o?10:-10<o?5:0),void 0!==r)return r(e,t)},i}}s.bindingHandlers.extsortable={init:function(e,t,n,o,i){return s.bindingHandlers.sortable.init(e,r(t),n,o,i)},update:function(e,t,n,o,i){return s.bindingHandlers.sortable.update(e,r(t),n,o,i)}},s.bindingHandlers.extdraggable={init:function(e,t,n,o,i){return s.bindingHandlers.draggable.init(e,r(t),n,o,i)},update:function(e,t,n,o,i){return s.bindingHandlers.draggable.update(e,r(t),n,o,i)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10,"knockout-sortable":32}],59:[function(e,t,n){!function(s){!function(){"use strict";var g="undefined"!=typeof window?window.jQuery:void 0!==s?s.jQuery:null,h="undefined"!=typeof window?window.ko:void 0!==s?s.ko:null,b=e("console-browserify");h.bindingHandlers.fudroppable={init:function(e,t){function n(e,t,n,o,i,r){function a(){e[t]=null,void 0!==o&&n.classList.remove(o),h.isWriteableObservable(i)&&i()&&i(!1)}e[t]?s.clearTimeout(e[t]):(void 0!==o&&n.classList.add(o),h.isWriteableObservable(i)&&!i()&&i(!0)),"dragleave"==r.type?a():e[t]=s.setTimeout(a,500)}var t=t()||{},o={};(t.active||t.activeClass)&&h.utils.registerEventHandler(s,"dragover",n.bind(void 0,o,"activeTimeout",e,t.activeClass,t.active)),t.hoverClass&&h.utils.registerEventHandler(e,"dragover dragenter dragleave",n.bind(void 0,o,"hoverTimeout",e,t.hoverClass,void 0))}},h.bindingHandlers.fileupload={extendOptions:{},remoteFilePreprocessor:function(e){return e},init:function(e,t){h.utils.domNodeDisposal.addDisposeCallback(e,function(){g(e).fileupload("destroy")}),"WebkitAppearance"in s.document.documentElement.style&&!("webkitNbspMode"in s.document.documentElement.style||"StyleMedia"in s)?g(e).attr("title"," "):g(e).attr("title","")},update:function(r,e){for(var a=e()||{},t=g(r),s=t.parents(".uploadzone"),n=a.data,l=(a.data=void 0,a.canvasPreview),d=(h.utils.extend(a,{url:"/upload/",dataType:"json",dropZone:s.find(".mo-uploadzone")[0],autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png|webp)$/i,maxFileSize:1048576,imageMaxWidth:1920,imageMaxHeight:1080,previewMaxWidth:200,previewMaxHeight:200,previewCrop:!1,replaceFileInput:!1,messages:{unknownError:"Unknown error",uploadedBytes:"Uploaded bytes exceed file size",maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small",post_max_size:"The uploaded file exceeds the post_max_size directive in php.ini",max_file_size:"File is too big",min_file_size:"File is too small",accept_file_types:"Filetype not allowed",max_number_of_files:"Maximum number of files exceeded",max_width:"Image exceeds maximum width",min_width:"Image requires a minimum width",max_height:"Image exceeds maximum height",min_height:"Image requires a minimum height",abort:"File upload aborted",image_resize:"Failed to resize image",generic:"Unexpected upload error"}}),h.utils.extend(a,h.bindingHandlers.fileupload.extendOptions),0),c="",u=function(){0==--d&&(n&&n(c),c="",l&&(s.find("img").show(),s.find("canvas").remove()),s.removeClass("uploading"),s.find(".progress-bar").css("width",0))},p=function(e){if("object"==typeof a.messages&&null!==a.messages){var t=e.match(/^([^ ]+)(.*)$/);if(t&&void 0!==a.messages[t[1]])return a.messages[t[1]]+t[2]}return e},o=(t.fileupload(a),["fileuploadadd","fileuploadprocessalways","fileuploadprogressall","fileuploaddone","fileuploadfail"]),i=function(e,t){if("fileuploadadd"==e.type&&d++,"fileuploadfail"==e.type&&(b.log("fileuploadfail",e,t),a.onerror&&(""===t.errorThrown&&"error"==t.textStatus?a.onerror(p("generic")):a.onerror(p("generic ("+t.errorThrown+")"))),u()),"fileuploaddone"==e.type)if(void 0!==t.result.files[0].url){if(a.onfile)for(var n=0;n<t.result.files.length;n++)t.result.files[n]=h.bindingHandlers.fileupload.remoteFilePreprocessor(t.result.files[n]),a.onfile(t.result.files[n]);""===c&&(c=t.result.files[0].url),l?((i=new Image).onload=u,i.onerror=u,i.src=t.result.files[0].url):u()}else void 0!==t.result.files[0].error?(b.log("remote error",e,t),a.onerror&&a.onerror(p(t.result.files[0].error))):(b.log("unexpected error",e,t),a.onerror&&a.onerror(p("generic (Unexpected Error retrieving uploaded file)"))),u();var o,i;"fileuploadprocessalways"==e.type&&(i=t.index,(o=t.files[i]).preview&&0===i&&0===s.find("canvas").length&&(l&&(i=g(o.preview).css("width","100%"),s.find("img").hide(),s.prepend(i)),s.addClass("uploading"),s.find(".progress-bar").css("width",0)),o.error&&(a.onerror&&(g(r).val(""),a.onerror(p(o.error))),u())),"fileuploadprogressall"==e.type&&(i=parseInt(t.loaded/t.total*100,10),s.find(".progress-bar").css("width",i+"%"))},f=o.length-1;0<=f;f--)t.on(o[f],i);g.support.fileInput||t.prop("disabled",!0).parent().addClass("disabled")}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],60:[function(n,e,t){!function(t){!function(){"use strict";var e,a,d="undefined"!=typeof window?window.ko:void 0!==t?t.ko:null,s=n("console-browserify");if(d.bindingHandlers.letproxy={init:function(e,t,n,o,i){var r,a=t(),s={};for(r in a)s[r]=function(e,t){return d.computed({read:function(){return t()},write:function(e){t(e)},disposeWhenNodeIsRemoved:e})}(e,a[r]);t=i.extend(function(){return s});return d.applyBindingsToDescendants(t,e),{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.letproxy=!0,d.bindingHandlers.ifSubs={cloneNodes:function(e,t){for(var n=0,o=e.length,i=[];n<o;n++){var r=e[n].cloneNode(!0);i.push(t?d.cleanNode(r):r)}return i},init:function(o,i,e,t,r){var a,s,l=i();return void 0===l.data.subsCount&&d.extenders.subscriptionsCount(l.data),d.computed(function(){var e=d.utils.unwrapObservable(i().data.subsCount),t=!s,n=-(void 0!==i().gutter?i().gutter:1),e=e+(a?n:0)>=d.utils.unwrapObservable(l.threshold);void 0!==i().not&&i().not&&(e=!e),!t&&e===a||(t&&d.computedContext.getDependenciesCount()&&(s=d.bindingHandlers.ifSubs.cloneNodes(d.virtualElements.childNodes(o),!0)),e?(t||d.virtualElements.setDomNodeChildren(o,d.bindingHandlers.ifSubs.cloneNodes(s)),d.applyBindingsToDescendants(r,o)):d.virtualElements.emptyNode(o),a=e)},null,{disposeWhenNodeIsRemoved:o}),{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.ifSubs=!0,"function"==typeof d.subscription&&void 0!==d.isWritableObservable)e="beforeSubscriptionAdd",a="afterSubscriptionRemove";else if("3.2.0"==d.version)e="va",a="nb";else if("3.3.0"==d.version)e="ja",a="ua";else if("3.4.0"==d.version)e="sa",a="Ia";else if("3.4.1"==d.version)e="sa",a="Ia";else if("3.4.2"==d.version)e="ua",a="Ka";else if("3.5.0"==d.version)e="Qa",a="cb";else{if("3.5.1"!=d.version)throw"Unsupported minimized Knockout version "+d.version+" (supported DEBUG or minimized 3.2.0 ... 3.5.1)";e="Qa",a="hb"}d.extenders.subscriptionsCount=function(t,n,o){var i,r;return void 0===t.subsCount?(t.subsCount=d.observable(t.getSubscriptionsCount()).extend({notify:"always"}),i=t[e],r=t[a],t[e]=function(e){i&&i.call(t,e);e=t.getSubscriptionsCount()+1;void 0!==n&&e!=n&&void 0!==o&&e!=o||t.subsCount(e)},t[a]=function(e){r&&r.call(t,e);e=t.getSubscriptionsCount();void 0!==n&&e!=n&&void 0!==o&&e!=o||t.subsCount(e)}):s.log("already applied subscriptionCount to observable"),null}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],61:[function(o,e,t){!function(n){!function(){"use strict";var e="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null,t="undefined"!=typeof window?window.jQuery.ui.spinner:void 0!==n?n.jQuery.ui.spinner:null;o("console-browserify");if(void 0===t)throw"Cannot find jquery-ui spinner widget dependency!";e.widget("ui.spinner",t,{_adjustValue:function(e){this._super(e);var t=this.options;return e=parseFloat(e.toFixed(this._precision())),null!==t.max&&e>t.max?t.max:null!==t.min&&e<t.min?t.min:e}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],62:[function(o,e,t){!function(n){!function(){"use strict";var e="undefined"!=typeof window?window.jQuery:void 0!==n?n.jQuery:null,t=(o("console-browserify"),"undefined"!=typeof window?window.jQuery.ui.tabs:void 0!==n?n.jQuery.ui.tabs:null);if(void 0===t)throw"Cannot find jquery-ui tabs widget dependency!";e.widget("ui.tabs",t,{_isLocal:function(e){return"true"==e.getAttribute("data-local")||this._superApply(arguments)}})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],63:[function(e,t,n){!function(e){!function(){"use strict";var o="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;o.bindingHandlers.preloader={init:function(e,t){var n=t();void 0===n.preloaded&&(n.preloaded=o.observable(""),n.subscribe(t=function(e){var t;e!=n.preloaded()&&(""!==e?((t=new Image).onload=function(){n.preloaded(e)},t.onerror=function(){n.preloaded(e)},t.src=e):n.preloaded(e))}),t(n()))}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(e,t,n){!function(o){!function(){"use strict";t.exports={init:function(){},addTemplate:function(e,t){var n=o.document.createElement("script");n.setAttribute("type","text/html"),n.setAttribute("id",e),n.text=t,o.document.body.appendChild(n)},removeTemplate:function(e){(e=o.document.getElementById(e))&&e.parentNode.removeChild(e)},getTemplateContent:function(e){return(e=o.document.getElementById(e))?e.innerHTML:void 0}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(e,t,n){!function(a){!function(){"use strict";function t(){var e;(n=void 0)!==r.activeEditor&&null!==r.activeEditor&&void 0!==r.activeEditor.theme&&null!==r.activeEditor.theme&&void 0!==r.activeEditor.theme.panel&&null!==r.activeEditor.theme.panel&&((void 0!==r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._visible&&r.activeEditor.theme.panel._fixed||void 0!==r.activeEditor.theme.panel.state&&r.activeEditor.theme.panel.state.get("visible")&&r.activeEditor.theme.panel.state.get("fixed"))&&r.activeEditor.theme.panel.fixed(!1),null!==(e=void 0!==r.activeEditor.bodyElement?r.activeEditor.bodyElement:r.activeEditor.dom.settings.root_element)&&void 0!==e.classList&&e.classList.contains("mce-edit-focus")&&(r.activeEditor.nodeChanged(),r.activeEditor.theme.panel.visible(!0),r.activeEditor.theme.panel.layoutRect().y<=40&&r.activeEditor.theme.panel.moveBy(0,40-r.activeEditor.theme.panel.layoutRect().y))),void 0!==r.activeEditor&&null!==r.activeEditor&&void 0!==r.activeEditor.container&&null!==r.activeEditor.container&&void 0!==r.activeEditor.ui&&null!==r.activeEditor.ui&&null!==r.activeEditor.container.offsetParent&&r.activeEditor.ui.show()}var n,o="undefined"!=typeof window?window.ko:void 0!==a?a.ko:null,i="undefined"!=typeof window?window.jQuery:void 0!==a?a.jQuery:null,r=(e("console-browserify"),"undefined"!=typeof window?window.tinymce:void 0!==a?a.tinymce:null);o.bindingHandlers.wysiwygScrollfix={scroll:function(e){n&&a.clearTimeout(n),n=a.setTimeout(t,50)},init:function(e){o.utils.domNodeDisposal.addDisposeCallback(e,function(){i(e).off("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}),i(e).on("scroll",o.bindingHandlers.wysiwygScrollfix.scroll)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],66:[function(t,e,n){!function(e){!function(){"use strict";function h(e,t,n,o){var i=n.scrollTop(),o=i-o-(t?20:-20);void 0!==n[0].nodeType?(t={scrollTop:Math.round(o)+"px"},i=Math.round(Math.abs(o-i)),n.stop().animate(t,i)):n.scrollTop(o)}var b="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,v="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,y=t("console-browserify");v.bindingHandlers.scrollIntoView={update:function(e,t,n,o,i){var r,a,s,l,d,c,u,p,f,g;if(v.utils.unwrapObservable(t()))try{for(;1!==e.nodeType;)if(null==(e=null!==e.nextElementSibling?e.nextElementSibling:e.parentElement))return;1===e.nodeType&&(r=b(e).scrollParent(),s=!1,9==r[0].nodeType?(r=b(r[0].defaultView),s=!(a=0)):a=r.offset().top,l=r.height(),d=r.scrollTop(),c=a+l,p=(u=b(e)).offset().top,s&&(p-=d),g=p+(f=u.height()),a<p&&p+f<c||(f<l?(p<a&&h(0,!0,r,a-p),c<g&&h(0,!1,r,c-g)):(p<a&&g<c&&h(0,!1,r,c-g),a<p&&c<g&&h(0,!0,r,a-p))))}catch(e){y.log("TODO exception scrolling into view",e)}}},v.virtualElements.allowedBindings.scrollIntoView=!0}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],67:[function(t,e,n){!function(s){!function(){"use strict";var r="undefined"!=typeof window?window.jQuery:void 0!==s?s.jQuery:null,a="undefined"!=typeof window?window.ko:void 0!==s?s.ko:null,e=t("@selectize/selectize");e.prototype.positionDropdownOriginal||(e.prototype.positionDropdownOriginal=e.prototype.positionDropdown,e.prototype.positionDropdown=function(){for(var e=this.$wrapper,t=0;null!==e&&t<100;){if("visible"!==e.css("overflow")){e.offset().top+=this.$control.outerHeight(!0);var n=this.$dropdown.prop("scrollHeight")+5,o=this.$control.get(0).getBoundingClientRect().top,i=this.$wrapper.height(),o=o+n+i>s.innerHeight?"top":"bottom",o={width:this.$control.outerWidth(),left:0,top:"top"==o?-n:i};this.$dropdown.css(o);break}if("HTML"==e[0].tagName)break;e=e.offsetParent(),t++}}),a.bindingHandlers.selectize={init:function(e,t,n){var o=r(e),i=function(e,t,n){return'<div class="'+e+'">'+n(t.text)+"</div>"},n=n.get("selectizeRenderer");o.selectize({maxItems:1,closeAfterSelect:!0,selectOnTab:!0,onChange:function(e){t()(e)},render:{option:(i=null!=n?n:i).bind(void 0,"option"),item:i.bind(void 0,"item")}}),a.utils.domNodeDisposal.addDisposeCallback(e,function(){o[0].selectize.destroy()})},update:function(e,t){t=t();e.selectize.setValue(a.utils.unwrapObservable(t),!0)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@selectize/selectize":2}],68:[function(i,r,e){!function(e){!function(){"use strict";var n="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,t=i("./script-template.js"),o={};n.templateSources.stringTemplate=function(e,t){this.templateName=e,this.template=t,this._data={}},n.utils.extend(n.templateSources.stringTemplate.prototype,{data:function(e,t){if(1===arguments.length)return this._data[e];this._data[e]=t},text:function(e){if(0===arguments.length)return this.template;this.template=e}}),r.exports={init:function(){var e,t;n.setTemplateEngine((e=new n.nativeTemplateEngine,t=e.makeTemplateSource,e.makeTemplateSource=function(e){return void 0!==o[e]?new n.templateSources.stringTemplate(e,o[e]):t(e)},e))},addTemplate:function(e,t){o[e]=t},removeTemplate:function(e){void 0!==o[e]?o[e]=void 0:t.removeTemplate(e)},getTemplateContent:function(e){return void 0!==o[e]?o[e]:t.getTemplateContent(e)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./script-template.js":64}],69:[function(t,e,n){!function(e){!function(){"use strict";function s(e,t){var n=e;if(void 0===t){e=d.parse(e);if("stylesheet"!=e.type||void 0===e.stylesheet)throw l.log("unable to process styleSheet",e),"Unable to parse stylesheet";t=e.stylesheet.rules}for(var o=t.length-1;0<=o;o--){if("media"==t[o].type||"supports"==t[o].type)n=s(n,t[o].rules);else if("comment"!=t[o].type)if("rule"==t[o].type){for(var i=t[o].selectors,r="",a=0;a<i.length;a++)0<r.length&&(r+=", "),r+="#main-wysiwyg-area "+i[a];n=d.replaceStyle(n,t[o].position.start,t[o].position.end,r)}else l.error("Unsupported rule type",t[o].type,"while parsing <style> rules");t[o].position.start}return n}var r="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,l=t("console-browserify"),d=t("../converter/cssparser.js");r.bindingHandlers.stylesheet={_makeComputedValueAccessor:function(t){return function(){var e=r.utils.unwrapObservable(t());return s(e)}},init:function(e,t,n,o,i){return r.bindingHandlers.text.init()},update:function(e,t,n,o,i){return void 0!==i.templateMode&&"wysiwyg"==i.templateMode&&(t=r.bindingHandlers.stylesheet._makeComputedValueAccessor(t)),r.bindingHandlers.text.update(e,t,n,o,i)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../converter/cssparser.js":77,"console-browserify":10}],70:[function(e,t,n){!function(e){!function(){"use strict";var r="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;r.bindingHandlers.syncedhoverclass={init:function(t,e){void 0===e().ref.syncedHoverObservable&&(e().ref.syncedHoverObservable=r.observable(!1));var n=e().ref.syncedHoverObservable,o=e().class,i=(r.applyBindingsToNode(t,{event:{mouseenter:function(){n(!0)},mouseleave:function(){n(!1)}}}),n.subscribe(function(e){r.utils.toggleDomNodeCssClass(t,o,e)}));r.utils.domNodeDisposal.addDisposeCallback(t,function(){i.dispose()})}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(t,e,n){!function(e){!function(){"use strict";function r(e,t){return function(){return a.utils.extend(t,e()),t}}var a="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,s="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,l=("undefined"!=typeof window||void 0!==e&&e.kojqui,t("console-browserify"),{show:{delay:500},track:!0,items:'[title][title!=""][title!=" "]'});a.bindingHandlers.tooltips={init:function(e,t,n,o,i){if(void 0!==s.fn.tooltip&&void 0!==a.bindingHandlers.tooltip)return a.bindingHandlers.tooltip.init(e,r(t,l),n,o,i)},update:function(e,t,n,o,i){if(void 0!==s.fn.tooltip&&void 0!==a.bindingHandlers.tooltip)return a.bindingHandlers.tooltip.update(e,r(t,l),n,o,i)}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],72:[function(t,e,n){!function(e){!function(){"use strict";var a="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t("console-browserify");a.bindingHandlers.validatedValue={init:function(t,n,e){var o,i,r=n;void 0!==t.pattern&&(o=new RegExp("^(?:"+t.pattern+")$"),i=a.computed({read:function(){var e=a.utils.unwrapObservable(n());return null===e||""===e||o.test(e)?t.classList.remove("invalid"):t.classList.add("invalid"),e},write:a.isWriteableObservable(n())&&function(e){a.selectExtensions.writeValue(t,e);e=a.selectExtensions.readValue(t);n()(e)},disposeWhenNodeIsRemoved:t}),r=function(){return i}),a.bindingHandlers.value.init(t,r,e)}},a.expressionRewriting._twoWayBindings.validatedValue=!0}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],73:[function(t,e,n){!function(e){!function(){"use strict";var d="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null;t("console-browserify"),d.bindingHandlers.virtualAttr={update:function(e,t){8!==e.nodeType&&d.bindingHandlers.attr.update(e,t)}},d.virtualElements.allowedBindings.virtualAttr=!0;d.bindingHandlers.virtualAttrStyles={update:function(e,t,n,o,i){if(8!==e.nodeType)for(var r=["style"],a=((void 0===i.templateMode||"wysiwyg"!=i.templateMode)&&r.push("replacedstyle"),function(e){var t,n,o=!1;for(t in e)!e.hasOwnProperty(t)||null!==(n=d.utils.unwrapObservable(e[t]))&&(0==o?o="":o+="; ",o+=t.split("$")[0]+": "+n);return o}(t())),s=0;s<r.length;s++){var l=r[s];!1===a||null==a?e.removeAttribute(l):e.setAttribute(l,a.toString())}}},d.virtualElements.allowedBindings.virtualAttrStyles=!0,d.bindingHandlers.virtualStyle={update:function(e,t){8!==e.nodeType&&d.bindingHandlers.style.update(e,t)}},d.virtualElements.allowedBindings.virtualStyle=!0,d.bindingHandlers.virtualHtml={init:d.bindingHandlers.html.init,update:function(e,t){if(8===e.nodeType){var n=d.utils.unwrapObservable(t());if(d.virtualElements.emptyNode(e),null!=n){"string"!=typeof n&&(n=n.toString());var o=d.utils.parseHtmlFragment(n);if(o)for(var i=e.nextSibling,r=0,a=o.length;r<a;r++)i.parentNode.insertBefore(o[r],i)}}else d.bindingHandlers.html.update(e,t);return{controlsDescendantBindings:!0}}},d.virtualElements.allowedBindings.virtualHtml=!0}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],74:[function(e,t,n){!function(m){!function(){"use strict";var f="undefined"!=typeof window?window.tinymce:void 0!==m?m.tinymce:null,h="undefined"!=typeof window?window.jQuery:void 0!==m?m.jQuery:null,b="undefined"!=typeof window?window.ko:void 0!==m?m.ko:null,v=e("console-browserify");function y(i,r,a){var s;return function(){function e(){s=null,i.apply(t,n)}var t=this,n=arguments,o=!s;m.clearTimeout(s),s=o?m.setTimeout(e,a):m.setTimeout(e,r)}}e("./eventable.js"),b.bindingHandlers.wysiwygOrHtml={init:function(e,t,n,o,i){return void 0===i.templateMode||"wysiwyg"!=i.templateMode?b.bindingHandlers.virtualHtml.init():b.bindingHandlers.wysiwyg.init(e,t,n,o,i)},update:function(e,t,n,o,i){if(void 0===i.templateMode||"wysiwyg"!=i.templateMode)return b.bindingHandlers.virtualHtml.update(e,t,n,o,i)}},b.virtualElements.allowedBindings.wysiwygOrHtml=!0,b.bindingHandlers.wysiwygHref={init:function(e,t,n,o,i){8!==e.nodeType&&(t(),void 0===i.templateMode||"wysiwyg"!=i.templateMode?e.setAttribute("target","_new"):void 0!==n().wysiwygOrHtml?e.setAttribute("href","javascript:void(0)"):(e.removeAttribute("href"),e.setAttribute("disabledhref","#")))},update:function(e,t,n,o,i){8!==e.nodeType&&(i=void 0===i.templateMode||"wysiwyg"!=i.templateMode,t=b.utils.unwrapObservable(t()),i&&(!1===t||null==t?e.removeAttribute("href"):e.setAttribute("href",t.toString())))}},b.virtualElements.allowedBindings.wysiwygHref=!0,b.bindingHandlers.wysiwygSrc={preload:!0,preloadingClass:"mo-preloading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="__WIDTH__" height="__HEIGHT__"><defs><pattern id="pinstripe" patternUnits="userSpaceOnUse" width="56.568" height="56.568" patternTransform="rotate(135)"><line x1="14.142" y1="0" x2="14.142" y2="56.568" stroke="#808080" stroke-width="28.284" /></pattern></defs><rect width="100%" height="100%" fill="#707070"/><rect width="100%" height="100%" fill="url(#pinstripe)" /></svg>',convertedUrl:function(e,t,n,o){var i=-1==e.indexOf("?")?"?":"&";return e+i+"method="+t+"&width="+n+(null!==o?"&height="+o:"")},placeholderUrl:function(e,t,n){},placeholderText:function(e,t){return e&&t?e+"x"+t:e?"w"+e:"h"+t},init:function(e,t,n,o,i){b.bindingHandlers.wysiwygSrc.preload&&h(e).data("preloadimg",new Image)},update:function(n,e,t,o,i){var i=void 0!==i.templateMode&&"wysiwyg"==i.templateMode,r=e(),r=(void 0===e.imagePreloadAndSetElementSrc&&(e.imagePreloadAndSetElementSrc=y(function(t){b.bindingHandlers.wysiwygSrc.preloadingClass&&n.classList.add(b.bindingHandlers.wysiwygSrc.preloadingClass);var e=h(n).data("preloadimg");e.onload=function(){n.setAttribute("src",t),b.bindingHandlers.wysiwygSrc.preloadingClass&&n.classList.remove(b.bindingHandlers.wysiwygSrc.preloadingClass)},e.onerror=function(e){v.warn("Unable to preload image",t,e),n.setAttribute("src",t),b.bindingHandlers.wysiwygSrc.preloadingClass&&n.classList.remove(b.bindingHandlers.wysiwygSrc.preloadingClass)},e.src=t},500,100),e.setElementSrc=y(function(e){n.setAttribute("src",e)},500,100)),b.utils.unwrapObservable(r)),a=b.utils.unwrapObservable(r.src),s=b.utils.unwrapObservable(r.placeholder),l=b.utils.unwrapObservable(r.width),d=b.utils.unwrapObservable(r.height),c=null,u=b.utils.unwrapObservable(s.width),p=b.utils.unwrapObservable(s.height),f=b.bindingHandlers.wysiwygSrc.placeholderText(l,d),g=!1;!1===a||null==a||""===a?("object"==typeof s&&null!==s&&(c=b.bindingHandlers.wysiwygSrc.placeholderUrl(u,p,f)),g=!0):(s=(s=b.utils.unwrapObservable(r.method))||(0<l&&0<d?"cover":"resize"),c=b.bindingHandlers.wysiwygSrc.convertedUrl(a,s,l,d)),r=u,a=p,s=f,u=g,null==(p=c)||""==p?n.removeAttribute("src"):null===n.getAttribute("src")?n.setAttribute("src",p):n.getAttribute("src")!==p&&(b.bindingHandlers.wysiwygSrc.preload&&i?("string"==typeof b.bindingHandlers.wysiwygSrc.svg&&u&&(u=b.bindingHandlers.wysiwygSrc.svg.replace("__WIDTH__",r).replace("__HEIGHT__",a).replace("__TEXT__",s),n.setAttribute("src","data:image/svg+xml;base64,"+m.btoa(u))),e.imagePreloadAndSetElementSrc(p)):e.setElementSrc(p)),null!=l?n.setAttribute("width",l):n.removeAttribute("width"),null!=d?n.setAttribute("height",d):n.removeAttribute("height")}},b.bindingHandlers.wysiwygId={init:function(e,t,n,o,i){void 0!==i.templateMode&&"wysiwyg"==i.templateMode&&e.setAttribute("id",b.utils.unwrapObservable(t()))},update:function(e,t,n,o,i){void 0!==i.templateMode&&"wysiwyg"==i.templateMode&&e.setAttribute("id",b.utils.unwrapObservable(t()))}},b.virtualElements.allowedBindings.wysiwygId=!0,b.bindingHandlers.wysiwygClick={init:function(e,t,n,o,i){void 0!==i.templateMode&&"wysiwyg"==i.templateMode&&b.bindingHandlers.click.init(e,t,n,o,i)}},b.virtualElements.allowedBindings.wysiwygClick=!0,b.bindingHandlers.wysiwygCss={update:function(e,t,n,o,i){void 0!==i.templateMode&&"wysiwyg"==i.templateMode&&b.bindingHandlers.css.update(e,t,n,o,i)}},b.virtualElements.allowedBindings.wysiwygCss=!0,b.bindingHandlers.wysiwygImg={makeTemplateValueAccessor:function(o,i){return function(){var e=void 0!==i.templateMode&&"wysiwyg"==i.templateMode,t=o(),n=b.utils.peekObservable(t);return b.utils.unwrapObservable(t),{name:e?n._editTemplate:n._template,templateEngine:b.nativeTemplateEngine.instance}}},init:function(e,t,n,o,i){return b.bindingHandlers.template.init(e,b.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i))},update:function(e,t,n,o,i){return i=i.extend(t()),b.bindingHandlers.template.update(e,b.bindingHandlers.wysiwygImg.makeTemplateValueAccessor(t,i),n,o,i)}},b.virtualElements.allowedBindings.wysiwygImg=!0;function g(t,e){try{return this.originalFire.apply(this,arguments)}catch(e){v.warn("Cought tinymce exception while firing editor event",t,e)}}b.bindingHandlers.wysiwyg={debug:!1,useTarget:!1,currentIndex:0,standardOptions:{},initializingClass:"wysiwyg-loading",removeSelectionOnBlur:!0,emptyClass:void 0,fullOptions:{toolbar1:"bold italic forecolor backcolor hr styleselect removeformat | link unlink | pastetext code",plugins:["link","hr","paste","lists","textcolor","code"]},init:function(n,t,e,o,i){b.bindingHandlers.focusable.init(n);var r,a=b.bindingHandlers.wysiwyg.debug&&"function"==typeof v.debug,s=(b.bindingHandlers.wysiwyg.useTarget?r="@target_"+ ++b.bindingHandlers.wysiwyg.currentIndex:(r=n.getAttribute("id"))||(r="wysiwyg_"+ ++b.bindingHandlers.wysiwyg.currentIndex,n.setAttribute("id",r)),b.bindingHandlers.wysiwyg.initializingClass&&n.classList.add(b.bindingHandlers.wysiwyg.initializingClass),b.utils.domNodeDisposal.addDisposeCallback(n,function(){a&&v.debug("Editor for selector",r,"is being removed..."),f.remove("#"+n.getAttribute("id")),a&&v.debug("Editor for selector",r,"has been removed.")}),t());if(!b.isObservable(s))throw"Wysiwyg binding called with non observable";if(8===n.nodeType)throw"Wysiwyg binding called on virtual node, ignoring...."+n.innerHTML;var l,d=!0,e=!!e.has("wysiwygStyle")&&e.get("wysiwygStyle"),c=("singleline"==e?d=!1:!1===e&&(d="DIV"==n.tagName||"TD"==n.tagName),!1),u=!1,p={inline:!0,hidden_input:!1,plugins:["paste"],toolbar1:"bold italic",toolbar2:"",preview_styles:!1,paste_as_text:!0,language:"en",schema:"html5",extended_valid_elements:"strong/b,em/i",menubar:!1,skin:"gray-flat",_use_raw_format:!d,forced_root_block:d?"p":"",init_instance_callback:function(e){var t;a&&v.debug("Editor for selector",r,"is now initialized."),b.bindingHandlers.wysiwyg.initializingClass&&n.classList.remove(b.bindingHandlers.wysiwyg.initializingClass),"function"==typeof v.debug&&"inline"==(t=(n.currentStyle||m.getComputedStyle(n,null)).display)&&v.debug("Initializing an editor on an inline element: please note that while it may work, this is unsupported because of a multitude of browser issues",n.tagName,t,r)},setup:function(e){a&&v.debug("Editor for selector",r,"is now in the setup phase.");function t(){0==(n.textContent||n.innerText||"").trim().length?n.classList.add(b.bindingHandlers.wysiwyg.emptyClass):n.classList.remove(b.bindingHandlers.wysiwyg.emptyClass)}e.on("change redo undo",function(){if(!c)try{u=!0,s(e.getContent(e.getParam("_use_raw_format")?{format:"raw"}:{}))}catch(e){v.warn("Unexpected error setting content value for",r,e)}finally{u=!1}b.bindingHandlers.wysiwyg.emptyClass&&t()}),b.bindingHandlers.wysiwyg.emptyClass&&e.on("keyup",function(){t()}),e.on("focus",function(){e.nodeChanged(),e.getElement().click()}),b.bindingHandlers.wysiwyg.removeSelectionOnBlur&&e.on("blur",function(e){m.getSelection().removeAllRanges()}),e.getParam("_use_raw_format")&&e.on("BeforeSetContent",function(e){e.initial&&(e.format="raw")}),void 0===e.originalFire&&(e.originalFire=e.fire,e.fire=g),l=e}};return b.bindingHandlers.wysiwyg.useTarget?p.target=n:p.selector="#"+r,b.utils.extend(p,b.bindingHandlers.wysiwyg.standardOptions),d&&b.utils.extend(p,b.bindingHandlers.wysiwyg.fullOptions),b.bindingHandlers.wysiwyg[e+"Options"]&&b.utils.extend(p,b.bindingHandlers.wysiwyg[e+"Options"]),m.setTimeout(function(){a&&v.debug("Editor for selector",r,"is being inizialized ...");var e=f.init(p);a&&v.debug("Editor for selector",r,"init has just been called returning",e),e.then(function(){a&&v.debug("Editor for selector",r,"init promise has resolved.")},function(e){v.log("Editor for selector",r,"init promise has failed.",e)})}),b.computed(function(){var e=b.utils.unwrapObservable(t());if(!u){try{c=!0,void 0!==l?l.setContent(e,p._use_raw_format?{format:"raw"}:{}):b.utils.setHtml(n,e)}catch(e){v.warn("Exception setting content to editable element",typeof l,e)}c=!1}},null,{disposeWhenNodeIsRemoved:n}),{controlsDescendantBindings:!0}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventable.js":54,"console-browserify":10}],75:[function(e,t,n){"use strict";var a=e("console-browserify"),r=function(e,t){return e.hasOwnProperty(t)&&!t.startsWith("_")&&"customStyle"!==t&&"type"!==t&&null!==e[t]&&void 0!==e[t]._usecount&&0<e[t]._usecount},s=function(e,t,n){var o,i,r=t._defaultValues.hasOwnProperty(e)&&(null!==t._defaultValues[e]||t._globalStyles.hasOwnProperty(e)&&null!==t._globalStyles[e]);return r||0<(i=e.indexOf("."))&&(o=e.substr(0,i),i=e.substr(i+1),t.hasOwnProperty(o)&&(r=s(i,t[o]))),!r&&n&&(a.error("Missing default value or global style in",n,"for",e,t),a.log("A default value for a variable is often automatically found by Mosaico but sometimes you have to explicitly declare it. One way is to declare it in the @supports -ko-blockdefs 'properties: variableName=defaultValue', or in a data-ko-properties='variableName=defaultValue' attribute in the element where you first use it.")),r},l=function(e,t){var n,o=!0;for(n in t)if(r(t,n))if("block"==t[n]._context)o=l(e+"/"+n,t[n])&&o;else if(t[n]._complex)for(var i in t[n])r(t[n],i)&&(o=s(n+"."+i,t,e)&&o);else o=s(n,t,e)&&o;return o};t.exports=function(e){var t,n,o=!0;for(n in e)r(e,n)&&(e[n]._context,t=e[n],o=l(n,t)&&o);return o}},{"console-browserify":10}],76:[function(e,t,n){"use strict";function u(e,t,n,o,i){var r,a,s,l=0;if(void 0===i&&(i=!1),void 0!==t&&"function"==typeof t.splice)for(r={},c=0;c<t.length;c++)r[t[c].type]=t[c];else r=t;for(s in e)if(e.hasOwnProperty(s))if(a=void 0!==o?o+"."+s:s,n.hasOwnProperty(s))if(typeof n[s]!=typeof e[s])null!==n[s]&&null!==e[s]&&("string"==typeof n[s]?String(e[s])!=e[s]&&(p.log("TODO Different type 1 ",a,typeof n[s],typeof e[s],n[s],e[s]),l=Math.max(l,2)):"number"==typeof n[s]?Number(e[s])!=e[s]&&(p.log("TODO Different type 2 ",a,typeof n[s],typeof e[s],n[s],e[s]),l=Math.max(l,2)):(p.log("TODO Different type 3 ",a,typeof n[s],typeof e[s],n[s],e[s]),l=Math.max(l,2)));else if("object"==typeof e[s])if(null!==e[s])if(void 0!==e[s].splice){if(0<e[s].length)if(0<n[s].length){for(var d=0,c=0;c<n[s].length;c++)if("string"==typeof n[s][c].type){for(;d<e[s].length&&e[s][d].type!==n[s][c].type;)p.log("ignoring ",a,e[s][d].type," block type in reference not found in model"),d++;if(d>=e[s].length){p.log("WARN cannot find ",a,n[s][c].type," block in reference"),l=Math.max(l,2);break}l=Math.max(l,u(e[s][d],void 0,n[s][c],a+"["+c+"."+n[s][c].type+"]"))}}else for(c=0;c<e[s].length;c++)l="string"!=typeof e[s][c].type?(p.log("TODO found an object with no type",a,e[s][c]),Math.max(l,2)):r.hasOwnProperty(e[s][c].type)?Math.max(l,u(r[e[s][c].type],r,e[s][c],a+"["+c+"."+e[s][c].type+"]")):(p.warn("TODO the model uses a block type not defined by the template. REMOVING IT!!",a,e[s][c]),e[s].splice(c,1),c--,Math.max(l,2))}else null===n[s]?i?(p.log("WARN Null object in model ",a,"instead of",e[s],"deleting it"),l=Math.max(l,2),delete e[s]):(p.log("INFO Null object in model ",a,"instead of",e[s],"cloning it from the reference"),l=Math.max(l,1),n[s]=e[s]):l=Math.max(l,u(e[s],r,n[s],a,i));else null!==n[s]&&(p.log("TODO Null in reference but not null in model",a,n[s]),l=Math.max(l,2));else"string"!=typeof e[s]&&"boolean"!=typeof e[s]&&"number"!=typeof e[s]&&(p.log("TODO unsupported type",a,typeof e[s]),l=Math.max(l,2));else i?(p.warn("WARN Property ",a,"found in model is not defined by template: removing it!"),l=Math.max(l,2),delete e[s]):(p.log("INFO Property ",a,"missing in model, cloning from reference!"),l=Math.max(l,1),n[s]=e[s]);return l=i?l:Math.max(l,u(n,r,e,void 0!==o?o+"!R":"!R",!0))}var p=e("console-browserify");t.exports=u},{"console-browserify":10}],77:[function(e,t,n){"use strict";var o=e("mensch/lib/parser.js");t.exports={parse:function(e){return o(e,{comments:!0,position:!0})},replaceStyle:function(e,t,n,o){for(var i=e.split("\n"),r=0,a=0,s=1;s<t.line;s++)r+=i[s-1].length+1;if(r+=t.col,null!==n){for(var l=1;l<n.line;l++)a+=i[l-1].length+1;a+=n.col}else a+=e.length+1;return e.substr(0,r-1)+o+e.substr(a-1)}}},{"mensch/lib/parser.js":37}],78:[function(e,t,n){"use strict";var S=e("./utils.js").addSlashes,C=e("./utils.js"),j=e("./cssparser.js"),A=e("console-browserify"),$=e("./domutils.js"),T=function(e,t,n,o,i){null==i&&(i=0);for(var r=(o=null==o?e.length:o)-1;i<=r;r--)if("property"==e[r].type&&e[r].name==t)return C.declarationValueUrlPrefixer(e[r].value,n);return o<e.length?T(e,t,n,e.length,o):null},I=function(e){return e.replace(/-([a-z])/g,function(e,t,n,o){return t.toUpperCase()})};function s(e,t,n,o,i,r){for(var a={},s=t.length-1;0<=s;s--)if("property"==t[s].type)if(!0===r&&"display"==t[s].name&&"none"==t[s].value)null!==e&&(e=j.replaceStyle(e,t[s].position.start,t[s].position.end,""));else{var l=t[s].name.match(/^-ko-(bind-|attr-)?([A-Za-z0-9-]*?)(-if|-ifnot)?$/);if(null!==l){var d,c,u,p="attr-"==l[1],f="bind-"==l[1],g=l[2],h="-if"==l[3]||"-ifnot"==l[3];if(h){l=t[s].name.substr(0,t[s].name.length-l[3].length);if(null===T(t,l,n))throw"Unable to find declaration "+l+" for "+t[s].name}else{if((p||f)&&void 0===i&&null!==e)throw"Attributes and bind declarations are only allowed in inline styles!";var b,l=!0,v=g;if(p?(c=$.getAttribute(i,g),l=!1,b="virtualAttr"):f?(b=null,"text"==g||"stylesheet"==g?void 0!==i?c=$.getInnerText(i):l=!1:"html"==g&&void 0!==i?c=$.getInnerHtml(i):l=!1):(l=null!==e,b="virtualStyle",v=I(g),c=T(t,g,n,s)),l&&null===c)throw A.error("Cannot find default value for",t[s].name,t,i,e,t[s]),"Cannot find default value for "+t[s].name+": "+t[s].value+" in "+i+" ("+typeof e+"/"+g+")";d=function(e,t,n,o,i,r,a){try{var s=C.expressionBinding(o,t,i),l=T(e,n+"-if",r),d=!1;if(null===l)l=T(e,n+"-ifnot",r),d=!0;else if(null!==T(e,n+"-ifnot",r))throw"Unexpected error: cannot use both -if and -ifnot property conditions";if(null!==l)try{var c=C.conditionBinding(l,t);c.match(/^[^' ]*[^' \)]$/)&&(c="ko.utils.unwrapObservable("+c+")"),s.match(/^[^' ]*[^' \)]$/)&&(s="ko.utils.unwrapObservable("+s+")"),s=(c=d?"!"+c:c)+" ? "+s+" : null"}catch(e){throw A.error("Unable to deal with -ko style binding condition",l,n),e}return s}catch(e){throw A.error("Model ensure path failed",e.stack,"name",n,"value",o,"default",i,"element",a),e}}(t,o,t[s].name,t[s].value,c,n),"virtualAttr"==b&&"href"==v&&(v="wysiwygHref",(b=null)!=i&&$.removeAttribute(i,"href")),null!==b?(void 0===a[b]&&(a[b]={}),a[b][v]=d):a[v]=d}if(null!==e)try{e=null!=i?j.replaceStyle(e,t[s].position.start,t[s].position.end,""):(u=h?"":g+": \x3c!-- ko text: "+d+" --\x3e"+c+"\x3c!-- /ko --\x3e",j.replaceStyle(e,t[s].position.start,t[s].position.end,u))}catch(e){throw A.warn("Remove style failed",e,"name",t[s]),e}}else{p=C.declarationValueUrlPrefixer(t[s].value,n);if(p!=t[s].value&&null!==e)try{e=j.replaceStyle(e,t[s].position.start,t[s].position.end,t[s].name+": "+p)}catch(e){throw A.log("Remove style failed replacing url",e,"name",t[s]),e}for(var y,m="virtualAttrStyles",f=(void 0===a[m]&&(a[m]={}),I(t[s].name)),l=void 0!==a.virtualStyle?a.virtualStyle[f]:void 0,w=""+t[s].name;void 0!==a[m][w];)w=(y=w.split("$"))[0]+"$"+(1<y.length?Math.round(y[1])+1:1);void 0!==l?(a[m][w]=l,delete a.virtualStyle[f]):a[m][w]="'"+S(p)+"'"}}if(null!=i){for(var k in a.virtualStyle)if(a.virtualStyle.hasOwnProperty(k))throw A.error("Unexpected virtualStyle binding after conversion to virtualAttr.style",k,a.virtualStyle[k],e,a,t),"Unexpected virtualStyle binding after conversion to virtualAttr.style for "+k;delete a.virtualStyle;var x=$.getAttribute(i,"data-bind"),x=(null!==x?x+", ":"")+E(a);x?$.setAttribute(i,"data-bind",x):$.removeAttribute(i,"data-bind")}if(null!=e)return e;var O,_=!1;for(O in a.virtualStyle)if(a.virtualStyle.hasOwnProperty(O)){_=!0;break}return _?void 0!==a.virtualAttrStyles&&(x=a.virtualAttrStyles,delete a.virtualAttrStyles,a.virtualAttrStyles=x):delete a.virtualStyle,E(a)}var E=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push((-1!==t.indexOf("-")?"'"+S(t)+"'":t)+": "+("object"==typeof e[t]?"{ "+E(e[t])+" }":e[t]));return n.reverse().join(", ")};t.exports={elaborateElementStyleDeclarations:function(e,t,n,o,i){var r="#{\n"+e+"}",a=j.parse(r),r=s(r,a.stylesheet.rules[0].declarations,t,n,o,i);return null==r?e:r.substring(3,r.length-1)},elaborateDeclarationsAndReplaceStyles:function(e,t,n,o){t=s(e,t,n,o);return null==t?e:t},elaborateDeclarationsAndReturnStyleBindings:function(e,t,n){return s(null,e,t,n)},conditionBinding:C.conditionBinding,declarationValueUrlPrefixer:C.declarationValueUrlPrefixer}},{"./cssparser.js":77,"./domutils.js":79,"./utils.js":85,"console-browserify":10}],79:[function(e,t,n){!function(e){!function(){"use strict";var r="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null;t.exports={getAttribute:function(e,t){e=r(e).attr(t);return e=void 0===e?null:e},setAttribute:function(e,t,n){r(e).attr(t,n)},removeAttribute:function(e,t){r(e).removeAttr(t)},getInnerText:function(e){return r(e).text()},getInnerHtml:function(e){return r(e).html()},getLowerTagName:function(e){return(""===e.tagName&&"string"==typeof e.name?e.name:""!==e.tagName?e.tagName:r(e).prop("tagName")).toLowerCase()},setContent:function(e,t){r(e).html(t)},replaceHtml:function(e,t){r(e).replaceWith(t)},removeElements:function(e,t){t&&void 0!==e.detach&&e.detach(),e.remove()},objExtend:function(e,t){if("function"==typeof r.extend)return r.extend(!0,e,t);var n=e,o=JSON.parse(JSON.stringify(t));if(o)for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);return n}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],80:[function(e,t,n){"use strict";function A(e,t,n,o,i){var r,a="";if(void 0===(r=null!==e&&void 0!==e._widget?e._widget:r))throw"Unknown data type for "+t;if(t="focusable: true","edit"==o&&(t+=", event: { focus: function(ui, event) { $($element).click(); } } "),a+='<div class="data-'+r+'">',void 0!==i&&void 0!==i[r]){var s=i[r],l={};if(void 0!==s.parameters)for(var d in s.parameters)s.parameters.hasOwnProperty(d)&&void 0!==e["_"+d]&&(l[d]=e["_"+d]);a+=s.html(n,t,l)}else a+='<input size="7" type="text" value="nothing" data-bind="value: '+n+", "+t+'" />';return a+="</div>"}function $(e,t,n,o){var i;return"object"==typeof t&&null!==t&&void 0===t._widget||void 0!==n&&void 0!==o&&0<o.length&&"object"==typeof e&&void 0!==e[o]&&(i=e[o]),i}var T=e("console-browserify"),I=e("./declarations.js"),b=e("./model.js"),E=e("./utils.js").addSlashes,P=function(e,t,n,o,i,r,a,s,l,d,c,u,p,f,g){if(void 0===l&&(l=0),void 0!==a&&"object"==typeof o&&null!==o&&void 0===o._usecount)return"function"==typeof T.debug&&T.debug("Ignoring",r,"property because it is not used by the template","prop:",a,"type:",s,"level:",l,e._templateName),"";var h=void 0!==u?a+"._defaultComputed":a,b="",v=h,y=1,m=1;if("object"==typeof o&&null!==o&&void 0===o._widget||void 0===u&&(y+=1),void 0===u&&void 0!==d&&(m+=d),void 0!==a&&p&&(b+="\x3c!-- ko ifSubs: { data: "+v+", threshold: "+m+", gutter: "+y+" } --\x3e"),void 0===a||null!==o&&void 0!==o._name||T.log("Missing label for property ",a),void 0===a&&null!==o&&void 0===o._name&&"theme"!==o.type&&T.log("Missing label for object ",o.type),"object"==typeof o&&null!==o&&void 0===o._widget){for(var w,k,x,O,_=function(e,t,n){var o,i,r=[];for(o in e)o.match(/^customStyle$/)||o.match(/^_/)||!e.hasOwnProperty(o)||(i=null!==e[o]&&void 0!==e[o]._category&&"style"==e[o]._category,"id"==o||"type"==o||o.match(/Blocks$/)||("styler"==t?(i||0<n)&&r.push(o):"edit"==t?null===e[o]||void 0===e[o]._category||"content"!=e[o]._category||void 0!==e[o]._context&&"block"==e[o]._context||r.push(o):void 0===t&&r.push(o)));return r}(o,s,l),y="styler"==s&&null!==o&&void 0!==o.customStyle&&void 0!==u,S="",C="",C=(void 0!==a&&"edit"==s&&(S=", click: function(obj, evt) { $root.selectItem("+a+", $data); return false }, clickBubble: false, css: { selecteditem: $root.isSelectedItem("+a+") }, scrollIntoView: $root.isSelectedItem("+a+"), ",C+=" selectable"),y&&(C+=" supportsCustomStyles"),b+='<div class="objEdit level'+l+C+'" data-bind="tooltips: {}'+S+'">',null!==o&&void 0!==o._name?o._name:void 0!==a?"["+a+"]":""),C=y?(S="Stile",null!=i&&void 0!==i._name?S=i._name:T.log("Missing label for theme section ",a,null!==o?o.type:"-"),"<span class=\"blockSelectionMethod\" data-bind=\"text: customStyle() ? $root.ut('template', '"+E(C)+"') : $root.ut('template', '"+E(S)+"')\">Block</span>"):"<span data-bind=\"text: $root.ut('template', '"+E(C)+"')\">"+C+"</span>",i=(b+="<span"+(S=null!==o&&void 0!==o._help?' title="'+E(o._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+E(o._help)+"') }\"":"")+' class="objLabel level'+l+'">'+C+"</span>","edit"==s&&void 0!==o._blockDescription&&(b+="<div class=\"blockDescription\" data-bind=\"html: $root.ut('template', '"+E(o._blockDescription)+"')\">"+o._blockDescription+"</div>"),y&&(b+='<label class="data-boolean blockCheck" data-bind="tooltips: { }"><input type="checkbox" value="nothing" data-bind="focusable: true, checked: customStyle" /><span title="Switch between global and block level styles editing" data-bind="attr: { title: $root.t(\'Switch between global and block level styles editing\') }" class="checkbox-replacer checkbox-replacer-onoff"></span></label>\x3c!-- ko template: { name: \'customstyle\', if: customStyle } --\x3e\x3c!-- /ko --\x3e'),void 0!==a&&(b+="\x3c!-- ko with: "+a+" --\x3e",1==l&&void 0!==a&&void 0!==o._previewBindings&&void 0!==e&&(void 0!==f&&(b+='\x3c!-- ko with: $root.content() --\x3e<div class="objPreview" data-bind="'+f+'"></div>\x3c!-- /ko --\x3e'),void 0!==g&&(b+='\x3c!-- ko with: $parent --\x3e<div class="objPreview" data-bind="'+g+'"></div>\x3c!-- /ko --\x3e'),b+='<div class="objPreview"><div class="objPreviewInner" data-bind="'+I.elaborateDeclarationsAndReturnStyleBindings(o._previewBindings,n,e.bind(this,r+"."))+'"></div></div>')),0===l&&void 0!==o._previewBindings&&(w=I.elaborateDeclarationsAndReturnStyleBindings(o._previewBindings,n,e.bind(this,0<r.length?r+".":""))),b.length),j=0;j<_.length;j++)k=0<r.length?r+"."+_[j]:_[j],"object"==typeof o[_[j]]&&null!==o[_[j]]&&void 0===o[_[j]]._widget||(O=void 0,0===l&&"theme"==_[j]?b+=P(e,t,n,o[_[j]],x,k,_[j],s,0,d,void 0,void 0,p,f):(O=$(c,o[_[j]],_[j],k),b+=P(e,t,n,o[_[j]],x,k,_[j],s,l+1,d,c,O,p,f,w)));for(j=0;j<_.length;j++)k=0<r.length?r+"."+_[j]:_[j],"object"==typeof o[_[j]]&&null!==o[_[j]]&&void 0===o[_[j]]._widget&&(O=void 0,0===l&&"theme"==_[j]?b+=P(e,t,n,o[_[j]],x,k,_[j],s,0,d,void 0,void 0,p,f):(O=$(c,o[_[j]],_[j],k),b+=P(e,t,n,o[_[j]],x,k,_[j],s,l+1,d,c,O,p,f,w)));if(0==b.length-i){if("object"==typeof o&&null!==o&&"template"==o._context)return"";b+='<div class="objEmpty" data-bind="html: $root.t(\'Selected element has no editable properties\')">Selected element has no editable properties</div>'}void 0!==a&&(b+="\x3c!-- /ko --\x3e"),b+="</div>"}else{C=void 0===c?!1:!0;null===o||"object"!=typeof o||void 0!==o._widget?(y=[],void 0!==u&&y.push("css: { notnull: "+a+"() !== null }"),0<(S=null!==o&&void 0!==o._help?' title="'+E(o._help)+"\" data-bind=\"attr: { title: $root.ut('template', '"+E(o._help)+"') }\"":"").length&&y.push("tooltips: {}"),g=0<y.length?'data-bind="'+E(y.join())+'"':"",i=null!==o&&void 0!==o._name?o._name:void 0!==a?"["+a+"]":"",b=(b=(b+='<div class="propEditor '+(C?"checkboxes":"")+'"'+g+">")+"<span"+S+' class="propLabel">'+(i="<span data-bind=\"text: $root.ut('template', '"+E(i)+"')\">"+i+"</span>")+'</span><div class="propInput '+(void 0!==c?"local":"")+'" data-bind="css: { default: '+a+'() === null }">')+A(o,a,h,s,t)+"</div>",void 0!==u&&(b=(b+='<div class="propInput global" data-bind="css: { overridden: '+a+'() !== null }">')+A(o,a,u,s,t)+"</div>",C&&(b=(b+='<div class="propCheck"><label data-bind="tooltips: {}"><input type="checkbox" data-bind="focusable: true, click: function(evt, obj) { $root.localGlobalSwitch('+a+", "+u+"); return true; }, checked: "+a+'() !== null">')+'<span class="checkbox-replacer" data-bind="css: { checked: '+a+"() !== null }, attr: { title: $root.t('This style is specific for this block: click here to remove the custom style and revert to the theme value') }\"></span></label></div>")),b+="</div>"):b+=null===o||"object"!=typeof o?'<div class="propEditor unknown">[A|'+a+"|"+typeof o+"]</div>":'<div class="propEditor unknown">[B|'+a+"|"+typeof o+"]</div>"}return b=void 0!==a&&p?(b=b+"\x3c!-- /ko --\x3e\x3c!-- ko ifSubs: { not: true, data: "+v+", threshold: "+m+", gutter: 0 } --\x3e")+'<span class="label notused">('+a+")</span>\x3c!-- /ko --\x3e":b},v=function(e,t,n,o,i,r,a,s,l,d,c,u){void 0===c&&(c=!0);var p,f,g=b.getDef(e,r),h=b.getDef(e,i),h=(void 0!==h._previewBindings&&"thaeme"!=r&&"styler"==a&&(p=I.elaborateDeclarationsAndReturnStyleBindings(h._previewBindings,o,b.getBindValue.bind(void 0,e,n,i,i,""))),void 0!==d&&d?e[r]._globalStyles:void 0),d=void 0!==d&&d?e[r]._globalStyle:void 0,e=(void 0!==d&&(f=b.getDef(e,"theme")[d.replace(/^(\$theme|_theme_)\./,"")]),b.getBindValue.bind(void 0,e,n,i,r)),n=(e._templateName=r,'<div class="editor">'),i=(n+='<div class="blockType'+(void 0!==h?" withdefaults":"")+'">'+g.type+"</div>",P(e,t,o,g,f,"",void 0,a,u,l,h,d,c,p));0<i.length&&(n+=i),s(n+="</div>",r,a)};t.exports=function(e,t,n,o,i){for(var r,a,s,l,d,c,u,p,f=e._defs,g=e.templateName,h=e._blocks,b=0;b<h.length;b++)r=f,a=t,s=void 0,l=n,d=h[b].root,c=h[b].block,v(r,a,s,l,d,c,"edit",u=o,p=i),v(r,a,s,l,d,c,"styler",u,p,!0);void 0!==f.theme&&v(f,t,void 0,n,g,"theme","styler",o,void 0,!1,!1,-1)}},{"./declarations.js":78,"./model.js":82,"./utils.js":85,"console-browserify":10}],81:[function(n,e,t){"use strict";var o=n("./model.js");e.exports={translateTemplate:function(){var e=n("./parser.js");return e.apply(e,arguments)},wrappedResultModel:function(e){var t=e._defs,e=(e.templateName,o.generateResultModel(e));return n("./wrapper.js")(t,e)},generateResultModel:o.generateResultModel,generateBlockModels:o.generateBlockModels,generateEditors:function(){var e=n("./editor.js");return e.apply(e,arguments)},checkModel:function(){var e=n("./checkmodel.js");return e.apply(e,arguments)},checkDefs:function(){var e=n("./checkdefs.js");return e.apply(e,arguments)}}},{"./checkdefs.js":75,"./checkmodel.js":76,"./editor.js":80,"./model.js":82,"./parser.js":83,"./wrapper.js":86}],82:[function(e,t,n){"use strict";function s(e,t){return _(e,t,!1,!0)}function d(e,t){return t=s(e,t),l(t,e)}function m(e,t){if(e){if(void 0===t._usecount)throw x.error("ERROR trying to bind an unused property while readonly",t),"ERROR trying to bind an unused property"}else void 0===t._usecount&&(t._usecount=0),t._usecount++}function w(e,t,n,o,i,r,a,s){if(n=n(r,a,s),void 0===e[o]._globalStyles[i]){if(t)throw"Cannot find _globalStyle for "+i+" in "+o+"!";(-1!=i.indexOf(".")||"object"==typeof e[o][i]&&void 0!==e[o][i]._widget)&&(e[o]._globalStyles[i]=n)}else if(e[o]._globalStyles[i]!=n)throw"Unexpected conflicting globalStyle [2] for "+o+"/"+i+": old="+e[o]._globalStyles[i]+" new="+n}function k(e,t,n,o,i,r,a,s,l,d){var c,u,p;if(p="_theme_."==a.substr(0,8)?(p=a.indexOf(".",8),"$root.content().theme()."+(c=a.substr(8,p-8))+"()."+(u=a.substr(p+1)).replace(new RegExp("\\.","g"),"().")):"_root_."==a.substr(0,7)?(c=o,"$root.content()."+(u=a.substr(7)).replace(new RegExp("\\.","g"),"().")):(c=i,u=r+a,a.replace(new RegExp("\\.","g"),"().")),void 0===t[c])throw"Cannot find model def for ["+c+"]";var f=u.indexOf("."),g=-1==f?u:u.substr(0,f);if(-1!=c.indexOf("-"))throw"Unexpected char in block name: "+c;if(-1!=g.indexOf("-"))throw"Unexpected char in property name: "+g;if(e)void 0!==t[c]._globalStyle&&void 0!==t[c][g]&&"style"==t[c][g]._category&&(p+="._defaultComputed");else{if(e){if(void 0!==s)throw"Cannot use defaultValue in readonly mode!";if(l)throw"Cannot use overrideDefault in readonly mode for "+c+"/"+u+"/"+l+"!";if(void 0!==d)throw"Cannot set category for "+c+"/"+u+"/"+d+" in readonly mode!";y=_(t,c,!1,!0)}else!1===t[c]._writeable&&x.log("TODO debug use cases for this condition",c,u),y=_(t,c,!1===t[c]._writeable);if(null===y)throw"Unexpected model for ["+c+"]";if(void 0===y[g]){if(e)throw"Cannot find path "+g+" for "+c+"!";O(t,c,g),y=_(t,c,!1)}void 0!==t[c]._globalStyle&&void 0!==t[c][g]&&null!==t[c][g]&&"style"==t[c][g]._category&&(p+="._defaultComputed");var h=y;try{if(m(e,h),-1!=f){var b=u;do{var v=b.substr(0,f);if(void 0===h[v])throw"Found an unexpected prop "+v+" for model "+c+" for "+u}while(h=h[v],m(e,h),-1!=(f=(b=b.substr(f+1)).indexOf(".")));if(void 0===h[b]||null===h[b])throw"Found an unexpected path termination "+b+" for model "+c+" for "+u;h=h[b]}else h=h[u];if(null==h)throw"Unexpected null model for "+c+"/"+r+"/"+a;void 0!==d&&(h._category=d),m(e,h)}catch(e){throw x.error("Property lookup exception",e,c,u,i,a,t),e}if(void 0!==t[c]._globalStyle&&"object"==typeof t[c][g]&&null!==t[c][g]&&void 0!==t[c][g]._category&&"style"==t[c][g]._category){var y=k.bind(void 0,e,t,n,o,i,""),r=-1!=u.indexOf(".")?u.substr(u.indexOf(".")):"";if(-1!=r.indexOf(".",1))throw"TODO unsupported object nesting! "+u;d=t[c]._globalStyle+"."+g,a=("object"==typeof t[c][g]&&null!==t[c][g]&&void 0!==t[c][g]._globalStyle&&(d=t[c][g]._globalStyle),""!==r&&w(t,e,y,c,g,d,void 0,!1),d+r);if(void 0===s&&null!==t[c]._defaultValues[u]&&(s=t[c]._defaultValues[u]),w(t,e,y,c,u,a,s,l),void 0!==s){if(e)throw"Cannot set a new theme default value ("+s+") for "+a.substr(7)+" while in readonly mode!";n("default",a.substr(7),s)}s=null}if(void 0!==s)if(void 0===t[c]._defaultValues[u]||void 0!==l&&l){if(e)throw"Cannot set new _defaultValues [1] for "+u+" in "+c+"!";t[c]._defaultValues[u]=s}else if(null===s){if(e&&null!==t[c]._defaultValues[u])throw"Cannot set new _defaultValues [2] for "+u+" in "+c+"!";t[c]._defaultValues[u]=null}else if(t[c]._defaultValues[u]!=s)throw"Trying to set a new default value for "+c+" "+u+" while it already exists (current: "+t[c]._defaultValues[u]+", new: "+s+")"}return p}var p=e("./domutils.js").objExtend,x=e("console-browserify"),c=function(e,t,n,o){var i,r=n.indexOf(".");if(-1==r)if(void 0===t[n])x.log("Undefined prop",n,"while setting value",o,"in model._valueSet");else if(null===t[n])"object"==typeof o&&null!==o&&void 0===o.push&&x.log("Null prop ",n,"while setting value",o,"in model._valueSet"),t[n]=o;else if("object"==typeof t[n]&&"function"==typeof t[n].push){if("string"==typeof o){var a=o.match(/^\[(.*)\]$/);if(null===a)throw"Unexpected default value for array property "+n+": "+o;i=a[1].split(",")}else{if("object"!=typeof o||void 0===o.push)throw"Unexpected default value for array property "+n+": "+o+" typeof "+typeof o;i=o}for(var s=[],l=0;l<i.length;l++)"@"==i[l].substr(0,1)?s.push(d(e,i[l].substr(1))):0<i[l].length&&s.push(i[l]);t[n]=s}else"string"==typeof t[n]||"boolean"==typeof t[n]?t[n]=o:"object"==typeof t[n]&&null!==t[n]&&void 0!==t[n]._widget?("object"==typeof o&&null!==o&&x.log("objectvalue",n,t[n]._widget,o),t[n]=o):x.log("setting",typeof t[n],t[n],n,o);else{a=n.substr(0,r);c(e,t[a],n.substr(r+1),o)}},O=function(e,t,n,o){if(void 0!==e[t]&&e[t]._initialized&&!e[t]._writeable)throw x.error("Trying to alter non writeable model",e,t,n,o),"Trying to alter non writeable model: "+t+" / "+n;var i,r,a;for(a in void 0===e[t]&&(e[t]={_writeable:!0},void 0===(o=void 0===o?{}:o).category&&void 0===e[t]._category&&(t.match(/(^t|.T)heme$/)||t.match(/(^s|.S)tyle$/)||t.match(/(^c|.C)olor$/)||t.match(/(^r|.R)adius$/)?o.category="style":o.category="content")),void 0!==o&&(void 0!==o.name&&(e[t]._name=o.name),void 0!==o.themeOverride&&(e[t]._themeOverride=o.themeOverride),void 0!==o.globalStyle&&(e[t]._globalStyle=o.globalStyle,r=-1!=(r=(i=o.globalStyle.replace(/^(\$theme|_theme_)\./,"")).indexOf("."))?i.substr(0,r):i,O(e,"theme",r),void 0!==e[t]._themeOverride&&!e[t]._themeOverride||O(e,t,"customStyle=false")),void 0!==o.contextName&&(e[t]._context=o.contextName,"block"==o.contextName&&void 0===e[t]._globalStyle&&(e[t]._globalStyle="_theme_.bodyTheme",O(e,"theme","bodyTheme"),void 0!==e[t]._themeOverride&&!e[t]._themeOverride||O(e,t,"customStyle=false"))),void 0!==o.extend&&(e[t].type=o.extend)),o)o.hasOwnProperty(a)&&void 0!==o[a]&&-1==["name","extend","contextName","globalStyle","themeOverride"].indexOf(a)&&(e[t]["_"+a]=o[a]);void 0!==n&&0<n.length&&(e[t]._props=void 0!==e[t]._props&&0<e[t]._props.length?e[t]._props+" "+n:n)},f=function(e){e=e.match(/^[^A-Z]+([A-Z])(.*)$/);return null!==e?e[1].toLowerCase()+e[2]:null},l=function(e,t){var n,o={};for(n in e)if(!n.match(/^_.*/)&&e.hasOwnProperty(n)){var i=e[n];if("object"==typeof i&&null!==i&&void 0!==i._complex&&i._complex)o[n]=l(i,t);else if("type"==n)o[n]=i;else{if("object"!=typeof i)throw x.error("Unexpected model def",n,i,e),"Unexpected model def ["+n+"] = "+i;o[n]=null}}if(void 0!==e._defaultValues){var r,a=e._defaultValues;for(r in a)a.hasOwnProperty(r)&&c(t,o,r,a[r])}return o},_=function(e,t,n,o){if(void 0===e[t])return-1==t.indexOf(" ")&&null!==(i=f(t))?_(e,i,n,o):null;var i,r=e[t];if("object"!=typeof r)throw"Block definition must be an object: found "+r+" for "+t;if(void 0===r._initialized&&(void 0===r.type&&(-1==t.indexOf(" ")?r.type=t:r.type=t.substr(t.indexOf(" ")+1)),r.type!=t&&void 0===r._widget&&(i=_(e,r.type,!0),r=p(i,r),e[t]=r),r._writeable=!0,r._initialized=!0),void 0!==r._props){var a=r._props;if(0<(a=a.split(" ")).length&&void 0===r._writeable)throw x.error("Altering a non writable object ",t,a,r),"Altering a non writable object: "+t+" def: "+a;void 0===r._processedDefs&&(r._processedDefs={}),void 0===r._globalStyles&&(r._globalStyles={}),void 0===r._defaultValues&&(r._defaultValues={});for(var s=0;s<a.length;s++){var l,d,c,u=a[s];0!==u.length&&((d=null)!==(c=(l=u).match(/^([^=\[\]]+)(\[\])?(=?)(.*)$/))&&(u=c[1],"[]"==c[2]&&(void 0===r[u]&&(r[u]=[]),d=[]),"="==c[3]&&(d=u.match(/(^v|V)isible$/)||u.match(/^customStyle$/)?"true"==String(c[4]).toLowerCase():c[4])),null!==d&&void 0===r._defaultValues[u]&&(r._defaultValues[u]=d),void 0===r[u]&&(null===(c=_(e,t+" "+u,!0))&&(c=_(e,u,!0)),r[u]=c),r._processedDefs[u]=l,r._complex=!0)}delete r._props}if(n)return r._writeable=!1,p({},r);if(o)r._writeable=!1;else if(void 0===r._writeable||!1===r._writeable)throw"Retrieving non writeable object definition: "+t;return r};t.exports={ensurePathAndGetBindValue:k.bind(void 0,!1),getBindValue:k.bind(void 0,!0),generateModel:d,generateResultModel:function(e){var t=e._defs,e=e.templateName,e=d(t,e);return void 0!==t.theme&&(e.theme=d(t,"theme")),e},getDef:s,createOrUpdateBlockDef:O,generateBlockModels:function(e){for(var t,n,o=e._defs,i=e._blocks,r={blockList:[],allBlocks:{}},a=0;a<i.length;a++)void 0!==i[a].container&&(t=s(o,i[a].block),n=l(t),void 0===t._deprecated&&r.blockList.push(n),r.allBlocks[i[a].block]=n);return r}}},{"./domutils.js":79,"console-browserify":10}],83:[function(t,n,e){!function(e){!function(){"use strict";var m="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,w=t("console-browserify"),k=t("./declarations.js"),x=t("./stylesheet.js"),O=t("./model.js"),_=t("./domutils.js"),S=t("./utils.js").addSlashes,C=function(e,t){var n=_.getAttribute(e,"data-bind");_.setAttribute(e,"data-bind",(null!==n?n+", ":"")+t)},j=function(t,n,e){var o=_.getAttribute(n,t);try{var i=k.conditionBinding(o,e);m(n).before("\x3c!-- ko if: "+i+" --\x3e"),m(n).after("\x3c!-- /ko --\x3e"),_.removeAttribute(n,t)}catch(e){throw w.warn("Model ensure path failed in if/variant",n,o,t),e}},A=function(e,t,n){var o=_.getAttribute(e,"replacedstyle"),i=null!==_.getAttribute(e,"data-ko-display"),t=k.elaborateElementStyleDeclarations(o,t,n,e,i);t!==o&&_.removeAttribute(e,"replacedstyle"),0<t.trim().length?_.setAttribute(e,"style",t):_.removeAttribute(e,"style")},$=function(e,t,n,o){t=t(_.getAttribute(o,e));null!==t&&_.setAttribute(o,e,t)},T=function(t,r,a,n,s,e,l,o,f,i){try{var d;if("block"==e)d=_.getAttribute(t,"data-ko-block"),_.removeAttribute(t,"data-ko-block");else{if("template"!=e)throw"Unexpected context name while processing block: "+e;d=l}m("[data-ko-remove]",t).remove();for(var c=m("[data-ko-block]",t).replaceWith("<replacedblock>"),u=["href","src","data-ko-placeholder-src","background"],p=0;p<u.length;p++){var g=$.bind(void 0,u[p],s);m("["+u[p]+"]",t).each(g)}for(var h=_.getAttribute(t,"data-ko-properties"),b=(null===h?h="":_.removeAttribute(t,"data-ko-properties"),m("[data-ko-properties]",t).each(function(e,t){0<h.length&&(h+=" "),h+=_.getAttribute(t,"data-ko-properties"),_.removeAttribute(t,"data-ko-properties")}),O.createOrUpdateBlockDef(r,d,h,{contextName:e}),O.ensurePathAndGetBindValue.bind(void 0,r,a,l,d,"")),v=("block"==e&&b("id",""),m("style",t).each(function(e,t){var n=_.getInnerHtml(t),o=O.createOrUpdateBlockDef.bind(void 0,r),i=O.ensurePathAndGetBindValue.bind(void 0,r,a,l),i=x(n,void 0,i,o,a,s,l,d);i!=n&&(""!==i.trim()?(o=f(i),_.setAttribute(t,"data-bind","template: { name: '"+o+"' }"),_.setContent(t,"")):_.removeElements(m(t)))}),i&&C(t,"attr: { id: id }"),null!==_.getAttribute(t,"replacedstyle")&&A(t,s,b),["data-ko-display","data-ko-editable","data-ko-wrap","href"]),y=0;y<v.length;y++)if(_.getAttribute(t,v[y]))throw w.warn("ERROR: Unsupported "+v[y]+" used together with data-ko-block",t),"ERROR: Unsupported "+v[y]+" used together with data-ko-block";return m("[data-ko-link]",t).each(function(e,t){var n=_.getAttribute(t,"data-ko-link"),o=_.getAttribute(t,"replacedstyle");_.setAttribute(t,"replacedstyle",o=""!==(o=null==o?"":o)?"-ko-attr-href: @"+n+"; "+o:"-ko-attr-href: @"+n),_.setAttribute(t,"data-ko-wrap",n),_.removeAttribute(t,"data-ko-link")}),m("[data-ko-height]",t).each(function(e,t){var n=_.getAttribute(t,"data-ko-height"),n=b(n),o="",o=(void 0!==r[n]&&void 0!==r[n]._min&&(o+=", minHeight: "+r[n]._min),void 0!==r[n]&&void 0!==r[n]._max&&(o+=", maxHeight: "+r[n]._max),"syncedhoverclass: { ref: "+n+", class: 'resizing-hover' }, extresizable: { data: "+n+", options: { handles: 's'"+o+", resizing: $root.resizing } }, attr: { 'data-size': ko.utils.unwrapObservable("+n+")+'px' } "),n=m('<div class="ui-resizing-div" data-ko-wrap="false" style="width: 100%; height: 100%"></div>')[0];_.setAttribute(n,"data-bind",o),m(t).append(n);C(t,"wysiwygCss: { 'ui-resizable-container': true }"),_.removeAttribute(t,"data-ko-height")}),m("[replacedstyle]",t).each(function(e,t){A(t,s,b)}),m("[replacedhttp-equiv]",t).each(function(e,t){}),m("[data-ko-display]",t).each(function(e,t){j("data-ko-display",t,b)}),m("[data-ko-editable]",t).each(function(e,t){var n,o=_.getAttribute(t,"data-ko-editable");if("img"!=_.getLowerTagName(t)){var i=_.getInnerHtml(t),r=b(o,i,!0,"wysiwyg"),a="",r=(_.getAttribute(t,"id")||(a+="wysiwygId: id()+'_"+o.replace(".","_")+"', "),a=a+("wysiwygClick: function(obj, evt) { $root.selectItem("+(n=0<o.lastIndexOf(".")?b(o.substr(0,o.lastIndexOf("."))):r)+", $data); return false }, clickBubble: false, wysiwygCss: { selecteditem: $root.isSelectedItem("+n+") }, scrollIntoView: $root.isSelectedItem("+n+"), ")+("wysiwygOrHtml: "+r),_.getLowerTagName(t)),s=_.getAttribute(t,"data-ko-editor-style");s?_.removeAttribute(t,"data-ko-editor-style"):s="div"==r||"td"==r?"multiline":"singleline",a+=", wysiwygStyle: '"+s+"'","div"!==r?(r=m('<div class="mo-editor-wrapper" data-ko-wrap="false"'+("singleline"==s?' style="display: inline-block;"':' style="width: 100%; height: 100%"')+"></div>")[0],_.setAttribute(r,"data-bind",a),s=_.getInnerHtml(m("<div></div>").append(r)),_.setContent(t,s)):(C(t,a),_.setContent(t,"")),_.removeAttribute(t,"data-ko-editable")}else{r=_.getAttribute(t,"width");if(null===(r=""===r?null:r))throw w.error("ERROR: data-ko-editable images must declare a WIDTH attribute!",t),"ERROR: data-ko-editable images must declare a WIDTH attribute!";var l,s=_.getAttribute(t,"height"),d=(""===s&&(s=null),_.getAttribute(t,"align")),c=_.getAttribute(t,"data-bind"),u=c&&c.match(/virtualAttr: {[^}]* height: ([^,}]*)[,}]/),u=(u&&(s=u[1]),c&&c.match(/virtualAttr: {[^}]* width: ([^,}]*)[,}]/)),c=(u&&(r=u[1]),""),u=((i=_.getAttribute(t,"data-ko-placeholder-src"))?c=_.getAttribute(t,"src"):i=_.getAttribute(t,"src"),s||_.getAttribute(t,"data-ko-placeholder-height")),p=r||_.getAttribute(t,"data-ko-placeholder-width");if(_.removeAttribute(t,"src"),_.removeAttribute(t,"data-ko-editable"),_.removeAttribute(t,"data-ko-placeholder-height"),_.removeAttribute(t,"data-ko-placeholder-width"),_.removeAttribute(t,"data-ko-placeholder-src"),i&&(l="{ width: "+p+", height: "+u+" }"),!p||!u)throw w.error("IMG data-ko-editable must declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height",t),"ERROR: IMG data-ko-editable MUST declare width and height attributes, or their placeholder counterparts data-ko-placeholder-width/data-ko-placeholder-height";i=b(o,c,!1,"wysiwyg"),p=(C(t,a="wysiwygSrc: { width: "+r+", height: "+s+", src: "+i+", placeholder: "+l+" }"),f(t)),u="{ width: "+r;"left"==d?u+=", float: 'left'":"right"==d?u+=", float: 'right'":"top"==d?u+=", verticalAlign: 'top'":"middle"==d?u+=", verticalAlign: 'middle'":"bottom"==d&&(u+=", verticalAlign: 'bottom'"),u+="}",n=0<o.lastIndexOf(".")?b(o.substr(0,o.lastIndexOf("."))):i,m(t).before("\x3c!-- ko wysiwygImg: { _data: $data, _item: "+n+", _template: '"+p+"', _editTemplate: 'img-wysiwyg', _src: "+i+", _width: "+r+", _height: "+s+", _align: "+(null===d?void 0:"'"+d+"'")+", _method: "+void 0+", _stylebind: "+u+" } --\x3e"),m(t).after("\x3c!-- /ko --\x3e")}}),m("[href]",t).each(function(e,t){var n=_.getAttribute(t,"href"),n="wysiwygHref: '"+S(n)+"'";C(t,n)}),m("replacedblock",t).each(function(e,t){e=c[e],e=T(e,r,a,n,s,"block",d,o,f,!0),e=O.ensurePathAndGetBindValue(r,a,l,d,"",e);m(t).before("\x3c!-- ko block: { data: "+S(e)+", template: 'block' } --\x3e"),m(t).after("\x3c!-- /ko --\x3e"),m(t).remove()}),m(m("[data-ko-wrap]",t).get().reverse(),t).each(function(e,t){var n=_.getAttribute(t,"data-ko-wrap");if(void 0===n||""===n||"true"===n)throw"Unsupported empty value for data-ko-wrap: use false value if you want to always remove the tag";var o,i,n=k.conditionBinding(n,b),r=_.getAttribute(t,"data-bind");""!==r&&null!==r&&r.match(/(block|wysiwygOrHtml):/)?(r="\x3c!-- ko "+r+" --\x3e"+_.getInnerHtml(t)+"\x3c!-- /ko --\x3e",i=f(r),_.removeAttribute(t,"data-ko-wrap"),o=f(t),_.replaceHtml(t,"\x3c!-- ko template: /* special */ (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+n+" ? '"+o+"' : '"+i+"' --\x3e\x3c!-- /ko --\x3e")):(i=f(_.getInnerHtml(t)),_.removeAttribute(t,"data-ko-wrap"),_.setContent(t,"\x3c!-- ko template: '"+i+"' --\x3e\x3c!-- /ko --\x3e"),o=f(t),_.replaceHtml(t,"\x3c!-- ko template: (typeof templateMode != 'undefined' && templateMode == 'wysiwyg') || "+n+" ? '"+o+"' : '"+i+"' --\x3e\x3c!-- /ko --\x3e"))}),f(t,d,"show"),n(l,d,e,o),d}catch(e){throw w.error("Exception while parsing the template",e,t),e}};n.exports=function(o,e,i,r){function a(e,t,n,o){p.push({root:e,block:t,context:n,container:o})}function s(e,t,n){var o;void 0===c.themes&&(c.themes={}),void 0===c.themes[e]&&(c.themes[e]={}),void 0===c.themes[e][t]||null===c.themes[e][t]?c.themes[e][t]=n:null!=n&&(o=c.themes[e][t])!=n&&w.log("Error setting a new default for property "+t+" in theme "+e+". old:"+o+" new:"+n+"!")}function t(e,t,n){T(n,c,s,a,i,"block",o,e,r,!0)}var n,l,d,c={},e=e.replace(/(<[^>]+\s)(style|http-equiv)(="[^"]*"[^>]*>)/gi,function(e,t,n,o){return t+"replaced"+n+o}).replace(/<!--\[if ([^\]]*)\]>((?:(?!--)[\s\S])*?)<!\[endif\]-->/g,function(e,t,n){var o="\x3c!-- cc:start --\x3e",n=(o=o+n.replace(/<([A-Za-z:]+)/g,"\x3c!-- cc:bo:$1 --\x3e<cc").replace(/<\/([A-Za-z:]+)>/g,"</cc>\x3c!-- cc:ac:$1 --\x3e").replace(/\/>/g,"/>\x3c!-- cc:sc --\x3e")+"\x3c!-- cc:end --\x3e",'<replacedcc condition="'+t+'" style="display: none">');return n+m("<div>").append(m(o)).html().replace(/^<!-- cc:start -->/,"").replace(/<!-- cc:end -->$/,"")+"</replacedcc>"}),e="function"==typeof m.parseHTML?m(m.parseHTML(e,!1)):m(e),u=e[0],p=[],e=m("[data-ko-container]",e),f={};e.each(function(e,t){var n=_.getAttribute(t,"data-ko-container")+"Blocks",t=(_.removeAttribute(t,"data-ko-container"),C(t,"block: "+n),m("> [data-ko-block]",t));_.removeElements(t,!0),f[n]=t}),O.createOrUpdateBlockDef(c,"id"),O.createOrUpdateBlockDef(c,"bodyTheme"),O.createOrUpdateBlockDef(c,"blocks","blocks[]"),O.createOrUpdateBlockDef(c,"text"),T(u,c,s,a,i,"template",o,void 0,r);for(n in f)f.hasOwnProperty(n)&&(l=f[n],d=n,O.ensurePathAndGetBindValue(c,s,o,o,"",d+".blocks","[]"),l.each(t.bind(void 0,d)));e={_defs:c,templateName:o,_blocks:p};return void 0!==c[o]._version&&(e.version=c[o]._version),e}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./declarations.js":78,"./domutils.js":79,"./model.js":82,"./stylesheet.js":84,"./utils.js":85,"console-browserify":10}],84:[function(e,t,n){"use strict";function H(e,t,n,o,i,r,a,s){var l=e,d=null;if(void 0===t){e=F.parse(e);if("stylesheet"!=e.type||void 0===e.stylesheet)throw M.log("unable to process styleSheet",e),"Unable to parse stylesheet";t=e.stylesheet.rules}for(var c=t.length-1;0<=c;c--){if("supports"==t[c].type&&"-ko-blockdefs"==t[c].name){S=_=m=O=y=v=b=h=g=x=k=w=void 0;for(var u=o,p=t[c].rules,f=r,g=0;g<p.length;g++)if("rule"==p[g].type){for(var h=p[g].selectors,b=!1,v=!1,y=0;y<h.length;y++)h[y].match(/:preview$/)?v=!0:b=!0;if(v&&b)throw M.log("cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs ",h),"Cannot mix selectors type (:preview and declarations) in @supports -ko-blockdefs";if(!v&&!b)throw M.log("cannot find known selectors in @supports -ko-blockdefs ",h),"Cannot find known selectors in @supports -ko-blockdefs";if(b){for(var m,w="",k={},x=p[g].declarations,O=0;O<x.length;O++)"property"==x[O].type&&(m=N(x[O].value),"label"==x[O].name?k.name=m:"context"==x[O].name?k.contextName=m:"properties"==x[O].name?w=m:"theme"==x[O].name?k.globalStyle="_theme_."+m:"themeOverride"==x[O].name?k.themeOverride="true"==String(m).toLowerCase():k[x[O].name]=B.declarationValueUrlPrefixer(m,f));for(var _=0;_<h.length;_++)u(h[_],w,k)}if(v)for(var S=0;S<h.length;S++)u(h[S].substr(0,h[S].indexOf(":")),void 0,{previewBindings:p[g].declarations})}l=F.replaceStyle(l,t[c].position.start,d,"")}else if("media"==t[c].type||"supports"==t[c].type)l=H(l,t[c].rules,n,o,i,r,a,s);else if("comment"!=t[c].type)if("rule"==t[c].type){for(var C,j,A,$=t[c].selectors,T="",I=null,E=0;E<$.length;E++){0<T.length&&(T+=", ");var P=$[E].match(/\[data-ko-block=([^ ]*)\]/);if(null!==P){if(null!==I&&I!=P[1])throw"Found multiple block-match attribute selectors: cannot translate it ("+I+" vs "+P[1]+")";I=P[1]}T+="\x3c!-- ko text: templateMode =='wysiwyg' ? '#main-wysiwyg-area ' : '' --\x3e\x3c!-- /ko --\x3e"+$[E]}I&&(C="\x3c!-- ko foreach: $root.findObjectsOfType($data, '"+I+"') --\x3e",j="\x3c!-- /ko --\x3e",D=d,A=" ",0<t[c].declarations.length&&(t[c].declarations[0].position.start.line!=t[c].position.end.line&&(A="\n"+new Array(t[c].position.start.col).join(" ")),D=t[c].declarations[t[c].declarations.length-1].position.end),null===D?l+=A+j:l=D==d?F.replaceStyle(l,D,d,A+j):F.replaceStyle(l,D,d,A+"}"+A+j),T=C+A+T.replace(new RegExp("\\[data-ko-block="+I+"\\]","g"),"\x3c!-- ko text: '#'+id() --\x3e"+I+"\x3c!-- /ko --\x3e"),o(I,"",{contextName:"block"}));var D=n.bind(this,I||s,""),l=B.elaborateDeclarationsAndReplaceStyles(l,t[c].declarations,r,D);l=F.replaceStyle(l,t[c].position.start,t[c].position.end,T)}else"font-face"==t[c].type?l=B.elaborateDeclarationsAndReplaceStyles(l,t[c].declarations,r,D):M.log("Unknown rule type",t[c].type,"while parsing <style> rules");d=t[c].position.start}return l}var F=e("./cssparser.js"),M=e("console-browserify"),B=e("./declarations.js"),N=function(e){return"'"!=e[0]&&'"'!=e[0]||e[e.length-1]!=e[0]?e:e.substr(1,e.length-2).replace(/\\([\s\S])/gm,"$1")};t.exports=H},{"./cssparser.js":77,"./declarations.js":78,"console-browserify":10}],85:[function(e,t,n){"use strict";function l(e,t,n){return function t(e,n,o,i){if("BinaryExpression"===e.type||"LogicalExpression"===e.type)return"("+t(e.left,n,o)+" "+function(e){switch(e){case"or":return"||";case"and":return"&&";case"lt":return"<";case"lte":return"<=";case"gt":return">";case"gte":return">=";case"eq":return"==";case"neq":return"!=";default:return e}}(e.operator)+" "+t(e.right,n,o)+")";var r;if("CallExpression"===e.type)return r=e.arguments.map(function(e){return t(e,n,o)}),t(e.callee,n,o)+"("+r.join(", ")+")";if("UnaryExpression"===e.type)return e.operator+t(e.argument,n,o);if("MemberExpression"==e.type&&e.computed)throw"Unexpected computed member expression";if("MemberExpression"!=e.type||e.computed){if("Literal"===e.type)return e.raw;if("Identifier"===e.type)return r=e.name,o?n(r,i)+"()":r;if("ConditionalExpression"===e.type)return"("+t(e.test,n,o)+" ? "+t(e.consequent,n,o)+" : "+t(e.alternate,n,o)+")";throw"Compound"===e.type?"Syntax error in expression: operator expected after "+t(e.body[0],n,!1):"Found an unsupported expression type: "+e.type}return r=t(e.object,n,!1)+"."+t(e.property,n,!1),o&&"Math"!==e.object.name&&"Color"!==e.object.name&&"Util"!==e.object.name&&"Url"!==e.object.name?n(r,i)+"()":r}(o(e),t,!0,n)}var d=e("console-browserify"),o=e("jsep");o.addBinaryOp("or",1),o.addBinaryOp("and",2),o.addBinaryOp("eq",6),o.addBinaryOp("neq",6),o.addBinaryOp("lt",7),o.addBinaryOp("lte",7),o.addBinaryOp("gt",7),o.addBinaryOp("gte",7);t.exports={addSlashes:function(e){return e.replace(/[\\"'\r\n\t\v\f\b]/g,"\\$&").replace(/\u0000/g,"\\0")},conditionBinding:l,expressionBinding:function(t,r,n){var a;if(null!=n){var e=t.trim().replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b/g,"###var###");if("###var###"==(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")))a=[null,n];else if(e="^"+e.replace(/###var###/g,"(.+)")+"$",!(a=n.trim().match(new RegExp(e))))throw d.error("Cannot find matches",a,"for",n,t,e,t),"Cannot find default value for "+t+" in "+n}try{var s=0,o=(o="'"+t.replace(/@\[([^\]]+)\]|@([a-zA-Z0-9\._]+)\b|(')/g,function(e,t,n,o){if(o)return"\\"+o;s++;var i,o=t||n;if(a){if(void 0===a[s])throw d.log("Cannot find default value for",o,"in",a,"as",s),"Cannot find default value for "+o+" at "+s;i=a[s].trim()}return t?"'+"+l(t,r,i)+"+'":"'+"+r(o,i)+"()+'"})+"'").replace(/^''\+/,"").replace(/\+''$/,"").replace(/^([^'+ ]*)\(\)$/,"$1");if(0===s&&"false"!==o&&"true"!==o)throw d.error("Unexpected expression with no valid @variable references",t),"Unexpected expression with no valid @variable references: "+t;return o}catch(e){throw"Exception parsing expression "+t+" ["+n+"] "+e}},declarationValueUrlPrefixer:function(e,r){return e.match(/url\(.*\)/)?e.replace(/(url\()([^\)]*)(\))/g,function(e,t,n,o){var i=n.trim(),n=n.trim().charAt(0),i=("'"==n||'"'==n?i=i.substr(1,i.length-2):n="",r(i));return null!==i?t+n+i+n+o:e}):e}}},{"console-browserify":10,jsep:26}],86:[function(e,t,n){!function(s){!function(){"use strict";var T="undefined"!=typeof window?window.ko:void 0!==s?s.ko:null,I=e("console-browserify");function E(e){return e._nextValue()}function P(e,t,n){for(var o=n.split("."),i=t,r=0;r<o.length;r++)i=0==r&&"_root_"==o[r]?e:0==r&&"_theme_"==o[r]?T.utils.unwrapObservable(e.theme):T.utils.unwrapObservable(i)[o[r]];if(void 0===i)throw I.error("Error looking for target variable",n,t),"Error looking for target variable"+n;return i}function D(e,t){for(var n=T.utils.unwrapObservable(e),o=0;o<t.length&&T.utils.peekObservable(t[o])!=n;o++);o==t.length&&(I.warn("Didn't find a variant!",e,n,t),o=t.length-1);var i=o+1;i==t.length&&(i=0),e(T.utils.peekObservable(t[i]))}var H=function(e,t,n){var o=n();if(void 0===o.type)throw I.error("Found a non-typed def ",r,o),"Found a non-typed def "+r;var i=T.utils.unwrapObservable(o.type),r=e[i];if("object"!=typeof r)throw I.error("Found a non-object def ",r,"for",i),"Found a non-object def "+r;void 0===t&&(t=o);var a,s="$root.content().",l=r._globalStyles;if(void 0!==l)for(var d in l)if(l.hasOwnProperty(d)){var c="$root.content().theme().scheme";if(l[d].substr(0,s.length)!=s)throw"UNEXPECTED globalStyle path ("+l[d]+") outside selfPath ("+s+")";for(var u=l[d].substr(s.length),p=t,c=c.substr(0,s.length)==s?c.substr(s.length):(I.log("Scheme path doesn't match selfPath",c,s),c),f=p,g=u.split("()."),h="",b=!0,v=0;v<g.length;v++)p=T.utils.unwrapObservable(p)[g[v]],b?"theme"==g[v]&&(b=!1):(0<h.length&&(h+="."),h+=g[v]);for(var y=c.split("()."),m=0;m<y.length;m++)f=T.utils.unwrapObservable(f)[y[m]];for(var w=d.split("."),k=o,x=0;x<w.length;x++)k=T.utils.unwrapObservable(k)[w[x]];if(!T.isObservable(k))throw"Unexpected non observable target "+d+"/"+h;k._defaultComputed=function(o,i,r,a,s,l){return T.computed({read:function(){var e,t=o();return null===t?void 0===(e=T.utils.unwrapObservable(a))||"custom"==e?T.utils.unwrapObservable(i):l[e][s]:t},write:function(e){var t,n=T.utils.unwrapObservable(a),n=void 0===n||"custom"==n?T.utils.peekObservable(i):l[n][s];r?o(e==n?null:e):(t=T.utils.peekObservable(o),e==n&&null===t||o(e))}})}(k,p,!0,f,h,e.themes)}if(void 0!==r._variant&&(i=t,_=n,O=r._variant,void 0!==(i=P(i,_,O))._defaultComputed&&(I.log("Found variant on a style property: beware variants should be only used on content properties because they don't match the theme fallback behaviour",O),i=i._defaultComputed),_._nextVariant=E.bind(void 0,i)),void 0!==r._visibility){var O=t,_=n,i=r._visibility;if(void 0!==(O=P(O,_,i))._defaultComputed)throw I.error("Found visibility option on a style property",i,_),"Unsupported visibility option targeting a style property: "+i;_._switchVisibility=E.bind(void 0,O)}for(a in r)if(r.hasOwnProperty(a)){var S=r[a];if("object"==typeof S&&null!==S)if(void 0!==S._context&&"block"==S._context)H(e,t,t[a]);else if("blocks"==S.type){for(var C=t[a](),j=C.blocks(),A=0;A<j.length;A++)H(e,t,j[A]);var C=C.blocks,$=B.bind(void 0,e,t);if(C._instrumentBlock=$,typeof C.origPush=="undefined"){C.origPush=C.push;C.push=F;C.origSplice=C.splice;C.splice=M}}else{void 0,$=null,"select"==(C=S)._widget&&"string"==typeof C._options?$=function(e){for(var t=e.split("|"),n=[],o=0;o<t.length;o++){var i=t[o].split("=");n.push(i[0].trim())}return n}(C._options):"boolean"==C._widget&&($=[!0,!1]);S=$;null!==S&&(void 0!==o[a]._defaultComputed?o[a]._defaultComputed._nextValue=D.bind(void 0,o[a]._defaultComputed,S):o[a]._nextValue=D.bind(void 0,o[a],S))}}},F=function(){if(1<arguments.length)throw"Array push with multiple arguments not implemented";return T.isObservable(arguments[0])||(arguments[0]=this._instrumentBlock(arguments[0])),this.origPush.apply(this,arguments)},M=function(){for(var e=2;e<arguments.length;e++)T.isObservable(arguments[e])||(arguments[e]=this._instrumentBlock(arguments[e]));return this.origSplice.apply(this,arguments)},a=function(t,n){return function(e){return void 0===e?T.toJS(t):t(T.utils.unwrapObservable(n(e)))}},B=function(e,t,n){var o=function e(t){var n=typeof t;if("object"===n&&(t?t.constructor==Date?n="date":"[object Array]"==Object.prototype.toString.call(t)&&(n="array"):n="null"),"array"==n){var o=T.observableArray();if(t&&0!==t.length)for(var i=0,r=t.length;i<r;++i)o.push(e(t[i]));return o}if("object"!=n)return"function"==n?t:((n=T.observable())(t),n);var a,s={};for(a in t){var l=t[a];s[a]=e(l)}return T.observable(s)}(n);if(void 0!==o().id&&void 0!==o().type&&""==o().id()){for(var i,r=0;i="ko_"+n.type+"_"+ ++r,s.document.getElementById(i););o().id(i)}return H(e,t,o),o._plainObject=a(o,B.bind(void 0,e,t)),o};t.exports=function(e,t){return B(e,void 0,t)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],87:[function(e,i,t){!function(o){!function(){var t=e("tinycolor2");function n(n){this.getBrightness=function(e){return n(e).getBrightness()},this.isLight=function(e){return n(e).isLight()},this.isDark=function(e){return n(e).isDark()},this.getLuminance=function(e){return n(e).getLuminance()},this.lighten=function(e,t){return n(e).lighten(t).toHexString()},this.brighten=function(e,t){return n(e).brighten(t).toHexString()},this.darken=function(e,t){return n(e).darken(t).toHexString()},this.desaturate=function(e,t){return n(e).desaturate(t).toHexString()},this.saturate=function(e,t){return n(e).saturate(t).toHexString()},this.greyscale=function(e){return n(e).greyscale().toHexString()},this.spin=function(e,t){return n(e).spin(t).toHexString()},this.complement=function(e){return n(e).complement().toHexString()},this.mix=n.mix,this.readability=n.readability,this.isReadable=n.isReadable,this.mostReadable=n.mostReadable}i.exports=function(e){o.Color=new n(t)}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{tinycolor2:42}],88:[function(t,n,e){!function(e){!function(){"use strict";t("console-browserify");var i="undefined"!=typeof window?window.jQuery:void 0!==e?e.jQuery:null,r=t("juice/lib/inline")({}).inlineDocument;n.exports=function(e){e.inline=function(n){i("[style]:not([replacedstyle])",n).each(function(e,t){t=i(t);t.attr("replacedstyle",t.attr("style"))});function e(e,t){return i(e,t=void 0===t?n:t)}var o=[],t=(i('style[data-inline="true"]',n).each(function(e,t){var n=i(t).html();n=(n=n.replace(/<!-- ko ((?!--).)*? -->/g,"")).replace(/<!-- \/ko -->/g,""),o.push(n),i(t).removeAttr("data-inline")}),o.join("\n"));e.root=function(){return i(":root",n)},r(e,t,{styleAttributeName:"replacedstyle"})}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10,"juice/lib/inline":27}],89:[function(e,t,n){!function(c){!function(){"use strict";var s=e("console-browserify"),l="undefined"!=typeof window?window.ko:void 0!==c?c.ko:null,d="undefined"!=typeof window?window.jQuery:void 0!==c?c.jQuery:null;t.exports=function(e,t){var n,o,a,i=c.localStorage.getItem("metadata-"+e);if(null!==i)return null!==(o=c.localStorage.getItem("template-"+e))&&(n=JSON.parse(o)),{metadata:o=JSON.parse(i),model:n,extension:(a=t,function(n,o,i){var e={name:"Save",enabled:l.observable(!0),execute:function(){e.enabled(!1),i.metadata.changed=Date.now(),void 0===i.metadata.key&&(s.warn("Unable to find key in metadata object...",i.metadata),i.metadata.key=n),c.localStorage.setItem("metadata-"+n,i.exportMetadata()),c.localStorage.setItem("template-"+n,i.exportJSON()),e.enabled(!0)}},r={name:"Test",enabled:l.observable(!0)},t={name:"Download",enabled:l.observable(!0)};r.execute=function(){r.enabled(!1);var e,t=c.localStorage.getItem("testemail");null!==t&&"null"!=t||(t=i.t("Insert here the recipient email address")),"function"!=typeof c.prompt?(c.alert(i.t("This feature is not supported by your browser")),r.enabled(!0)):null!=(t=c.prompt(i.t("Test email address"),t))&&t.match(/@/)?(c.localStorage.setItem("testemail",t),e=a||"/dl/",(e=d.post(e,{action:"email",rcpt:t,subject:"[test] "+n+" - "+o,html:i.exportHTML()},null,"html")).fail(function(){s.log("fail",arguments),i.notifier.error(i.t("Unexpected error talking to server: contact us!"))}),e.success(function(){s.log("success",arguments),i.notifier.success(i.t("Test email sent..."))}),e.always(function(){r.enabled(!0)})):(c.alert(i.t("Invalid email address")),r.enabled(!0))},t.execute=function(){t.enabled(!1),i.notifier.info(i.t("Downloading...")),i.exportHTMLtoTextarea("#downloadHtmlTextarea");var e=a||"/dl/";c.document.getElementById("downloadForm").setAttribute("action",e),c.document.getElementById("downloadForm").submit(),t.enabled(!0)},i.save=e,i.test=r,i.download=t}.bind(void 0,o.key,o.name))};throw"Cannot find stored data for "+e}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],90:[function(e,o,t){!function(n){!function(){"use strict";var t="undefined"!=typeof window?window.ko:void 0!==n?n.ko:null;o.exports=function(e){n.Url={templatePath:function(){return e.templatePath.apply(e,arguments)},imageProcessor:function(){return t.bindingHandlers.wysiwygSrc.convertedUrl.apply(t.bindingHandlers.wysiwygSrc,arguments)}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(e,n,t){!function(t){!function(){"use strict";n.exports=function(e){t.Util={decodeURI:decodeURI,encodeURI:encodeURI,decodeURIComponent:decodeURIComponent,encodeURIComponent:encodeURIComponent}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],92:[function(e,t,n){"use strict";e("knockout-sortable"),e("./bindings/jqueryui-spinner.js"),e("./bindings/jqueryui-tabs.js"),e("./bindings/colorpicker.js"),e("./bindings/blocks.js"),e("./bindings/csstext.js"),e("./bindings/bind-iframe.js"),e("./bindings/extdroppable.js"),e("./bindings/preloader.js"),e("./bindings/fileupload.js"),e("./bindings/virtuals.js"),e("./bindings/wysiwygs.js"),e("./bindings/stylesheet.js"),e("./bindings/scrollfix.js"),e("./bindings/if-subs.js"),e("./bindings/extsortables.js"),e("./bindings/extresizable.js"),e("./bindings/eventable.js"),e("./bindings/tooltips.js"),e("./bindings/extender-pagination.js"),e("./bindings/validated-value.js"),e("./bindings/scrollintoview.js"),e("./bindings/syncedhoverclass.js")},{"./bindings/bind-iframe.js":49,"./bindings/blocks.js":50,"./bindings/colorpicker.js":52,"./bindings/csstext.js":53,"./bindings/eventable.js":54,"./bindings/extdroppable.js":55,"./bindings/extender-pagination.js":56,"./bindings/extresizable.js":57,"./bindings/extsortables.js":58,"./bindings/fileupload.js":59,"./bindings/if-subs.js":60,"./bindings/jqueryui-spinner.js":61,"./bindings/jqueryui-tabs.js":62,"./bindings/preloader.js":63,"./bindings/scrollfix.js":65,"./bindings/scrollintoview.js":66,"./bindings/stylesheet.js":69,"./bindings/syncedhoverclass.js":70,"./bindings/tooltips.js":71,"./bindings/validated-value.js":72,"./bindings/virtuals.js":73,"./bindings/wysiwygs.js":74,"knockout-sortable":32}],93:[function(e,t,n){!function(P){!function(){"use strict";var _="undefined"!=typeof window?window.jQuery:void 0!==P?P.jQuery:null,S="undefined"!=typeof window?window.ko:void 0!==P?P.ko:null,C="undefined"!=typeof window?window.kojqui:void 0!==P?P.kojqui:null,j=e("./converter/main.js"),A=e("console-browserify"),$=e("./viewmodel.js"),T=e("./bindings/choose-template.js");if(!_.ui.version.match(/^1\.11\..*$/))throw"Usupported jQuery UI version detected: "+_.ui.version+" (we only support 1.11.*)";function I(e,t,n,o){for(var i,r,a,s=[],l=void 0!==o&&o?(i=e.length-1,r=0,-1):(i=0,r=e.length-1,1),d=i;d!=r+l;d+=l)void 0!==e[d][t]&&void 0!==(a=e[d][t].apply(e[d],n))&&s.push(a);return s}var n=S.utils.domNodeDisposal.addDisposeCallback;S.utils.domNodeDisposal.addDisposeCallback=function(e,t){n(e,function(e){try{t(e)}catch(e){}})};function c(e,t,n,o,i,r,a,s){if(null===(o=o.match(/^([\S\s]*)([<]html[^>]*>[\S\s]*<\/html>)([\S\s]*)$/i)))throw"Unable to find <html> opening and closing tags in the template";var l,d=o[1],c={"<html":0,"<head":0,"<body":0,"</html":0,"</body":0,"</head":0},u=o[2].replace(/(<\/?)(html|head|body)([^>]*>)/gi,function(e,t,n,o){return c[(t+n).toLowerCase()]+=1,t+"replaced"+n+o});for(l in c)if(c.hasOwnProperty(l)&&1!=c[l]){if(0===c[l])throw"ERROR: missing mandatory element "+l+">";if(1<c[l])throw"ERROR: multiple element "+l+"> occourences are not supported (found "+c[l]+" occourences)"}var o=o[3],p=[];if(void 0!==a)for(var f=0;f<a.length;f++)"function"==typeof a[f]?p.push(function(t){var n;return{viewModel:function(e){n=t(e)},init:function(){void 0!==n&&void 0!==n.init&&n.init()},dispose:function(){void 0!==n&&void 0!==n.dispose&&n.dispose()}}}(a[f])):p.push(a[f]);for(var g=[],h={adder:function(e,t){if("string"!=typeof t)throw"Template system: cannot create new template "+e;var n=t.match(/(data)?-ko-[^ =:]*/g);n&&A.error("ERROR: found unexpected -ko- attribute","("+n[0]+")","in compiled template",e,", you probably mispelled it!",[t]),T.addTemplate(e,t),g.push(e)},exists:function(e){return void 0!==T.getTemplateContent(e)},dispose:function(){for(var e=g.length-1;0<=e;e--)T.removeTemplate(g[e])}},b=(S.bindingHandlers.block.templateExists=h.exists,function(e,t,n,o){var i,r=n;for(void 0===n||void 0===o||"object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()||(r+="-"+o);null==r||e.exists(r);)r="anonymous-"+Math.floor(1e5*Math.random()+1);return"object"==typeof t&&"replacedhtml"==t.tagName.toLowerCase()?(n=_(t),o=_("replacedhead",n),i=_("replacedbody",n),e.adder(r+"-head",o.html()||""),e.adder(r+"-show",i.html()||""),e.adder(r+"-preview",n.html()),e.adder(r+"-wysiwyg",n.html()),o.children().detach(),o.html("\x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e"),o.before("\x3c!-- ko withProperties: { templateMode: 'head' } --\x3e"),o.after("\x3c!-- /ko --\x3e"),i.html("\x3c!-- ko block: content --\x3e\x3c!-- /ko --\x3e"),e.adder(r+"-iframe",n[0].outerHTML)):"object"==typeof t?e.adder(r,t.outerHTML):e.adder(r,t),r}.bind(void 0,h)),u=e("translateTemplate",j.translateTemplate.bind(void 0,n,u,t,b)),v=(e("checkDefs",j.checkDefs.bind(void 0,u._defs))||A.error("Failed to validate compiled template definitions! Your source template probably have missing default values and this can lead to unexpected behaviours."),e("generateModel",j.wrappedResultModel.bind(void 0,u))),y={},m=I(p,"widget",[_,S,C]),w=0;w<m.length;w++)y[m[w].widget]=m[w];e("generateEditors",j.generateEditors.bind(void 0,u,y,t,b,"+$root.contentListeners()"));var b=e("generateBlockModels",j.generateBlockModels.bind(void 0,u)),k=function(e,t,n,o){var i=!0;2==e("checkModel",j.checkModel.bind(void 0,t._plainObject(),n,o))&&(A.error("Model and template seems to be incompatible!",t._plainObject(),n,o),i=!1);try{t._plainObject(o)}catch(e){A.error("Unable to inject model content!",e),i=!1}return i||_("#incompatible-template").dialog({modal:!0,appendTo:"#mo-body",buttons:{Ok:function(){_(this).dialog("close")}}}),i}.bind(void 0,e,v,b.allBlocks),i=(null!=i&&k("string"==typeof i?S.utils.parseJson(i):i),d+T.getTemplateContent(n+"-iframe").replace(/(<\/?)replaced(html|head|body)([^>]*>)/gi,function(e,t,n,o){return t+n+o})+o),x=S.bindingHandlers.bindIframe.tpl;S.bindingHandlers.bindIframe.tpl=i,p.push({dispose:function(){S.bindingHandlers.bindIframe.tpl=x}}),p.push(h);(d=e("initializeViewmodel",$.bind(this,v,b.blockList,t,s,k,function(e,t){return e("exportCleanedHTML",E.bind(void 0,t))}.bind(void 0,e)))).metadata=r;var O,n="0.18.9";return void 0!==d.metadata.editorversion&&d.metadata.editorversion!==n&&A.log("The model being loaded has been created with a different editor version",d.metadata.editorversion,"runtime:",n),d.metadata.editorversion=n,void 0!==u.version&&(void 0!==d.metadata.templateversion&&d.metadata.templateversion!==u.version&&A.log("The model being loaded has been created with a different template version",d.metadata.templateversion,"runtime:",u.version),d.metadata.templateversion=u.version),T.init(),p.push((O=e,{viewModel:function(e){try{O("applyBindings",S.applyBindings.bind(void 0,e))}catch(e){throw A.warn(e,e.stack),e}},dispose:function(){try{O("unapplyBindings",S.cleanNode.bind(this,P.document.body))}catch(e){throw A.warn(e,e.stack),e}}})),I(p,"viewModel",[d]),{model:d,init:function(){I(p,"init",void 0,!0)},dispose:function(){I(p,"dispose",void 0,!0)}}}function i(e,t){if(!t())throw A.warn("Missing required browser feature: ",e),"Missing required browser feature: "+e}function o(e){for(var t in r)e=e.replace(t,r[t]);return e}var r={'<script type="text/javascript" id="__gaOptOutExtension">window["_gaUserPrefs"] = { ioo : function() { return true; } }<\/script>':"",' data-gr-c-s-loaded="true"':"","<script type=\"text/javascript\" id=\"RTCEarlyScript\"> window.oldSetTimeout=window.setTimeout;window.setTimeout=function(func,delay){return window.oldSetTimeout(function(){try{if(!document.documentElement.getAttribute('stopTimers')){if(typeof func=='string') {var nfunc = new Function(func); nfunc();} else func();}}catch(ex){}},delay);}; window.oldSetInterval=window.setInterval;window.setInterval=function(func,delay){return window.oldSetInterval(function(){try{if(!document.documentElement.getAttribute('stopTimers')){if(typeof func=='string') {var nfunc = new Function(func); nfunc();} else func();}}catch(ex){}},delay);}; <\/script>":"","<script id=\"RTCEarlyScript\" type=\"text/javascript\"> window.oldSetTimeout=window.setTimeout;window.setTimeout=function(func,delay){return window.oldSetTimeout(function(){try{if(!document.documentElement.getAttribute('stopTimers')){if(typeof func=='string') {var nfunc = new Function(func); nfunc();} else func();}}catch(ex){}},delay);};  window.oldSetInterval=window.setInterval;window.setInterval=function(func,delay){return window.oldSetInterval(function(){try{if(!document.documentElement.getAttribute('stopTimers')){if(typeof func=='string') {var nfunc = new Function(func); nfunc();} else func();}}catch(ex){}},delay);}; <\/script>":""};function E(e){var t="exportframe",t=(_("body").append('<iframe id="'+t+'" data-bind="bindIframe: $data"></iframe>'),P.document.getElementById(t)),e=(S.applyBindings(e,t),S.cleanNode(t),e.inline&&e.inline(t.contentWindow.document),t.contentWindow.document.doctype),e="<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">"+"\n"+t.contentWindow.document.documentElement.outerHTML;return S.removeNode(t),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<script ([^>]* )?type="text\/html"[^>]*>[\s\S]*?<\/script>/gm,"")).replace(/<!-- ko ((?!--).)*? -->/g,"")).replace(/<!-- \/ko -->/g,"")).replace(/ data-bind="[^"]*"/gm,"")).replace(/ style="[^"]*"([^>]*) replaced(style="[^"]*")/gm,"$1 $2")).replace(/ replaced(style="[^"]*")([^>]*) style="[^"]*"/gm," $1$2")).replace(/ replaced(style="[^"]*")/gm," $1")).replace(/ http-equiv="[^"]*"([^>]*) replaced(http-equiv="[^"]*")/gm,"$1 $2")).replace(/ replaced(http-equiv="[^"]*")([^>]*) http-equiv="[^"]*"/gm," $1$2")).replace(/ replaced(http-equiv="[^"]*")/gm," $1")).replace(/<replacedcc[^>]* condition="([^"]*)"[^>]*>([\s\S]*?)<\/replacedcc>/g,function(e,t,n){t="\x3c!--[if "+t.replace(/&amp;/,"&")+"]>";return t+n.replace(/(<\/cc>)?<!-- cc:ac:([A-Za-z:]*) -->/g,"</$2>").replace(/><!-- cc:sc -->/g,"/>").replace(/<!-- cc:bo:([A-Za-z:]*) --><cc/g,"<$1").replace(/^.*<!-- cc:start -->/,"").replace(/<!-- cc:end -->.*$/,"")+"<![endif]--\x3e"}),e=o(e)}t.exports={compile:c,load:function(t,e,n,o,i,r){var e="string"==typeof e?e:n.template,a="./",s=e.lastIndexOf("/"),l=(-1!=s&&(a=e.substr(0,s+1)),function(e,t){return t.match("^{[A-Za-z0-9_.]+}")?t:t.match(/^[^\/]*:/)||t.match(/^\//)||t.match(/^\[/)||t.match(/^#?$/)?null:e+t}.bind(void 0,a)),d=void 0===n?{template:e,name:"No name",created:Date.now()}:n;_.get(e,function(e){c(t,l,"template",e,o,d,i,r).init()})},isCompatible:function(t){try{i("matchMedia",function(){return void 0!==P.matchMedia}),i("Block-level functions",function(){try{return new Function("'use strict'; { function g() { } }"),1}catch(e){}}),i("XMLHttpRequest 2",function(){return"XMLHttpRequest"in P&&"withCredentials"in new P.XMLHttpRequest}),i("ES5 strict",function(){return function(){return void 0===this}()}),i("CSS borderRadius",function(){return void 0!==P.document.body.style.borderRadius}),i("CSS boxShadow",function(){return void 0!==P.document.body.style.boxShadow}),i("CSS boxSizing",function(){return void 0!==P.document.body.style.boxSizing}),i("CSS backgroundSize",function(){return void 0!==P.document.body.style.backgroundSize}),i("CSS backgroundOrigin",function(){return void 0!==P.document.body.style.backgroundOrigin});var e=S.bindingHandlers.bindIframe.tpl,n=(S.bindingHandlers.bindIframe.tpl='<!DOCTYPE html>\r\n<html>\r\n<head><title>A</title>\r\n</head>\r\n<body><p align="right" data-bind="attr: { align: \'left\' }">B</p><div data-bind="text: content"></div></body>\r\n</html>\r\n',E({content:"dummy content"})),o=(S.bindingHandlers.bindIframe.tpl=e,'<!DOCTYPE html>\n<html><head><title>A</title>\n</head>\n<body><p align="left">B</p><div>dummy content</div>\n\n</body></html>');if(o===n)return!0;throw A.info("BadBrowser.FrameContentCheck",n.length,o.length,n==o),A.warn("Detected incompatible/misbehaving browser, probably introduced by a bad browser extension."),A.warn(n),"Detected misbehaving browser/extension: unexpected frame content."}catch(e){if(t)throw e;return!1}},fixPageEvents:function(){P.addEventListener&&(P.addEventListener("drag",function(e){(e=e||P.event).preventDefault()},!1),P.addEventListener("dragstart",function(e){(e=e||P.event).preventDefault()},!1),P.addEventListener("dragover",function(e){(e=e||P.event).preventDefault()},!1),P.addEventListener("drop",function(e){(e=e||P.event).preventDefault()},!1),P.document.body.addEventListener("drop",function(e){e.preventDefault()},!1)),P.document.ondragstart&&(P.document.ondragstart=function(){return!1})}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bindings/choose-template.js":51,"./converter/main.js":81,"./viewmodel.js":97,"console-browserify":10}],94:[function(t,n,e){!function(e){!function(){"use strict";var o="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,i=t("./undomanager.js"),r=t("./undoserializer.js");n.exports=function(n){return function(e){e.contentListeners(e.contentListeners()+2);var t=i(e.content,{levels:100,undoLabel:o.computed(function(){return e.t("Undo (#COUNT#)")}),redoLabel:o.computed(function(){return e.t("Redo")})});return e.undo=t.undoCommand,e.undo.execute=n.bind(e,"undo",e.undo.execute),e.redo=t.redoCommand,e.redo.execute=n.bind(e,"redo",e.redo.execute),e.undoReset=n.bind(e,"undoReset",t.reset),e.setUndoModeMerge=t.setModeMerge,e.setUndoModeOnce=t.setModeOnce,t.setModeIgnore(),t.setUndoActionMaker(r.makeUndoAction.bind(void 0,e.content)),r.watchEnabled(!0),e.undoSerializer=r,{pause:function(){t.setModeIgnore()},run:function(){t.setModeOnce()},init:function(){t.setModeOnce()},dispose:function(){e.contentListeners(e.contentListeners()-2),r.watchEnabled(!1),t.dispose()}}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./undomanager.js":95,"./undoserializer.js":96}],95:[function(t,n,e){!function(e){!function(){"use strict";var m="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,w=t("ko-reactor/dist/ko-reactor.min.js"),k=t("console-browserify");n.exports=function(e,i){function r(e){f==u?b(e,o):f==p?b(e,n):f==c&&(b(e,n),o.removeAll())}function t(e,o,i){return{name:m.computed(function(){return m.utils.unwrapObservable(e).replace(/#COUNT#/,i().length)}),enabled:m.computed(function(){return 0!==i().length}),execute:function(){var e,t,n=i.pop();return n&&(e=f,f=o,t=g,g=3,n(),a(d),g=t,f=e),!0}}}function a(e){if(void 0===e)throw"Unexpected operation: stack cleaner called with undefined stack";0<e().length&&void 0!==e()[e().length-1].mergedAction&&delete e()[e().length-1].mergedAction}function s(e,t){return t=function(e,t){e(),t()}.bind(void 0,e,t),void 0!==e.mergedAction&&(t.mergedAction=e.mergedAction),t}function l(e,t,n){if(void 0!==t)e(t);else{if(!n)throw"Unexpected condition: no item and no child.oldValues!";if("added"!==n.status&&"deleted"!==n.status)throw"Unsupported item.status: "+n.status;void 0!==n.moved?"added"==n.status&&(e.splice(n.index,1),e.splice(n.moved,0,n.value)):"added"==n.status?e.splice(n.index,1):e.splice(n.index,0,n.value)}}var d,n=m.observableArray(),o=m.observableArray(),c=0,u=1,p=2,f=c,g=0,h={levels:100,undoLabel:"undo (#COUNT#)",redoLabel:"redo (#COUNT#)"},b=(i="object"==typeof i?m.utils.extend(h,i):h,function(e,t){if(0<t().length){n=t()[t().length-1],o=e;n=void 0!==n.mergedAction?n.mergedAction(o):null;if(null!==n)return void(t()[t().length-1]=n)}var n,o;t().length>=i.levels&&t.shift(),(d=t).push(e)}),v=function(e,t,n,o,i){return e.bind(void 0,n,o,i)},y=("function"==typeof w?w:m.watch)(e,{depth:-1,oldValues:1,mutable:!0,tagFields:!0,async:!1},function(e,t,n){var o=void 0!==t.oldValues?t.oldValues[0]:void 0,e=v(l,e,t,o,n);1!=g&&(3==g?void 0!==e&&(e.mergedAction=function(e){return void 0!==e.mergeMe&&e.mergeMe?s(e,this):null},e.mergeMe=!0):void 0!==e&&(t.oldValues&&2==g&&(e.mergedAction=function(e,t,n){return"object"==typeof n.mergeableAction&&e==n.mergeableAction.child?this:null}.bind(e,t,n),e.mergeableAction={child:t,item:n}),!n||"deleted"!=n.status&&"added"!=n.status?n&&k.warn("Unsupported item.status",n.status,typeof n,n):("deleted"!=n.status&&void 0===n.moved||(e.mergedAction=function(e,t,n){return"object"==typeof n.mergeableMove&&t.value==n.mergeableMove.item.value&&(void 0===t.moved&&void 0===n.mergeableMove.item.moved||void 0!==t.moved&&void 0!==n.mergeableMove.item.moved&&t.moved==n.mergeableMove.item.index&&t.index==n.mergeableMove.item.moved)&&t.status!==n.mergeableMove.item.status?s(n,this):null}.bind(e,t,n)),e.mergeableMove={child:t,item:n})),void 0!==e&&r(e))},{});return{push:r,undoCommand:t(i.undoLabel,u,n),redoCommand:t(i.redoLabel,p,o),reset:function(){n.removeAll(),o.removeAll()},setModeOnce:function(){g=2,a(n)},setModeMerge:function(){g=3,a(n)},setModeNormal:function(){g=0,a(n)},setModeIgnore:function(){g=1,a(n)},setUndoActionMaker:function(e){v=e},dispose:function(){y.dispose()}}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10,"ko-reactor/dist/ko-reactor.min.js":33}],96:[function(n,o,e){!function(e){!function(){"use strict";function s(e,t){for(var n,o="",i=e.length,r=0;r<=i;r++)if(void 0!==(n=r<e.length?e[r]:t)._fieldName)d.isObservable(n)&&(o+="()"),o+="."+n._fieldName;else if(0<r&&"function"==typeof e[r-1].pop){var a=d.isObservable(e[r-1])?d.utils.peekObservable(e[r-1]):e[r-1],s=d.utils.arrayIndexOf(a,n);if(-1==s)throw c.error("Unexpected object not found in parent array",a,n,r,e.length,d.toJS(a),d.utils.unwrapObservable(n)),"Unexpected object not found in parent array";d.isObservable(n)&&(o+="()"),o+="["+s+"]"}else if(0!==i||void 0!==n._fieldName)throw c.error("Unexpected parent with no _fieldName and no parent array",r,e,typeof n),"Unexpected parent with no _fieldName and no parent array";return o}var l,t,d="undefined"!=typeof window?window.ko:void 0!==e?e.ko:null,c=n("console-browserify"),u=function(e,t){for(var n,o,i=0,r=e;i<t.length;)switch(t.charAt(i)){case"(":")"==t.charAt(i+1)&&(r=r()),i+=2;break;case"[":o=t.indexOf("]",i),r=r[t.substring(i+1,o)],i=o+1;break;case".":-1==(n=t.indexOf("(",i))&&(n=t.length),-1==(o=t.indexOf("[",i))&&(o=t.length),o=Math.min(n,o),r=r[t.substring(i+1,o)],i=o}return r};o.exports={dereference:s,reference:u,makeUndoAction:function(e,t,n,o,i,r){try{var a=s(n,o);if(void 0!==l)try{l(a,o,i,r)}catch(e){c.log("Undoserializer ignoring exception in listener callback")}return function(e,t,n,o,i){t=u(t,n);e(t._plainObject||t,o,i)}.bind(void 0,t,e,a,i,r)}catch(e){c.error("Exception processing undo",e,n,o,r)}},setListener:function(e){l=e},watchEnabled:function(e){if(void 0===e)return t;t=e}}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10}],97:[function(e,t,n){!function(u){!function(){"use strict";var s="undefined"!=typeof window?window.jQuery:void 0!==u?u.jQuery:null,d="undefined"!=typeof window?window.ko:void 0!==u?u.ko:null,l=e("console-browserify"),c=e("toastr");c.options={closeButton:!1,debug:!1,positionClass:"toast-bottom-full-width",target:"#mo-body",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",escapeHtml:"true"},t.exports=function(t,e,n,o,i,r){var a={galleryRecent:d.observableArray([]).extend({paging:16}),galleryRemote:d.observableArray([]).extend({paging:16}),selectedBlock:d.observable(null),selectedItem:d.observable(null),selectedImage:d.observable(null),selectedTool:d.observable(0),selectedImageTab:d.observable(0),dragging:d.observable(!1),resizing:d.observable(!1),draggingImage:d.observable(!1),galleryLoaded:d.observable(!1),showPreviewFrame:d.observable(!1),previewMode:d.observable("mobile"),showToolbox:d.observable(!0),showTheme:d.observable(!1),showGallery:d.observable(!1),debug:d.observable(!1),contentListeners:d.observable(0),logoPath:"//mosaico.io/dist/img/mosaico32.png",logoUrl:".",logoAlt:"mosaico"};return a.content=t,a.blocks=e,a.notifier=c,a.tt=function(e,t){if(void 0!==t)for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp("__"+n+"__","g"),t[n]));return e},a.t=a.tt,a.ut=function(e,t){return t},a.templatePath=n,a.remoteUrlProcessor=function(e){return e},a.remoteFileProcessor=function(e){return void 0!==e.url&&(e.url=a.remoteUrlProcessor(e.url)),void 0!==e.thumbnailUrl&&(e.thumbnailUrl=a.remoteUrlProcessor(e.thumbnailUrl)),e},a.loadGallery=function(){a.galleryLoaded("loading"),s.getJSON(o||"/upload/",function(e){for(var t=0;t<e.files.length;t++)e.files[t]=a.remoteFileProcessor(e.files[t]);a.galleryLoaded(e.files.length),a.galleryRemote(e.files.reverse())}).fail(function(){a.galleryLoaded(!1),a.notifier.error(a.t("Unexpected error listing files"))})},a.fileToImage=function(e,t,n){return e.url},a.removeBlock=function(e,t){if(d.utils.unwrapObservable(a.selectedBlock)==d.utils.unwrapObservable(e)&&a.selectBlock(null,!0),"function"==typeof e._switchVisibility)e._switchVisibility(),a.notifier.info(a.t("Block removed: use the visibility flag in the content tab to restore it..."));else if(null!=t)return t=t.blocks.remove(e),a.notifier.info(a.t("Block removed: use undo button to restore it...")),t},a.duplicateBlock=function(e,t){var e=d.utils.unwrapObservable(e),n=d.toJS(d.utils.unwrapObservable(t.blocks)[e]);void 0!==n.id&&(n.id=""),t.blocks.splice(e+1,0,n)},a.moveBlock=function(e,t,n){var e=d.utils.unwrapObservable(e),o=d.utils.unwrapObservable(t.blocks);(n&&0<e||!n&&e<o.length-1)&&(n=o[o=e+(n?-1:1)],a.startMultiple(),t.blocks.splice(o,1),t.blocks.splice(e,0,n),a.stopMultiple())},a.loadDefaultBlocks=function(){var e=a.blocks;a.startMultiple(),a.content().mainBlocks().blocks.splice(0,a.content().mainBlocks().blocks().length);for(var t=0;t<e.length;t++)a.content().mainBlocks().blocks.push(e[t]);a.stopMultiple()},a.addImage=function(e){var t;return null!==a.selectedImage()?(a.selectedImage()(e.url),!0):1==(t=s("#main-wysiwyg-area .selectable-img.selecteditem")).length&&"object"==typeof e&&void 0!==e.url&&(d.contextFor(t[0])._src(e.url),!0)},a.addBlock=function(e,t){var n,o,i=a.selectedBlock();if(null!==i)for(var r=a.content().mainBlocks().blocks().length-1;0<=r;r--)if(a.content().mainBlocks().blocks()[r]()==i){n=r;break}void 0!==n?(o=n+1,a.content().mainBlocks().blocks.splice(o,0,e),a.notifier.info(a.t("New block added after the selected one (__pos__)",{pos:o}))):(a.content().mainBlocks().blocks.push(e),o=a.content().mainBlocks().blocks().length-1,a.notifier.info(a.t("New block added at the model bottom (__pos__)",{pos:o})));e=a.content().mainBlocks().blocks()[o]();return a.selectBlock(e,!0),!1},a.findObjectsOfType=function(e,t){var n,o=[],i=d.utils.unwrapObservable(e);for(n in i)if(i.hasOwnProperty(n)){var r=d.utils.unwrapObservable(i[n]);if(n.match(/Blocks$/))for(var a=d.utils.unwrapObservable(r.blocks),s=0;s<a.length;s++){var l=d.utils.unwrapObservable(a[s]);null!==t&&d.utils.unwrapObservable(l.type)!=t||o.push(l)}else"object"!=typeof r||null===r||null!==t&&d.utils.unwrapObservable(r.type)!=t||o.push(r)}return o},a.placeholderHelper={element:function(e){return s(e[0].outerHTML).removeClass("ui-draggable").addClass("sortable-placeholder").css("display","block").css("position","relative").css("width","100%").css("height","auto").css("opacity",".8")[0]},update:function(e,t){}},a.startMultiple=function(){void 0!==a.setUndoModeMerge&&a.setUndoModeMerge()},a.stopMultiple=function(){void 0!==a.setUndoModeOnce&&a.setUndoModeOnce()},a.localGlobalSwitch=function(e,t){var n=e();return e(null===n?t():null),!1},a.localToGlobalSwitch=function(e,t){var n=e();return null===n?e(t()):(a.startMultiple(),t(n),e(null),a.stopMultiple()),!1},a.selectItem=function(e,t,n){var o=d.utils.peekObservable(e);return void 0!==n&&a.selectBlock(n,!1,!0),o!=t&&(e(t),null!==t&&0===a.selectedTool()&&a.selectedTool(1)),a.selectedImage(null),!1}.bind(a,a.selectedItem),a.isSelectedItem=function(e){return a.selectedItem()==e},a.selectBlock=function(e,t,n,o){var i=d.utils.peekObservable(e);o||a.selectItem(null),i!=t&&(e(t),a.showGallery(!1),null===t||n||0!==a.selectedTool()||a.selectedTool(1))}.bind(a,a.selectedBlock),a.countSubscriptions=function(e,t){var n,o,i=0;for(n in e)e.hasOwnProperty(n)&&(o=e[n],d.isObservable(o)&&(void 0!==o._defaultComputed&&(void 0!==t&&l.log(t+"/"+n+"/_",o._defaultComputed.getSubscriptionsCount()),i+=o._defaultComputed.getSubscriptionsCount()),void 0!==t&&l.log(t+"/"+n+"/-",o.getSubscriptionsCount()),i+=o.getSubscriptionsCount(),o=d.utils.unwrapObservable(o)),"object"==typeof o&&null!==o&&(o=a.countSubscriptions(o,void 0!==t?t+"/"+n+"@":void 0),void 0!==t&&l.log(t+"/"+n+"@",o),i+=o));return i},a.loopSubscriptionsCount=function(){var e=a.countSubscriptions(a.content());u.document.getElementById("subscriptionsCount").innerHTML=e,u.setTimeout(a.loopSubscriptionsCount,1e3)},a.export=a.exportHTML=function(){var e=(t=(t=r(a)).replace(/ data-mce-(href|src|style)="[^"]*"/gm,"")).match(/ data-[^ =]+(="[^"]+")? /)||t.match(/ replaced([^= ]*=)/);return e&&l.warn("Output HTML contains unexpected data- attributes or replaced attributes",e),t},a.exportHTMLtoTextarea=function(e){s(e).val(a.exportHTML())},a.exportJSONtoTextarea=function(e){s(e).val(a.exportJSON())},a.importJSONfromTextarea=function(e){a.importJSON(s(e).val())},a.exportMetadata=function(){return d.toJSON(a.metadata)},a.exportJSON=function(){return d.toJSON(a.exportJS())},a.exportJS=function(){return a.content._plainObject()},a.importJSON=function(e){e=d.utils.parseJson(e);i(e)},a.exportTheme=function(){var e,t={},n=a.content().theme(),r=function(e,t,n){for(var o in n){var i;n.hasOwnProperty(o)&&(null!==(i=d.utils.unwrapObservable(n[o]))&&"object"==typeof i?r(o+".",t,i):t[e+o]=i)}},o=(r("",t,n),"");for(e in t)t.hasOwnProperty(e)&&"type"!=e&&(o+=e+": "+t[e]+";\n");return o},a.loadImage=function(e){a.galleryRecent.unshift(e),a.selectedImageTab(0)},a.selectImage=function(e){a.selectedItem(null),a.selectedImage(e),a.showGallery(!0)},a.dialog=function(e,t){s(e).dialog(t)},a.log=function(e,t){},a.selectedImageTab.subscribe(function(e){1==e&&!1===a.galleryLoaded()&&a.loadGallery()},a,"change"),a}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"console-browserify":10,toastr:43}],98:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"boolean",html:function(e,t,n){e="\x3c!-- ko letproxy: { prop: "+e+" } --\x3e";return(e+='<input type="checkbox" data-bind="checked: prop" />')+'<span class="checkbox-replacer" data-bind="event: { mousedown: function(ui, evt) { prop(!prop()); } }, click: function(ui, evt) { evt.preventDefault(); }, clickBubble: false" ></span>'+"\x3c!-- /ko --\x3e"}}}}},{}],99:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"color",parameters:{transparent:!0},html:function(e,t,n){e="\x3c!-- ko letproxy: { prop: "+e+" } --\x3e";return e+'<div class="color-select">'+('<input size="7" type="text" style="width: 0; padding: 0; visibility: hidden;" data-bind="colorpicker: { color: prop'+(void 0!==n.transparent&&n.transparent?", transparentColor: true":"")+", strings: $root.t('Theme Colors,Standard Colors,Web Colors,Theme Colors,Back to Palette,History,No history yet.') }, "+t+'" />')+'</div><div class="color-text">'+('<input size="15" type="text" data-bind="value: prop, '+t+'" />')+"</div>"+"\x3c!-- /ko --\x3e"}}}}},{}],100:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"font",html:function(e,t,n){return'<select type="text" data-bind="value: '+e+", "+t+'"><optgroup label="Sans-Serif Fonts"><option value="Arial,Helvetica,sans-serif">Arial</option><option value="\'Comic Sans MS\',cursive,sans-serif">Comic Sans MS</option><option value="Impact,Charcoal,sans-serif">Impact</option><option value="\'Trebuchet MS\',Helvetica,sans-serif">Trebuchet MS</option><option value="Verdana,Geneva,sans-serif">Verdana</option></optgroup><optgroup label="Serif Fonts"><option value="Georgia,serif">Georgia</option><option value="\'Times New Roman\',Times,serif">Times New Roman</option></optgroup><optgroup label="Monospace Fonts"><option value="\'Courier New\',Courier,monospace">Courier New</option></optgroup></select>'}}}}},{}],101:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"integer",parameters:{min:!0,max:!0,step:!0},html:function(e,t,n){var o=0,i=1e3,r=(void 0!==n.max&&(i=n.max),void 0!==n.min&&(o=n.min),5*(n=void 0!==n.step?n.step:100<=i-o?10:1)),e="\x3c!-- ko letproxy: { prop: "+e+" } --\x3e";return e+'<div style="width: 64%; display: inline-block;">'+('<input class="number-slider" step="'+n+'" min="'+o+'" max="'+i+'" type="range" value="-1" data-bind="textInput: prop, '+t+'" />')+'</div><div style="width: 33%; display: inline-block; float: right;">'+('<input class="number-spinner" size="7" step="'+n+'" type="number" value="-1" data-bind="spinner: { min: '+o+", max: "+i+", page: "+r+", value: prop }, valueUpdate: ['change', 'spin'], "+t+'" />')+"</div>"+"\x3c!-- /ko --\x3e"}}}}},{}],102:[function(e,t,n){"use strict";function w(e){for(var t=e.split("|"),n={},o=0;o<t.length;o++){var i=t[o].split("=");n[i[0].trim()]=(1<i.length?i[1]:i[0]).trim()}return n}var k=e("../converter/utils.js").addSlashes,x=e("console-browserify"),O=(e("../bindings/selectize.js"),0);t.exports={widget:function(e,t,n){return{widget:"select",parameters:{options:!0,buttonsetIconClasses:!0,buttonsetLabels:!0,renderHint:!0,imagesSources:!0},html:function(e,t,n){if(void 0===n.options)return"";var o=w(n.options);if(void 0!==n.buttonsetIconClasses||void 0!==n.buttonsetLabels||void 0!==n.renderHint&&"buttonset"==n.renderHint){O++;var i,r=0,a={},s=void 0!==n.renderHint&&"buttonset"==n.renderHint||void 0!==n.buttonsetLabels,l={},d=(void 0!==n.buttonsetIconClasses&&(a=w(n.buttonsetIconClasses)),void 0!==n.buttonsetLabels&&(l=w(n.buttonsetLabels)),"\x3c!-- ko letproxy: { prop: "+e+" } --\x3e");for(i in d+='<div data-bind="buttonset: { refreshOn: prop }, '+t+'" style="display: inline-block">',o){r++;var c=a.hasOwnProperty(i)?", icons: { primary: '"+k(a[i])+"' }":"",d=(d+='<input name="buttonset-widget-'+O+'" id="buttonset-widget-'+O+"-"+r+'" type="radio" value="'+k(i)+'" data-bind="checked: prop, button: { text: '+(s?"true":"false")+", label: '"+k((l.hasOwnProperty(i)?l:o)[i])+"'"+c+' }" />')+('<label for="buttonset-widget-'+O+"-"+r+"\" data-bind=\"attr: { title: $root.ut('template', '"+k(o[i])+"') }\">"+i+"</label>")}return d=d+"</div>"+"\x3c!-- /ko --\x3e"}if(void 0!==n.renderHint||void 0!==n.imagesSources){var u="",p={};if("fontface"==n.renderHint)p=!1,u=", selectizeRenderer: function(type, item, escape) { return '<div class=&quot;' + type + '&quot; style=&quot;font-family: ' + escape(item.value) + '&quot;>' + escape(item.text) + '</div>'; }";else if("images"==n.renderHint||void 0!==n.imagesSources){if(void 0!==n.imagesSources)for(var f in p=w(n.imagesSources))p.hasOwnProperty(f)&&(p[f]=p[f].replace(/\s*url\s*\(\s*(?:'(\S*?)'|"(\S*?)"|((?:\\\s|\\\)|\\\"|\\\'|\S)*?))\s*\)/gi,function(e,t){return t.replace(/(?:\\(.))/g,"$1")}));u=", selectizeRenderer: function(type, item, escape) { return '<div class=&quot;' + type + '&quot;><img style=&quot;max-width: 100%&quot; src=&quot;' + escape(item.url) + '&quot; /></div>'; }"}var g,h,b='<select class="selectize-force-single-noadd selectize-hint-'+n.renderHint+'" data-bind="selectize: '+e+u+","+t+'">',v=!0;for(h in o)o.hasOwnProperty(h)&&(b+="<option"+(null!==(g=!1===p?null:p.hasOwnProperty(h)?(g={value:h,text:o[h],url:p[h]},JSON.stringify(g).replace(/"/g,"&quot;")):(x.warn("Template uses imagesSources hint but doesn't define",h,"option:",n.imagesSources,". Falling back to non-hinted select."),v=!1,null))?' data-data="'+g+'"':"")+' value="'+h+"\" data-bind=\"text: $root.ut('template', '"+k(o[h])+"')\">"+o[h]+"</option>");if(b+="</select>",v)return b}var y,m='<div class="mo-select"><select data-bind="value: '+e+", "+t+'">';for(y in o)o.hasOwnProperty(y)&&(m+='<option value="'+y+"\" data-bind=\"text: $root.ut('template', '"+k(o[y])+"')\">"+o[y]+"</option>");return m+="</select></div>"}}}}},{"../bindings/selectize.js":67,"../converter/utils.js":85,"console-browserify":10}],103:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"src",html:function(e,t,n){e="\x3c!-- ko letproxy: { prop: "+e+" } --\x3e";return e+"<span data-bind=\"template: { name: 'widget-src', data: { _src: prop } }\"></span>"+"\x3c!-- /ko --\x3e"}}}}},{}],104:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"textarea",html:function(e,t,n){return'<textarea value="nothing" data-bind="value: '+e+", "+t+'"></textarea>'}}}}},{}],105:[function(e,t,n){"use strict";t.exports={widget:function(e,t,n){return{widget:"url",html:function(e,t,n){return'<div class="ui-textbutton"><input class="ui-textbutton-input" size="7" placeholder="https://..." type="url" pattern="(mailto:.+@.+|https?://.+\\..+|\\[.*\\].*)" value="nothing" data-bind="css: { withButton: typeof $root.linkDialog !== \'undefined\' }, validatedValue: '+e+", "+t+"\" /><a class=\"ui-textbutton-button\" data-bind=\"visible: typeof $root.linkDialog !== 'undefined', click: typeof $root.linkDialog !== 'undefined' ? $root.linkDialog.bind($element.previousSibling) : false, button: { icons: { primary: 'fa fa-fw fa-ellipsis-h' }, label: 'Opzioni', text: false }\">Opzioni</a></div>"}}}}},{}]},{},[48,1])(48)});
//# sourceMappingURL=mosaico.min.js.map